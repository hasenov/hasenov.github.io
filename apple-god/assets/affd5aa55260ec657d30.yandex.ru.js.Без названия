(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["map-widget-app","map-widget-panorama-player-banner"],{81004:(e,t,n)=>{e.exports=n.p+"build/_/08a10d93b5a5ae1d7b9c8a60d1130dfe.svg"},48102:(e,t,n)=>{e.exports=n.p+"build/_/0271ba6b4fcda690a80e91f92edc7177.svg"},9912:(e,t,n)=>{e.exports=n.p+"build/_/9659bbe9fa69477d2a166dabea8ac48d.svg"},23546:(e,t,n)=>{e.exports=n.p+"build/_/4456c10ecbf5d583bdeb1c3d97ef263a.svg"},90851:(e,t,n)=>{e.exports=n.p+"build/_/24fb17f86df88b118167ce528daea382.svg"},82490:(e,t,n)=>{e.exports=n.p+"build/_/c52e7fc4ec73e5c05bc322b50bb07b4c.svg"},2509:(e,t,n)=>{e.exports=n.p+"build/_/495897677a950e88ac35bee6acd284f7.svg"},82461:(e,t,n)=>{e.exports=n.p+"build/_/78fd7e5f9b721a273df35726afb8f72c.svg"},42363:(e,t,n)=>{e.exports=n.p+"build/_/c291190c2aa1f05e02c2c78d173ec5f7.svg"},17049:(e,t,n)=>{e.exports=n.p+"build/_/61683eb23625df83e8aef32ee06c1e14.svg"},57070:(e,t,n)=>{e.exports=n.p+"build/_/9f79510c62081a2e8295f974516febd3.svg"},69777:(e,t,n)=>{e.exports=n.p+"build/_/526b632dc5485eae718acc1a54c8e8b1.svg"},2285:(e,t,n)=>{e.exports=n.p+"build/_/0adc8779bdefa7c4b9f58f4fff819771.svg"},72852:(e,t,n)=>{e.exports=n.p+"build/_/cb2341db6d0af3d9838b64ec9da115b6.svg"},23811:(e,t,n)=>{e.exports=n.p+"build/_/fb41b675b9ab147c27b75c1787065148.svg"},26779:(e,t,n)=>{e.exports=n.p+"build/_/9f7ea1b9a3434256ba04e9331ebdffe6.svg"},90870:(e,t,n)=>{e.exports=n.p+"build/_/fd161c881e6392111418a1036fe1188e.svg"},69085:(e,t,n)=>{e.exports=n.p+"build/_/ebe60c9063e4a91162d1366e790ea391.svg"},45350:(e,t,n)=>{e.exports=n.p+"build/_/7f78fe3f36223c298be58eb812e95646.svg"},55172:(e,t,n)=>{e.exports=n.p+"build/_/5cf17060c6672d32fb90b652cc8d17f0.svg"},65560:(e,t,n)=>{e.exports=n.p+"build/_/2e1750eb108b5881e5577c7e08041e3f.svg"},73449:(e,t,n)=>{e.exports=n.p+"build/_/7485047d3440076f2f17ebb52a011c9c.png"},43161:(e,t,n)=>{e.exports=n.p+"build/_/af158d44913f89ba43eabd0e26e9dda3.png"},68170:(e,t,n)=>{e.exports=n.p+"build/_/9dae14af44a24ba50a1bf841f2d22144.png"},83984:(e,t,n)=>{e.exports=n.p+"build/_/af158d44913f89ba43eabd0e26e9dda3.png"},61159:(e,t,n)=>{e.exports=n.p+"build/_/9c80a04cdee2564f1b348f2c942570e5.png"},94308:(e,t,n)=>{e.exports=n.p+"build/_/d3d3e5e71c45bd5a155c12a2f093120e.png"},2629:(e,t,n)=>{e.exports=n.p+"build/_/db96e0b37fb683edb082b6d22cd47375.png"},27367:(e,t,n)=>{e.exports=n.p+"build/_/d3d3e5e71c45bd5a155c12a2f093120e.png"},30334:(e,t,n)=>{e.exports=n.p+"build/_/9d7d9192162a766707427f0fdfad6e69.png"},86605:(e,t,n)=>{e.exports=n.p+"build/_/d3d3e5e71c45bd5a155c12a2f093120e.png"},85767:(e,t,n)=>{e.exports=n.p+"build/_/30566ea95b3b85e11fdf731ad19d0cb6.png"},81148:(e,t,n)=>{e.exports=n.p+"build/_/d3d3e5e71c45bd5a155c12a2f093120e.png"},39990:(e,t,n)=>{e.exports=n.p+"build/_/00dbdb577dd780ef99cebd89eabff5b0.png"},77994:(e,t,n)=>{e.exports=n.p+"build/_/d3d3e5e71c45bd5a155c12a2f093120e.png"},74721:(e,t,n)=>{e.exports=n.p+"build/_/6b36feaa685efb371af0a08ebce07269.png"},26093:(e,t,n)=>{e.exports=n.p+"build/_/d3d3e5e71c45bd5a155c12a2f093120e.png"},81029:(e,t,n)=>{e.exports=n.p+"build/_/74ca6ea4b76200fd171c44aa5a49f5a8.png"},8872:(e,t,n)=>{e.exports=n.p+"build/_/d3d3e5e71c45bd5a155c12a2f093120e.png"},55583:(e,t,n)=>{e.exports=n.p+"build/_/4107b60439ecfb91bb4f01454bb365e2.png"},63966:(e,t,n)=>{e.exports=n.p+"build/_/dff25d38edaaaed43455e2838501c7d2.png"},28182:(e,t,n)=>{e.exports=n.p+"build/_/581d90e08cdba960142fcabc777c10ad.svg"},74210:(e,t,n)=>{e.exports=n.p+"build/_/d7eede432ce185c2bcdea2a81dd73d60.svg"},61146:(e,t,n)=>{e.exports=n.p+"build/_/982f21b161efbb26f879ac8dcf5bc613.svg"},95550:(e,t,n)=>{e.exports=n.p+"build/_/1e47a624fe5bd69a1a9316620f0be9e7.svg"},79454:(e,t,n)=>{e.exports=n.p+"build/_/b5f1fa24e25b93d30bce3c671e4a13c0.svg"},11504:(e,t,n)=>{e.exports=n.p+"build/_/bcf30db5eee9500d0497a950cf6c4742.svg"},51815:(e,t,n)=>{e.exports=n.p+"build/_/88dd6621d29f63b3bcd11823a075bab8.svg"},63129:(e,t,n)=>{e.exports=n.p+"build/_/6dfdf3e1f699e358e2a45696b5910bfc.svg"},74039:(e,t,n)=>{e.exports=n.p+"build/_/30a6860b000faf67b1e246c0be9a9886.svg"},91034:(e,t,n)=>{e.exports=n.p+"build/_/f869888cf7cada800b61fc42b9a84b32.svg"},75093:(e,t,n)=>{e.exports=n.p+"build/_/2288e6eacf3c5cc628de46cd146ffc9d.svg"},24466:(e,t,n)=>{e.exports=n.p+"build/_/ec9eb89e90d5d2756943d5b7ff95292b.png"},8664:()=>{},23144:()=>{},41988:()=>{},72450:()=>{},33988:()=>{},91784:()=>{},59773:()=>{},48166:function(e){var t;t=function(){"use strict";function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function t(e,t){return e<t?-1:e>t?1:0}return function(n,r,o,i,a){(function t(n,r,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=r-o+1,c=Math.log(s),l=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1),p=Math.max(o,Math.floor(r-u*l/s+d)),f=Math.min(i,Math.floor(r+(s-u)*l/s+d));t(n,r,p,f,a)}var m=n[r],v=o,h=i;for(e(n,o,r),a(n[i],m)>0&&e(n,o,i);v<h;){for(e(n,v,h),v++,h--;0>a(n[v],m);)v++;for(;a(n[h],m)>0;)h--}0===a(n[o],m)?e(n,o,h):e(n,++h,i),h<=r&&(o=h+1),r<=h&&(i=h-1)}})(n,r,o||0,i||n.length-1,a||t)}},e.exports=t()},32089:(e,t)=>{"use strict";t.Z='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.293 3.293a1 1 0 0 0 0 1.414L6.586 8l-3.293 3.293a1 1 0 0 0 1.414 1.414L8 9.414l3.293 3.293a1 1 0 0 0 1.414-1.414L9.414 8l3.293-3.293a1 1 0 1 0-1.414-1.414L8 6.586 4.707 3.293a1 1 0 0 0-1.414 0z" fill="currentColor"/></svg>'},65510:(e,t,n)=>{"use strict";e.exports=o,e.exports.default=o;var r=n(48166);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t){a(e,0,e.children.length,t,e)}function a(e,t,n,r,o){o||(o=m(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<n;a++)i=e.children[a],s(o,e.leaf?r(i):i);return o}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function l(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,n,o,i){for(var a,s=[t,n];s.length;)(n=s.pop())-(t=s.pop())<=o||(r(e,a=t+Math.ceil((n-t)/o/2)*o,t,n,i),s.push(t,a,a,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!f(e,t))return n;for(var o,i,a,s,u=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],f(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):p(e,s)?this._all(a,n):u.push(a));t=u.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!f(e,t))return!1;for(var r,o,i,a,s=[];t;){for(r=0,o=t.children.length;r<o;r++)if(i=t.children[r],f(e,a=t.leaf?n(i):i)){if(t.leaf||p(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length){if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var o=this.data;this.data=r,r=o}this._insert(r,this.data.height-r.height-1,!0)}}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(e,t){if(!e)return this;for(var n,r,o,i,a=this.data,s=this.toBBox(e),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),i=!0),a.leaf&&-1!==(o=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return -1}(e,a.children,t))){a.children.splice(o,1),u.push(a),this._condense(u);break}!i&&!a.leaf&&p(a,s)?(u.push(a),c.push(n),n=0,r=a,a=a.children[0]):r?(n++,a=r.children[n],i=!1):a=null}return this},toBBox:function(e){return e},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var o,a=n-t+1,s=this._maxEntries;if(a<=s)return i(o=m(e.slice(t,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(o=m([])).leaf=!1,o.height=r;var u,c,l,d,p=Math.ceil(a/s),f=p*Math.ceil(Math.sqrt(s));for(v(e,t,n,f,this.compareMinX),u=t;u<=n;u+=f)for(l=Math.min(u+f-1,n),v(e,u,l,p,this.compareMinY),c=u;c<=l;c+=p)d=Math.min(c+p-1,l),o.children.push(this._build(e,c,d,r-1));return i(o,this.toBBox),o},_chooseSubtree:function(e,t,n,r){for(var o,i,a,s,u,c,d,p;r.push(t),!t.leaf&&r.length-1!==n;){for(o=0,d=p=1/0,i=t.children.length;o<i;o++)u=l(a=t.children[o]),(c=(Math.max(a.maxX,e.maxX)-Math.min(a.minX,e.minX))*(Math.max(a.maxY,e.maxY)-Math.min(a.minY,e.minY))-u)<p?(p=c,d=u<d?u:d,s=a):c===p&&u<d&&(d=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,o=n?e:r(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),s(a,o);t>=0;)if(i[t].children.length>this._maxEntries)this._split(i,t),t--;else break;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var n=e[t],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var a=this._chooseSplitIndex(n,o,r),s=m(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,i(n,this.toBBox),i(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,o,i,s,u,c,d,p;for(c=d=1/0,r=t;r<=n-t;r++)s=function(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-n)*Math.max(0,Math.min(e.maxY,t.maxY)-r)}(o=a(e,0,r,this.toBBox),i=a(e,r,n,this.toBBox)),u=l(o)+l(i),s<c?(c=s,p=r,d=u<d?u:d):s===c&&u<d&&(d=u,p=r);return p},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:u,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,o)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var o,i,u=this.toBBox,c=a(e,0,t,u),l=a(e,n-t,n,u),p=d(c)+d(l);for(o=t;o<n-t;o++)i=e.children[o],s(c,e.leaf?u(i):i),p+=d(c);for(o=n-t-1;o>=t;o--)i=e.children[o],s(l,e.leaf?u(i):i),p+=d(l);return p},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)s(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():i(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=Function("a","b",t.join(e[0])),this.compareMinY=Function("a","b",t.join(e[1])),this.toBBox=Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},28216:(e,t,n)=>{"use strict";n.d(t,{$j:()=>F,I0:()=>B});var r=n(87363),o=n.n(r),i=o().createContext(null),a=function(e){e()},s={notify:function(){},get:function(){return[]}},u="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,c=n(87462),l=n(63366),d=n(8679),p=n.n(d),f=n(72973),m=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],v=["reactReduxForwardedRef"],h=[],g=[null,null];function y(e,t){var n=e[1];return[t.payload,n+1]}function _(e,t,n){u(function(){return e.apply(void 0,t)},n)}function b(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function w(e,t,n,r,o,i,a,s,u,c){if(e){var l=!1,d=null,p=function(){if(!l){var e,n,p=t.getState();try{e=r(p,o.current)}catch(l){n=l,d=l}n||(d=null),e===i.current?a.current||u():(i.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=p,n.trySubscribe(),p(),function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var E=function(){return[null,0]};function S(e,t){void 0===t&&(t={});var n=t,u=n.getDisplayName,d=void 0===u?function(e){return"ConnectAdvanced("+e+")"}:u,S=n.methodName,C=void 0===S?"connectAdvanced":S,k=n.renderCountProp,R=void 0===k?void 0:k,x=n.shouldHandleStateChanges,P=void 0===x||x,M=n.storeKey,I=void 0===M?"store":M,T=(n.withRef,n.forwardRef),Z=void 0!==T&&T,D=n.context,L=void 0===D?i:D,A=(0,l.Z)(n,m);return function(t){var n=t.displayName||t.name||"Component",i=d(n),u=(0,c.Z)({},A,{getDisplayName:d,methodName:C,renderCountProp:R,shouldHandleStateChanges:P,storeKey:I,displayName:i,wrappedComponentName:n,WrappedComponent:t}),m=A.pure,S=m?r.useMemo:function(e){return e()};function k(n){var i=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=(0,l.Z)(n,v);return[n.context,e,t]},[n]),d=i[0],p=i[1],m=i[2],C=(0,r.useMemo)(function(){return d&&d.Consumer&&(0,f.isContextConsumer)(o().createElement(d.Consumer,null))?d:L},[d,L]),k=(0,r.useContext)(C),R=!!n.store&&!!n.store.getState&&!!n.store.dispatch;k&&k.store;var x=R?n.store:k.store,M=(0,r.useMemo)(function(){return e(x.dispatch,u)},[x]),I=(0,r.useMemo)(function(){if(!P)return g;var e=function(e,t){var n,r=s;function o(){u.onStateChange&&u.onStateChange()}function i(){if(!n){var i,s,u;n=t?t.addNestedSub(o):e.subscribe(o),i=a,s=null,u=null,r={clear:function(){s=null,u=null},notify:function(){i(function(){for(var e=s;e;)e.callback(),e=e.next})},get:function(){for(var e=[],t=s;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=u={callback:e,next:null,prev:u};return n.prev?n.prev.next=n:s=n,function(){t&&null!==s&&(t=!1,n.next?n.next.prev=n.prev:u=n.prev,n.prev?n.prev.next=n.next:s=n.next)}}}}}var u={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return!!n},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=s)},getListeners:function(){return r}};return u}(x,R?null:k.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[x,R,k]),T=I[0],Z=I[1],D=(0,r.useMemo)(function(){return R?k:(0,c.Z)({},k,{subscription:T})},[R,k,T]),A=(0,r.useReducer)(y,h,E),N=A[0][0],z=A[1];if(N&&N.error)throw N.error;var F=(0,r.useRef)(),U=(0,r.useRef)(m),O=(0,r.useRef)(),q=(0,r.useRef)(!1),B=S(function(){return O.current&&m===U.current?O.current:M(x.getState(),m)},[x,N,m]);_(b,[U,F,q,m,B,O,Z]),_(w,[P,x,T,M,U,F,q,O,Z,z],[x,T,M]);var H=(0,r.useMemo)(function(){return o().createElement(t,(0,c.Z)({},B,{ref:p}))},[p,t,B]);return(0,r.useMemo)(function(){return P?o().createElement(C.Provider,{value:D},H):H},[C,H,D])}var x=m?o().memo(k):k;if(x.WrappedComponent=t,x.displayName=k.displayName=i,Z){var M=o().forwardRef(function(e,t){return o().createElement(x,(0,c.Z)({},e,{reactReduxForwardedRef:t}))});return M.displayName=i,M.WrappedComponent=t,p()(M,t)}return p()(x,t)}}function C(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function k(e,t){if(C(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!C(e[n[o]],t[n[o]]))return!1;return!0}function R(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function x(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function P(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=x(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=x(o),o=r(t,n)),o},r}}var M=[function(e){return"function"==typeof e?P(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:R(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?R(function(t){return function(e,t){var n={};for(var r in e)!function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})}(r);return n}(e,t)}):void 0}],I=[function(e){return"function"==typeof e?P(e,"mapStateToProps"):void 0},function(e){return e?void 0:R(function(){return{}})}];function T(e,t,n){return(0,c.Z)({},n,e,t)}var Z=[function(e){return"function"==typeof e?function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}:void 0},function(e){return e?void 0:function(){return T}}],D=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function L(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=(0,l.Z)(t,D),a=n(e,i),s=r(e,i),u=o(e,i);return(i.pure?function(e,t,n,r,o){var i,a,s,u,c,l=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,f=!1;return function(o,m){var v,h,g,y;return f?(g=!d(m,a),y=!l(o,i),(i=o,a=m,g&&y)?(s=e(i,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):g?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):(y&&(h=!p(v=e(i,a),s),s=v,h&&(c=n(s,u,a))),c)):(s=e(i=o,a=m),u=t(r,a),c=n(s,u,a),f=!0,c)}}:function(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}})(a,s,u,e,i)}var A=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function N(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function z(e,t){return e===t}var F=function(e){var t={},n=t.connectHOC,r=void 0===n?S:n,o=t.mapStateToPropsFactories,i=void 0===o?I:o,a=t.mapDispatchToPropsFactories,s=void 0===a?M:a,u=t.mergePropsFactories,d=void 0===u?Z:u,p=t.selectorFactory,f=void 0===p?L:p;return function(e,t,n,o){void 0===o&&(o={});var a=o,u=a.pure,p=a.areStatesEqual,m=a.areOwnPropsEqual,v=void 0===m?k:m,h=a.areStatePropsEqual,g=void 0===h?k:h,y=a.areMergedPropsEqual,_=void 0===y?k:y,b=(0,l.Z)(a,A),w=N(e,i,"mapStateToProps"),E=N(t,s,"mapDispatchToProps"),S=N(n,d,"mergeProps");return r(f,(0,c.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:w,initMapDispatchToProps:E,initMergeProps:S,pure:void 0===u||u,areStatesEqual:void 0===p?z:p,areOwnPropsEqual:v,areStatePropsEqual:g,areMergedPropsEqual:_},b))}}();function U(){return(0,r.useContext)(i)}function O(e){void 0===e&&(e=i);var t=e===i?U:function(){return(0,r.useContext)(e)};return function(){return t().store}}var q=O(),B=function(e){void 0===e&&(e=i);var t=e===i?q:O(e);return function(){return t().dispatch}}();a=n(61533).unstable_batchedUpdates},88359:(e,t)=>{"use strict";var n=60103,r=60106,o=60107,i=60108,a=60114,s=60109,u=60110,c=60112,l=60113,d=60120,p=60115,f=60116;if("function"==typeof Symbol&&Symbol.for){var m=Symbol.for;n=m("react.element"),r=m("react.portal"),o=m("react.fragment"),i=m("react.strict_mode"),a=m("react.profiler"),s=m("react.provider"),u=m("react.context"),c=m("react.forward_ref"),l=m("react.suspense"),d=m("react.suspense_list"),p=m("react.memo"),f=m("react.lazy"),m("react.block"),m("react.server.block"),m("react.fundamental"),m("react.debug_trace_mode"),m("react.legacy_hidden")}t.isContextConsumer=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case l:case d:return e;default:switch(e=e&&e.$$typeof){case u:case c:case f:case p:case s:return e;default:return t}}case r:return t}}}(e)===u}},72973:(e,t,n)=>{"use strict";e.exports=n(88359)},10951:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(97582),o=n(87363);function i(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var i,a,s=(0,o.useRef)(0),u=(i=(0,o.useRef)(!1),a=(0,o.useCallback)(function(){return i.current},[]),(0,o.useEffect)(function(){return i.current=!0,function(){i.current=!1}},[]),a),c=(0,o.useState)(n),l=c[0],d=c[1];return[l,(0,o.useCallback)(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=++s.current;return d(function(e){return(0,r.pi)((0,r.pi)({},e),{loading:!0})}),e.apply(void 0,t).then(function(e){return u()&&o===s.current&&d({value:e,loading:!1}),e},function(e){return u()&&o===s.current&&d({error:e,loading:!1}),e})},t)]}},18127:(e,t,n)=>{"use strict";var r=n(87363);t.Z=function(e){(0,r.useEffect)(e,[])}},89048:(e,t,n)=>{"use strict";var r=n(18127);t.Z=function(e){(0,r.Z)(function(){e()})}},37176:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(87363);function o(e){var t=(0,r.useRef)();return(0,r.useEffect)(function(){t.current=e}),t.current}},77823:(e,t,n)=>{"use strict";var r=n(87363),o=n(18127);t.Z=function(e){var t=(0,r.useRef)(e);t.current=e,(0,o.Z)(function(){return function(){return t.current()}})}},37839:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(87363),o=function(e,t){var n,o=(n=(0,r.useRef)(!0)).current?(n.current=!1,!0):n.current;(0,r.useEffect)(function(){if(!o)return e()},t)}},33634:(e,t,n)=>{"use strict";function r(e){return!!e&&e instanceof DOMException&&"AbortError"===e.name}function o(e){return void 0===e&&(e="Aborted"),new DOMException(e,"AbortError")}n.d(t,{D:()=>r,o:()=>o})},76014:(e,t,n)=>{"use strict";function r(e,t){}n.d(t,{h:()=>r}),n(49675),(0,n(29009)._)(Error)},19084:(e,t,n)=>{"use strict";n.d(t,{SF:()=>o,Sv:()=>i,zw:()=>a,wo:()=>s});var r=n(48223),o=256,i=130,a=32,s=function(e){if("tile"===e.type){var t=(0,r._)({},e);return e.raster&&(t.raster=(0,r._)({},e.raster)),e.vector&&(t.vector=(0,r._)({},e.vector)),t}return(0,r._)({},e)}},94408:(e,t,n)=>{"use strict";n.d(t,{u:()=>function e(t){if("function"==typeof t)return t;if("string"==typeof t)return t in o||(0,r._y)(Error("Unexpected timing function used: "+t)),e(o[t]);var n=t.p1,i=t.p2,a={x:3*n.x,y:3*n.y},s={x:3*(i.x-2*n.x),y:3*(i.y-2*n.y)},u={x:3*(n.x-i.x)+1,y:3*(n.y-i.y)+1};return function(e){var t;return t=function(e){for(var t,n,r,o=e,i=0;i<5&&!(.001>Math.abs((t=o,r=u.x*Math.pow(t,3)+s.x*Math.pow(t,2)+a.x*t-e)));)o-=r/(n=o,a.x+n*(2*s.x+3*n*u.x)),i++;return o}(e),u.y*Math.pow(t,3)+s.y*Math.pow(t,2)+a.y*t}}});var r=n(83611),o={linear:{p1:{x:0,y:0},p2:{x:1,y:1}},ease:{p1:{x:.25,y:.1},p2:{x:.25,y:1}},"ease-in":{p1:{x:.42,y:0},p2:{x:1,y:1}},"ease-out":{p1:{x:0,y:0},p2:{x:.58,y:1}},"ease-in-out":{p1:{x:.42,y:0},p2:{x:.58,y:1}}}},80937:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>a,ZE:()=>s,$7:()=>function e(t){if("FeatureCollection"===t.type){var n;return(n=[]).concat.apply(n,(0,o._)(t.features.map(function(t){return e(t)})))}return[t]},JO:()=>u});var r=n(48223),o=n(49771),i=n(83611);function a(e,t){return(0,r._)({},e,{geometry:e.geometry&&s(e.geometry,t)})}function s(e,t){switch(e.type){case"Point":return(0,r._)({},e,{coordinates:t(e.coordinates)});case"LineString":return(0,r._)({},e,{coordinates:e.coordinates.map(t)});case"MultiLineString":return(0,r._)({},e,{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"Polygon":return(0,r._)({},e,{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"MultiPolygon":return(0,r._)({},e,{coordinates:e.coordinates.map(function(e){return e.map(function(e){return e.map(t)})})});default:(0,i._y)(Error("Unexpected geometry type: "+e.type))}}function u(e){"string"!=typeof e.id&&(0,i._y)(Error("Feature or collection id must be a string"))}},52193:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r="hidden"},72017:(e,t,n)=>{"use strict";n.d(t,{XK:()=>d,X_:()=>l,F7:()=>f});var r=n(48223),o=n(86775),i=n(49771),a=n(83611),s=n(62462),u=n(76014),c=n(80609),l="__empty__";function d(e){var t,n,o,d,p,f,m={id:e.id,grouppedWith:e.grouppedWith,source:e.source?e.source:l,type:e.type?e.type:"default",originalImplementation:e.implementation,implementation:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if(e.implementation){var o=e.implementation.apply(e,(0,i._)(n));if(o)return o}return s._.apply(void 0,(0,i._)(n))},options:{raster:{},vector:{}}};return!m.grouppedWith&&(null==(n=e.options)?void 0:null==(t=n.vector)?void 0:t.parentLayerId)&&(m.grouppedWith=null==(p=e.options)?void 0:null==(d=p.vector)?void 0:d.parentLayerId),(null==(f=null==(o=e.options)?void 0:o.raster)?void 0:f.implementation)&&((0,u.h)(!1,"Please use layer.implementation instead  layer.options.raster.implementation"),e.implementation||(e.implementation=function(){var e=f.implementation;return e.prototype instanceof c.x||(0,a._y)(Error("Implementation must be derived from CustomDomLayer")),e})),e.options&&(e.options.raster&&(m.options.raster=(0,r._)({},e.options.raster)),e.options.vector&&(m.options.vector=(0,r._)({},e.options.vector))),m}var p=/^(\w+)?(?::(\w+)(?:\((.*)\))?)?$/;function f(e,t){var n=e.match(p);n&&0!==n[0].length||(0,a._y)(Error("Bad string layer spec '"+e+"'"));for(var i=(0,o._)(n,4),s=i[1],u=i[2],c=i[3],l=c?c.split(","):[],d=Object.create(null),f=0;f<l.length;f++)d[l[f]]=!0;return{id:e,source:s,type:u,options:{raster:(0,r._)({},d,null==t?void 0:t.raster),vector:(0,r._)({},d,null==t?void 0:t.vector)}}}},62462:(e,t,n)=>{"use strict";n.d(t,{_:()=>r,M:()=>o});var r=function(e){var t;return null==(t=o[e.effectiveMode])?void 0:t.call(o,e)},o={raster:function(){return null},vector:function(){return null}}},83611:(e,t,n)=>{"use strict";n.d(t,{YD:()=>a,H:()=>s,_y:()=>c,vp:()=>u});var r,o,i=n(33634);function a(e){r||(r=e({project:"ymaps3",unhandledRejection:!1,uncaughtException:!1})),o||(o=e({project:"ymaps-vector",unhandledRejection:!1,uncaughtException:!1}))}function s(e){var t,n,o;e&&"object"==typeof e||(e=Error(e||"empty")),n=(t=e).logged,o=/fetch|network/i.test(t.message),n||(0,i.D)(t)||o||(r?(r({additional:e.additionalInfo},e),e.logged=!0):window.console.error(e))}function u(e,t,n){o&&o({block:t,additional:n},e)}function c(e){throw s(e),e}a.reset=function(){r=void 0,o=void 0}},32721:(e,t,n)=>{"use strict";function r(e){var t=e.getLayersEx(),n=t.topRasterLayers,r=t.mainLayers,o=new Set;n.forEach(function(e){return o.add(e.source)}),r.forEach(function(e){return o.add(e.source)});var i=[];return o.forEach(function(e){return i.push(e)}),i.map(function(t){return e.getDataSource(t)}).map(function(e){var t;return(null==e?void 0:e.type)==="tile"&&(null==e?void 0:null==(t=e.copyrights)?void 0:t.join(" "))}).filter(Boolean).join(" ")}n.d(t,{h:()=>r})},80609:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r=function(){function e(e){this._props=e}var t=e.prototype;return t._requestRender=function(){this._props.requestRender()},t.render=function(){},e}()},93265:(e,t,n)=>{"use strict";n.d(t,{H:()=>eM});var r=n(34788),o=n(18188),i=n(11912),a=n(55877),s=n.n(a),u=n(45731),c=n(12690),l=n(38067),d=n(37830),p=n(61250),f=n(37358);function m(e){return!!(e&&"results"in e&&e.results)}var v=n(35501);function h(e,t){return{items:[e],requestCorrectedQuery:null==t?void 0:t.requestCorrectedQuery,requestId:e.requestId,requestQuery:null==t?void 0:t.requestQuery,requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1}}var g=n(27760),y=n(22645),_=n(14245),b="Collections";function w(e){return(0,_.S)(e)&&e.values.some(function(e){return e.id===b})}var E=n(58847);function S(e,t){var n=e.chain,r=t.mapLocation,o=r.center,i=r.span,a=r.zoom,s=C({searchType:"TEXT",text:n?"chain_id:("+n+")":e.text&&String(e.text),displayText:n?e.text:e["display-text"],correctMisspell:e.noreask?0:void 0,origin:e.source||"url",center:(0,u.P)(e.sll)||o,span:(0,u.P)(e.sspn)||i,zoom:parseInt(e.z,10)||a,sort:e.sort,context:e.sctx,filters:e.filter?e.filter.split(";"):void 0},t),c=s[0];if(c&&(0,E.d)(t)&&(c.request.snippets=t.search.snippets.filter(function(e){return"related_adverts/1.x"!==e}),c.request.maxadv=0),c&&e.debug.includes("bounds")&&(c.showDebugBounds=!0),c){var l,d,p,f=m(c)?c.results:void 0;if((d=null==(l=null==f?void 0:f.filters)?void 0:l.find(w))&&(p=d.values.find(function(e){return e.id===b}))&&p.selected){var v=t.mapLocation;c.mapLocationRequest={center:v.center,zoom:v.zoom,bounds:v.bounds,forceApply:!0}}}return s}function C(e,t){var n=t.searchPreloadedResults;if(n){var r=n.branding;(null==r?void 0:r.displayText)&&(e.displayText=r.displayText);var o=function(e){try{JSON.parse(e)}catch(t){return e.startsWith("provider:")}return!0}(e.text||"");return[{request:e,results:n,meta:"category"===t.landing.id||"search"===t.landing.id&&(!o||(null==r?void 0:r.displayText))?t.meta:void 0}]}return[{request:e}]}var k=function(e,t){if((null==(r=t.searchPreloadedResults)?void 0:r.exactResult)&&"toponym"===t.searchPreloadedResults.exactResult.type||(e.where?o=(n=(0,u.P)(e.where))?C({searchType:"BUSINESS_LIST",where:n,origin:e.source||"url"},t):[]:e.text&&(o=S(e,t)),!o||0===o.length))return[];var n,r,o,i=o[o.length-1];return i.request.disallowZoom=!0,t.query["show-filters-panel"]&&(i.filterPanelStack=[{type:"list"},{type:"filter",id:t.query["show-filters-panel"]}]),o},R=n(36897),x=n(22370),P=n(17316),M=n(64675),I=n(75462),T=n(86946),Z=n(13183),D=n(88237),L=n(62042),A=n(89920),N=n(64381),z={"organization/add":"open","organization/opened":"open","organization/closed/permanently":"closed_permanently","organization/closed/temporary":"closed_temporary","organization/moved":"moved","organization/closed/unknown":"closed_unknown"},F=n(13317),U=n(72119),O=function(){try{var e=(0,U.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),q=function(e,t,n){"__proto__"==t&&O?O(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},B=n(79651),H=Object.prototype.hasOwnProperty,j=function(e,t,n){var r=e[t];H.call(e,t)&&(0,B.Z)(r,n)&&(void 0!==n||t in e)||q(e,t,n)},W=n(71036),G=n(56009),Y=n(77226),V=n(62281),K=function(e,t,n,r){if(!(0,Y.Z)(e))return e;t=(0,W.Z)(t,e);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var u=(0,V.Z)(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(o!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=(0,Y.Z)(l)?l:(0,G.Z)(t[o+1])?[]:{})}j(s,u,c),s=s[u]}return e},X=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=(0,F.Z)(e,a);n(s,a)&&K(i,(0,W.Z)(a,e),s)}return i},J=n(94262),$=n(57619),Q=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},ee=Math.max,et=n(69203),en=O?function(e,t){return O(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:et.Z,er=Date.now,eo=function(e){var t=0,n=0;return function(){var r=er(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(en),ei=function(e){var t,n;return eo((t=void 0,n=$.Z,t=ee(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=ee(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Q(e,this,s)}),e+"")}(function(e,t){return null==e?{}:X(e,t,function(t,n){return(0,J.Z)(e,n)})}),ea=/(\d+)(?: (\S+))?/,es=/(\d+)[–-](\d+)(?: (\S+))?/,eu={walk:"pedestrian",transport:"masstransit",transfer:"masstransit"};function ec(e){var t=e.routerResponse,n=null==t?void 0:t.routes.at(e.activeRouteIndex),r=(null==n?void 0:n.type)||e.travelMode;if("comparison"===r)return"auto";var o=null!==e.activeCargoPresetId;return"auto"===r&&o?"truck":r}function el(e){return e?Number(e)||0:void 0}var ed=n(43272);function ep(e){return"toponym"===e.type||"business"===e.type?e.displayCoordinates:e.coordinates}function ef(e){var t=e.query["feedback-context"],n=e.query["feedback-client-context"],r=Array.isArray(t)?t[0]:t,o=Array.isArray(n)?n[0]:n;return{formContextId:ed.Cb.includes(r)?r:void 0,clientContextId:o?String(o):void 0}}var em={open:"open","temporary-closed":"closed_temporary","permanent-closed":"closed_permanently","possible-closed":"closed_temporary"},ev={"entrance/add":function(e){return{answerData:{name:"",coordinates:e.coordinates},questionData:void 0}},"address/add":function(e){return{answerData:{name:"",addressString:"",coordinates:e.coordinates},questionData:void 0}},"road/add":function(e){return{answerData:{name:"",address:[],points:[],coordinates:e.coordinates},questionData:void 0}},"other/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"transit/stop/add":function(e){return{answerData:{uri:"",name:"",lines:[],coordinates:e.coordinates},questionData:void 0}},"parking/add":function(e){return{answerData:{entrances:[],coordinates:e.coordinates},questionData:void 0}},"barrier/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"fence/add":function(e){return{answerData:{points:[],gates:[],coordinates:e.coordinates},questionData:void 0}},"crosswalk/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"gate/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"provider/add":function(e){return{answerData:{name:"",siteUrl:"",text:"",uri:"",coordinates:e.coordinates},questionData:void 0}},"assignment/address/add":function(e){var t,n;return{answerData:{name:"",address:[{kind:"street",name:(null==(t=e.result.compositeAddress)?void 0:t.street)||""},{kind:"house",name:(null==(n=e.result.compositeAddress)?void 0:n.house)||""}],coordinates:e.coordinates||e.result.displayCoordinates},questionData:void 0}},"assignment/settlement/scheme/add":function(e){return{answerData:{name:"",address:[],coordinates:e.coordinates},questionData:void 0}},"object/other":function(){return{answerData:{},questionData:void 0}},"address/edit":function(e){var t=e.result.hasEmptyAddress?"":e.result.address;return{answerData:{name:e.result.title,addressString:t,coordinates:e.coordinates||e.result.displayCoordinates},questionData:{name:e.result.title,addressString:t,coordinates:e.result.displayCoordinates}}},"entrance/edit":function(e){var t,n;return{answerData:{kind:"original",name:null==(t=e.result.compositeAddress)?void 0:t.entrance,coordinates:e.coordinates||e.result.displayCoordinates},questionData:{name:null==(n=e.result.compositeAddress)?void 0:n.entrance,coordinates:e.result.displayCoordinates}}},"object/location/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"object/name/edit":function(e){return{answerData:{name:e.result.title,coordinates:e.result.displayCoordinates},questionData:{name:e.result.title,coordinates:e.result.displayCoordinates}}},"object/not-found":function(e){return{answerData:{},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/barrier/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/gate/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/entrance/edit":function(e){return{answerData:{kind:"original",name:e.result.name,coordinates:e.result.displayCoordinates||e.coordinates},questionData:{name:e.result.name,coordinates:e.result.displayCoordinates}}},"assignment/organization/status":function(e){return{answerData:eh(e),questionData:eh(e)}},"transit/stop/not-found":function(e){return{answerData:{},questionData:{coordinates:e.result.coordinates}}},"transit/stop/name/edit":function(e){var t,n;return{answerData:{name:(null==(t=e_(e.result))?void 0:t.name)||"",coordinates:e.result.coordinates},questionData:{name:(null==(n=e_(e.result))?void 0:n.name)||"",coordinates:e.result.coordinates}}},"transit/stop/location/edit":function(e){var t;return{answerData:{coordinates:e.coordinates||(null==(t=e_(e.result))?void 0:t.coordinates)},questionData:{coordinates:ep(e.result)}}},"transit/stop/route/incorrect":function(e){var t,n,r=e_(e.result);return{answerData:{uri:(null==r?void 0:null==(t=r.searchResult)?void 0:t.uri)||"",name:null==r?void 0:r.name,coordinates:e.coordinates||(null==r?void 0:r.coordinates)||e.result.coordinates,lines:(null==r?void 0:r.transports.map(function(e){return{uri:e.uri||"",threads:e.threads.map(function(e){return{threadId:e.threadId}})}}))||[]},questionData:{uri:(null==r?void 0:null==(n=r.searchResult)?void 0:n.uri)||"",name:(null==r?void 0:r.name)||"",coordinates:(null==r?void 0:r.coordinates)||e.coordinates||e.result.coordinates,lines:(null==r?void 0:r.transports.map(function(e){return{uri:e.uri||"",threads:e.threads.map(function(e){return{threadId:e.threadId}})}}))||[]}}},"transit/stop/other":function(){return{answerData:{},questionData:void 0}},"subway/not-found":function(){return{answerData:{},questionData:void 0}},"subway/name/edit":function(e){var t,n;return{answerData:{name:(null==(t=e_(e.result))?void 0:t.name)||"",coordinates:e.result.coordinates},questionData:{name:(null==(n=e_(e.result))?void 0:n.name)||"",coordinates:e.result.coordinates}}},"subway/location/edit":function(e){var t;return{answerData:{coordinates:e.coordinates||(null==(t=e_(e.result))?void 0:t.coordinates)},questionData:{coordinates:ep(e.result)}}},"subway/other":function(){return{answerData:{},questionData:void 0}},"organization/add":function(e){return{answerData:eg(eh(e),e.type),questionData:void 0}},"organization/edit-info":function(e){return{answerData:eh(e),questionData:eh(e)}},"organization/other":function(e){return{answerData:eh(e),questionData:eh(e)}},"organization/closed-full":function(e){return{answerData:eh(e),questionData:eh(e)}},"organization/closed/permanently":function(e){return{answerData:eg(eh(e),e.type),questionData:eh(e)}},"organization/closed/temporary":function(e){return{answerData:eg(eh(e),e.type),questionData:eh(e)}},"organization/closed/unknown":function(e){return{answerData:eg(eh(e),e.type),questionData:eh(e)}},"organization/opened":function(e){return{answerData:eg(eh(e),e.type),questionData:eh(e)}},"organization/moved":function(e){return{answerData:eg(eh(e),e.type),questionData:eh(e)}},"organization/location/edit":function(e){return{answerData:eh(e),questionData:eh(e)}},"organization/edit-accessibility":function(e){return{answerData:eh(e),questionData:eh(e)}},"route/edit/better":function(e,t){return{answerData:{segments:[]},questionData:ey(t.routeStackItem)}},"route/incorrect/road-closed":function(e,t){return{answerData:{type:"no_road",coordinates:e.coordinates},questionData:ey(t.routeStackItem)}},"route/incorrect/poor-condition":function(e,t){return{answerData:{type:"poor_condition",coordinates:e.coordinates},questionData:ey(t.routeStackItem)}},"route/incorrect/prohibiting-sign":function(e,t){return{answerData:{type:"prohibiting_sign",vehicleRestrictions:{},coordinates:e.coordinates},questionData:ey(t.routeStackItem)}},"route/incorrect/obstruction":function(e,t){return{answerData:{type:"obstruction",coordinates:e.coordinates},questionData:ey(t.routeStackItem)}},"route/incorrect/other":function(e,t){return{answerData:{type:"other",coordinates:e.coordinates},questionData:ey(t.routeStackItem)}},"route/other":function(e,t){return{answerData:{type:"other",coordinates:e.coordinates},questionData:ey(t.routeStackItem)}},"spot/other":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}}};function eh(e){var t,n,r,o,i,a,s,u,c,l,d,p,f,m,v,h=(e||{}).result;return h&&"type"in h&&"business"===h.type?(i=h.categories,a=h.urls,s=h.socialLinks,{id:h.id,name:h.title,status:em[h.status]||"open",address:h.fullAddress,categories:(void 0===i?[]:i).map(function(e){return{id:e.id,name:e.name}}),coordinates:h.displayCoordinates,phones:null==(n=h.phones)?void 0:n.map(function(e){return e.number}),urls:(void 0===a?[]:a).concat((void 0===s?[]:s).map(function(e){return e.href})),hours:h.workingTime&&Object.keys(t=h.workingTime.reduce(function(e,t,n){if(t){var r={dayOfWeek:N.sb[n],breaks:t.reduce(function(e,n,r){var o=t[r+1];return o&&e.push({startTime:x.BB(n.to),endTime:x.BB(o.from)}),e},[])};t[0]&&t[t.length-1]&&(r.startTime=x.BB(t[0].from),r.endTime=x.BB(t[t.length-1].to)),e.push(r)}return e},[]).reduce(function(e,t){var n=t.startTime+"|"+t.endTime+"|"+JSON.stringify(t.breaks);return e[n]||(e[n]=[]),e[n].push(t),e},{})).map(function(e){return t[e]}),features:(c=(h.features||[]).reduce(function(e,t){var n="text"===t.type?function(e){var t=e.value,n=t.match(es);if(n){var r=Number(n[1]),o=Number(n[2]),i=!isNaN(r),a=!isNaN(o);if(i||a)return{id:e.id,name:e.name,type:"range",value:{from:i?r:void 0,to:a?o:void 0}}}var s=t.match(ea);if(s){var u=Number(s[1]);if(!isNaN(u))return{id:e.id,name:e.name,type:"number",value:u}}return e}(t):t;return"text"!==n.type&&e.push(ei(n,"id","name","type","value","unit")),e},[]),(null==(u=h.businessProperties)?void 0:u.closed_for_visitors)!==void 0&&c.push({id:"closed_for_visitors",type:"bool",value:h.businessProperties.closed_for_visitors}),c),entrances:null!=(o=null==(r=h.entrances)?void 0:r.map(function(e){return e.coordinates}))?o:[]}):(d=(l=e||{}).result,p=l.coordinates,f={},(m=d&&"address"in d?d.address:null)&&(f.address=m),(v=(null==d?void 0:d.displayCoordinates)||p)&&(f.coordinates=v),f)}function eg(e,t){return(0,r._)({},e,{status:z[t]||e.status})}function ey(e){var t,n,r,o,a,s,u,c=e.routerResponse;if(c){var l=c.routes[e.activeRouteIndex],d="auto"===l.type;return{travelMode:ec(e),trafficJams:d&&!e.settings.auto.ignoreTrafficJams,wayPoints:c.waypoints.map(function(e){return e.coordinates}).filter(function(e){return!!e}),viaPoints:null==(u=c.viaIndexes)?void 0:u.map(function(e){var t;return null==(t=l.coordinates)?void 0:t[e]}).filter(function(e){return!!e}),encodedPoints:l.encodedCoordinates,uri:l.uri,segments:(n=(t=e.routerResponse).routes[e.activeRouteIndex],r=(0,i._)(n.coordinates||[]),o=t.waypoints.map(function(e){return e.coordinates}),a=[],s=null!==e.activeCargoPresetId,r&&n.paths.forEach(function(t,n){t.segments.forEach(function(t,i){var u=t.edgePoints,c=(t.isAuto?"auto":t.isMasstransit?"masstransit":t.type&&eu[t.type])||ec(e),l="auto"===c&&s?"truck":c;if(u){var d=r.findIndex(function(e){return(0,R.J)(e,u[0])}),p=r.findIndex(function(e){return(0,R.J)(e,u[1])}),f=a[a.length-1];0===i||l!==f.travelMode?a.push({travelMode:l,from:r[d],to:r[p]}):f.to=r[p],r.splice(0,p)}else a.push({travelMode:l,from:o[n],to:o[n+1]})})}),a),vehicleRestrictions:function(e){if("auto"===e.travelMode){var t,n,r=null==(n=e.cargoPresets.find(function(t){return t.id===e.activeCargoPresetId}))?void 0:n.settings;if(r)return{weight:el(r.vehicle_weight),max_weight:el(r.vehicle_max_weight),payload:el(r.vehicle_payload),axle_weight:el(r.vehicle_axle_weight),height:el(r.vehicle_height),length:el(r.vehicle_length),width:el(r.vehicle_width),eco_class:(t=r.vehicle_eco_class)?Number(t)||0:void 0,has_trailer:!!r.vehicle_has_trailer||void 0}}}(e),departure:function(e,t){var n,r=null==(n=e.routerResponse)?void 0:n.routes[e.activeRouteIndex].type;if("auto"===r||"masstransit"===r){var o=e.settings[r].timeDependent;return o.time&&o.type===t?new Date(o.time).toISOString():void 0}}(e,"departure")}}}function e_(e){return"business"===e.type?e.masstransitStop:e}function eb(e,t){return(0,r._)({},function(e,t){var n,o,i,a,s,u,c,l;switch(e){case"mrc":return{type:e,data:null==(o=t.ugcProfileData)?void 0:null==(n=o.mrc)?void 0:n.data};case"assignments":return{type:e,data:(null==(a=t.ugcProfileData)?void 0:null==(i=a.assignments)?void 0:i.united.data)?function(e,t){var n;return"entrancesEditAssignment"===e.type?{selectedAssignment:e,entrancesData:(null==(n=e.result.entrances)?void 0:n.map(function(n){return(0,r._)({},ev["assignment/entrance/edit"]({type:"assignment/entrance/edit",objectUri:e.result.uri,context:ef(t),coordinates:n.coordinates,result:{name:n.name,coordinates:n.coordinates,displayCoordinates:n.coordinates}}),{isLoading:!1,isSubmitted:!1})}))||[]}:"gateEditAssignment"===e.type||"barrierEditAssignment"===e.type?{selectedAssignment:e,isCompleted:!1,objectEditQuestion:void 0}:{selectedAssignment:e}}(t.ugcProfileData.assignments.united.data,t):void 0};case"photos":return{type:e,data:null==(u=t.ugcProfileData)?void 0:null==(s=u.photos)?void 0:s.account.data};case"achievement-feed":return{type:e,data:{achievementFeedItems:null==(c=t.ugcProfileData)?void 0:c.achievementFeedItems,achievementId:null==(l=t.ugcProfileData)?void 0:l.achievementId}};default:return{type:e}}}(e,t),{mode:"ugc-profile",mobileViewState:["achievements","stats","achievement-feed","profile-settings"].includes(e)?"expanded":"mini",customHeader:function(e,t){switch(e){case"achievements":return"Достижения";case"stats":return"Статистика";default:return}}(e,0)})}function ew(e,t){var n,o,i=function(e,t){var n,o,i,a,s,u=t.ugcProfileData,c={mode:"ugc-profile",mobileViewState:"expanded"},l="dubai",d=(null==u?void 0:null==(o=u.impressions)?void 0:null==(n=o.data)?void 0:n.mode)===l||t.query.ugc===l,p=(0,r._)({type:"impressions",customHeader:d?"Впечатления о Дубае":void 0,data:{impressionsGroupsMode:d?l:"grouped"}},c,{mobileViewState:d?"micro":c.mobileViewState});switch(e){case"mrc":return(0,r._)({type:e},c,{data:!t.uatraits.isMobile&&(null==u?void 0:null==(a=u.mrc)?void 0:null==(i=a.data)?void 0:i.selectedRide)?null==u?void 0:null==(s=u.mrc)?void 0:s.data:void 0});case"achievements":case"achievement-feed":case"stats":case"subscriptions":case"subscribers":case"recommendations":case"profile-settings":if(t.ugc.impressionsFirstTab)return p;return(0,r._)({type:"friends-feed"},c);case"impressions":return p;default:return(0,r._)({type:e},c)}}(e,t);if(!function(e,t){var n,r,o,i,a,s,u,c=t.ugcProfileData;switch(e){case"mrc":return!!((null==c?void 0:null==(r=c.mrc)?void 0:null==(n=r.data)?void 0:n.editingRide)||t.uatraits.isMobile&&(null==c?void 0:null==(i=c.mrc)?void 0:null==(o=i.data)?void 0:o.selectedRide));case"photos":return!!(null==c?void 0:null==(s=c.photos)?void 0:null==(a=s.account.data)?void 0:a.selectedPhoto);case"assignments":return!!(null==c?void 0:null==(u=c.assignments)?void 0:u.united.data);case"stats":case"achievements":case"achievement-feed":return!!(null==c?void 0:c.career);case"subscriptions":case"subscribers":case"recommendations":return!!t.experiments.ui.ugcUserCardsWeb;case"profile-settings":return!!t.experiments.ui.ugcProfileWebUpdate;default:return!1}}(e,t))return[i];switch(e){case"achievement-feed":return[i,eb("achievements",t),eb("achievement-feed",t)];case"subscriptions":case"subscribers":case"recommendations":return[i,{mode:"subscriptions",publicId:null==(n=t.authorization)?void 0:n.publicId,name:null==(o=t.authorization)?void 0:o.userName,tab:e,showRecommendations:!0,showUserSearch:!0}];default:return[i,eb(e,t)]}}var eE=function(e,t){if(!A.qv(e.type))return e;var n=ev[e.type](e,t);return(0,r._)({},e,{formData:n})},eS=n(91086);function eC(e){var t;if(null==(t=e.query.posts)?void 0:t.uri)return{uri:e.query.posts.uri}}function ek(e){return k(e.query,e).map(function(t){var n=e.query.feedback?void 0:function(e){if(m(e)){var t,n=1===e.results.resultsCount?null==(t=(0,v.Y)(e.results.items))?void 0:t.uri:void 0;return f.QT(n)}}(t),o=function(e){if(m(e)){var t=(0,v.Y)(e.results.items);return(null==t?void 0:t.type)==="transit-route"?t.transitRouteInfo.routeId:void 0}}(t);if(n||o)return{mode:"masstransit",stops:{loadingId:n,hasError:!1,data:void 0,tab:"overview"},line:{loadingId:o,hasError:!1,data:void 0,tab:"stops"},masstransitMode:o?"line":"stop",selectedVehicleType:void 0,mobileViewState:o?"expanded":"mini"};var i=e.landing.id;return(0,r._)({mode:"search",formText:t.request.displayText||t.request.text,initialPage:Number(e.query.page)||1},t,{mobileViewState:["expanded","mini","micro"].includes(e.query["view-state"])?e.query["view-state"]:"category"===i||"search"===i||"chain"===i?"expanded":"mini"})})}function eR(e){var t=e.query,n=null!=(_=t.uri)?_:"",o=e.landing.id,i=["expanded","mini","micro"].includes(e.query["view-state"])?e.query["view-state"]:"category"===o||"search"===o||"chain"===o?"expanded":void 0,a=e.uatraits.isMobile&&e.uatraits.isRobot?"expanded":void 0,s=y.V(null==(v=e.searchPreloadedResults)?void 0:v.items),l=y.V(null==(g=e.orgpagePreloadedResults)?void 0:g.items);if(t.poi)return[{mode:"search-result",request:{coordinates:null!=(b=(0,u.P)(t.poi.point))?b:void 0,from:"poi",uri:t.poi.uri,origin:"poi"},response:e.poiPreloadedResults,tab:(0,L.ZI)(t.tab),mobileViewState:a||(t.tab?"expanded":"mini"),selectedPost:eC(e)}];var d=p.J6("whatshere",e.landing);if(t.whatshere){var m=(0,u.P)(t.whatshere.point);return m?[{mode:"search-result",response:e.whatsherePreloadedResults,request:{coordinates:m,from:"whatshere",origin:"whatshere",zoom:Number(t.whatshere.zoom)},tab:(0,L.mV)(d,e.whatsherePreloadedResults),mobileViewState:a||("house"===e.landing.id||t.tab?"expanded":"mini")}]:[]}if("biz"===t.ol&&t.oid||(e.uatraits.isMobile||t.text)&&t.orgpage&&t.orgpage.id||e.uatraits.isMobile&&f.k8(n)){var v,g,_,b,w,E,C=(0,L.ZI)(null!=(E=p.J6("orgpage",e.landing))?E:p.Mg("orgpage",t.tab)?t.tab:void 0),k=t.oid||t.orgpage&&t.orgpage.id||f.k8(n)&&f.Uu(n),R=l.find(function(e){return"business"===e.type&&e.id===k}),x=s.find(function(e){return"business"===e.type&&e.id===k}),P=R||x,M=ek(e).filter(function(e){return"search"===e.mode}).length>=1?"search":void 0;return[{request:{from:"search",uri:P?f.fS(P):void 0,id:k,origin:P?t.source||"url":"restore",serpId:P?void 0:null==(w=e.searchPreloadedResults)?void 0:w.requestSerpId,text:t.text,displayText:t["display-text"]},response:P?h(P,e.searchPreloadedResults):t.text?void 0:e.searchPreloadedResults,mapLocationRequest:P?{bounds:P.bounds,center:P.displayCoordinates,skipFirstApply:!0}:void 0,mobileViewState:a||(t.orgpage||t.tab?"expanded":"mini"),mode:"search-result",selectedPost:eC(e),tab:C,sourceMode:M}]}if("geo"===t.ol&&(t.ouri||t.oll||t.oid)){var I,T=t.oid?s.find(function(e){return e.id===t.oid}):void 0,Z=T?T.uri:t.ouri,D=T?T.coordinates:(0,u.P)(t.oll);if(!Z&&!D)return[];var A=D?s.sort(function(e,t){return e.coordinates?t.coordinates&&(0,c.g)(e.coordinates,D)>(0,c.g)(t.coordinates,D)?1:-1:1})[0]:Z?s.find(function(e){return Z===f.fS(e)}):void 0;t.text||(A=void 0);var N=A?h(A,e.searchPreloadedResults):t.text?void 0:e.searchPreloadedResults;return[{request:{from:"search",uri:Z,origin:A?t.source||"url":"restore",serpId:A?void 0:null==(I=e.searchPreloadedResults)?void 0:I.requestSerpId},response:N,mapLocationRequest:A?{bounds:A.bounds,center:A.displayCoordinates,skipFirstApply:!0}:void 0,mobileViewState:a||"mini",mode:"search-result",tab:(0,L.mV)(t.tab,N)}]}if((t.text||f.Jm(n))&&e.searchPreloadedResults){var z="chain"===e.landing.id,F="category"===e.landing.id,U=e.searchPreloadedResults.exactResult,O=1===e.searchPreloadedResults.resultsCount?s[0]:void 0,q=S(t,e)[0].request;if(!z&&!F&&O&&"business"===O.type)return[{request:(0,r._)({from:"search"},q),response:e.searchPreloadedResults,mapLocationRequest:{bounds:O.bounds,center:O.displayCoordinates,skipFirstApply:!0},mobileViewState:a||i||"mini",mode:"search-result",tab:"overview",selectedPost:eC(e)}];if(U&&"toponym"===U.type)return[{request:(0,r._)({from:"search"},q),response:e.searchPreloadedResults,mapLocationRequest:{bounds:U.bounds,center:U.displayCoordinates,skipFirstApply:!0},mobileViewState:a||i||"mini",mode:"search-result",tab:"overview",selectedPost:eC(e)}]}return[]}function ex(e){var t,n,i,a,u,c,l,d,p,m,v,h,g,y,_,b,w,E,S,C,k,L,A,N,z,F=T.J({}),U=e.query,O=U.rtext,q=U.rt,B=U.via,H=U.rtn,j=U.rtt,W=U.z,G=U.ll,Y=U.routes,V=U.uri;if("string"!=typeof O&&"string"!=typeof q&&!f.A(V))return[(0,r._)({mode:"routes"},F)];var K=null==(S=e.routerResponse)?void 0:S.waypoints.map(function(e){return{coords:e.coordinates,value:e.name||""}});null==(k=e.routerResponse)||null==(C=k.viaIndexes)||C.forEach(function(t,n){var r,o,i=null==(o=e.routerResponse)?void 0:null==(r=o.viaPoints)?void 0:r[n];i&&(null==K||K.splice(t,0,{coords:i.coordinates,value:i.name||""}))});var X=Z.V(),J=e.routePoints||K||X,$=F.routerResponse;e.routerResponse&&($=e.routerResponse,(t=$=D.N($)).waypoints=t.waypoints.map(function(e){var t=J.find(function(t){return!!(t.coords&&e.coordinates&&(0,R.J)(t.coords,e.coordinates))});return(0,r._)({},e,{name:t?t.value:""})}),$=t);var Q=B&&B.split("~").map(Number).filter(Boolean)||(null==(L=e.routerResponse)?void 0:L.viaIndexes)||[],ee=J&&J.filter(function(e){return!!e.coords}),et=null==(A=e.routerResponse)?void 0:A.routes[0],en=null==(N=e.routerResponse)?void 0:N.error,er=et&&"taxiInfo"in et&&"error"in et.taxiInfo&&et.taxiInfo.error,eo=J&&(null==ee?void 0:ee.length)===J.length,ei=(h=(null==(n=(v=e.query).routes)?void 0:n.avoidTypes)?v.routes.avoidTypes.split(","):"string"==typeof(null==(i=v.routes)?void 0:i.avoidTypes)?[]:P.cz,_=(null==(u=v.routes)?void 0:null==(a=u.timeDependent)?void 0:a.time)?(g=v.routes.timeDependent.time,y=x.$_(e),new Date(x.Tt(g).getTime()+6e4*x.x2(y).getTimezoneOffset())).getTime():void 0,b=P.rK[v.rtt],w=null!=(m=null==(l=v.routes)?void 0:null==(c=l.avoid)?void 0:c.split(","))?m:[],{pedestrian:{avoid:"pedestrian"===b?(0,M.w)(w,b):[]},scooter:{avoid:"scooter"===b?(0,M.w)(w,b):[]},bicycle:{avoid:"bicycle"===b?(0,M.w)(w,b):[]},auto:{ignoreTrafficJams:"atm"===v.rtm,avoid:"auto"===b?(0,M.w)(w,b):[],timeDependent:{type:"departure",time:"auto"===v.rtt&&_||void 0}},masstransit:{avoidTypes:h,timeDependent:{type:["departure","arrival"].includes(null==(p=v.routes)?void 0:null==(d=p.timeDependent)?void 0:d.type)?v.routes.timeDependent.type:"departure",time:"mt"===v.rtt&&_||void 0}}}),ea=H?parseInt(H,10):0,es=null==(z=Object.entries(P.jk).find(function(e){return(0,o._)(e,2)[1]===j}))?void 0:z[0],eu=(E=I.Z.get("maps_routes_travel_mode",e),Object.keys(P.jk).includes(E)?E:void 0);return[(0,r._)({},F,{mode:"routes",skipApplyBounds:!!(W&&G)&&J.filter(function(e){return e.coords}).length>=2,travelMode:(null==$?void 0:$.type)||es||eu||F.travelMode,activeField:J.findIndex(function(e,t){return(!e.value||!e.coords)&&!Q.includes(t)}),activeRouteIndex:(null==$?void 0:$.routes)&&ea<$.routes.length?ea:0,editingCargoPresetId:void 0,activeCargoPresetId:null,cargoPresets:[],activeComparisonMode:Y&&Y.activeComparisonMode||void 0,viaIndexes:Q,sessionId:e.routerResponse?"r:"+s().v4():void 0,settings:ei,routePoints:J,routerResponse:$,error:eo||en?er||en:void 0,isLoading:eo&&!e.routerResponse,mobileViewState:et?"mini":"expanded"})]}function eP(e){var t,n=e.masstransitStop,r=e.masstransitLine,o=e.query,i=o.masstransit,a=o.ol,s=o.oid,u=o.tab,c=o.reviews,l={loadingId:!i||i.lineId||n?s&&"mtr"===a?s:void 0:i.stopId,hasError:!1,data:n,tab:(0,L.KA)(u)||"overview"},d={loadingId:i&&!r?i.lineId:void 0,hasError:!1,data:r?{seoData:r.seoData,color:r.color,threads:r.features,activeThread:r.activeThread,seoThreadIndex:r.seoThreadIndex,dataSources:r.dataSources,vehicles:[],features:[]}:void 0,tab:(0,L.IP)(u)||"stops"};r?t="line":n?t="stop":d.loadingId?t="line":l.loadingId?t="stop":i&&i.vehicleType&&(t="list");var p=i&&i.vehicleType||void 0;if(!t)return[];var f=e.uatraits.isMobile&&e.uatraits.isRobot;return[{mode:"masstransit",stops:l,line:d,selectedVehicleType:p,masstransitMode:t,mobileViewState:"list"===t||(null==c?void 0:c.publicId)||f?"expanded":"mini"}]}function eM(e){return{type:"area"===e.query.rlt?"area":"ruler",isEnabled:!1,points:("string"==typeof e.query.rl?e.query.rl:"").split("~").reduce(function(e,t){var n=(0,u.P)(t);if(!n)return e;var r=e[e.length-1],o=r?[r.coordinates[0]+n[0],r.coordinates[1]+n[1]]:n;return e.push({coordinates:o,value:r?r.value+(0,l.t)(o,r.coordinates):0,showBalloon:!1}),e},[])}}function eI(e){return e.experiments.ui.ugcProfileWebUpdate?ew(e.ugc.impressionsFirstTab?"impressions":"friends-feed",e):[{mode:"user-profile"}]}function eT(e){return e.authorization?ew("ugc-profile"===e.landing.id?e.landing.type:"impressions",e):eI(e)}function eZ(e){return"user"===e.landing.id&&e.publicProfileData?[{mode:"subscriptions",publicId:e.publicProfileData.publicId,name:e.publicProfileData.name,tab:e.landing.page,showRecommendations:!1,showUserSearch:!1}]:"ugc-profile"===e.landing.id?eT(e):[]}},4046:(e,t,n)=>{"use strict";n.d(t,{F$:()=>r,is:()=>o,dM:()=>i});var r=["overview","menu","prices","inside","posts","gallery","reviews","edadeal","related","chain","events","realty","features","infrastructure"],o=["overview","services","inside","attractions","discovery","where-to-eat","things-to-do"],i="backend_"},29529:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var r=["photos","panoramas","mrc","mobile-app-share","reviews","share","stories-player","stories-editor","booking","storytelling","hotels-booking","business-owner-account"]},63039:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var r=n(40457);function o(e,t){void 0===t&&(t=!0);var n,o,i,a,s=e.stack,u=t?s.filter(function(e){var t=e.mode;return!(0,r.E)(t)}):s,c=u[u.length-1],l=(n=e.traffic,o=e.masstransit,i=e.config,a=e.nightOverlay,n.isLayerEnabled&&n.isPanelOpen?"traffic":o.isLayerShown&&!i.uatraits.isMobile?"masstransit":a.isShown&&i.uatraits.isMobile?"night":"home");return c&&c.mode||l}},38388:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var r=n(29529),o=n(40457),i={search:["orgpage","search-result","bookmarks","traffic","masstransit","user-profile"],"search-result":["user-profile","booking"],discovery:["orgpage","search","traffic","masstransit","user-profile"],bookmarks:["search","routes","traffic","masstransit","user-profile"],routes:["search","search-result","bookmarks","traffic","feedback","user-profile","masstransit"],usermaps:["search","bookmarks","discovery","orgpage","search-result","feedback","masstransit","routes","traffic","user-profile"],photos:["booking"],storytelling:["orgpage","search-result"]};function a(e,t){var n=e.stack,a=i[t];(0,o.E)(t)||(a=a?a.concat(r.Y):r.Y);for(var s=[],u=0,c=n.slice().reverse();u<c.length;u++){var l=c[u];if(!(a&&a.includes(l.mode))){if(l.mode!==t)break;s.unshift(l)}}return s}},43341:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(40457),o=n(6965);function i(e,t){var n=(0,r.E)(t)?e.stack:e.stack.filter(function(e){var t=e.mode;return!(0,r.E)(t)}),i=(0,o.b)(e)&&"search"===t?n.filter(function(e){return"search-result"!==e.mode}):n,a=i[i.length-1];if(a&&a.mode===t)return a}},40457:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(29529);function o(e){return r.Y.includes(e)}},37830:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(6848);function o(e){return(0,r.c)(e)||!!e.query["profile-mode"]}},6848:(e,t,n)=>{"use strict";function r(e){return e.baseUrl.endsWith("/profile")}n.d(t,{c:()=>r})},98109:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(63039),o=n(43341);function i(e){if(e.config.uatraits.isMobile){var t=(0,o.A)(e,(0,r.i)(e));return"expanded"!==((null==t?void 0:t.mobileViewState)||e.defaultMobileViewState)}return e.collapsedSidebar}},6965:(e,t,n)=>{"use strict";n.d(t,{b:()=>c});var r=n(38388),o=n(11912),i=n(91086),a=n(35501),s=n(62042),u=["realty","hotels-booking","edadeal"];function c(e){var t,n,c,l,d,p,f,m,v,h,g,y,_,b,w,E,S,C=(0,r.E)({stack:e.stack},"search-result"),k=C[C.length-1],R=(null==k?void 0:null==(S=k.response)?void 0:null==(E=S.items[0])?void 0:E.type)==="business"?(0,s.Z6)(k.tab):void 0,x=!!R&&u.includes(R);return f=(0,o._)((0,r.E)({stack:e.stack},"search-result")).pop(),v=!(m=(0,o._)((0,r.E)({stack:e.stack},"search")).pop())||"results"in m&&0===m.results.resultsCount,h=m&&"results"in m&&1===m.results.resultsCount&&(null==(t=(0,a.Y)(m.results.items))?void 0:t.id)===(null==(n=(0,a.Y)(null==f?void 0:null==(c=f.response)?void 0:c.items))?void 0:n.id),g=((null==(d=e.map)?void 0:null==(l=d.size)?void 0:l.width)||0)>=896||!!e.config.query["no-second-panel-width"],y=(0,i.kh)((0,a.Y)(null==f?void 0:null==(p=f.response)?void 0:p.items)),_=(null==f?void 0:f.sourceMode)==="search"&&!v,b=(null==f?void 0:f.sourceMode)==="home",w=(null==f?void 0:f.request.from)==="home-feed",!!(!e.config.uatraits.isMobile&&(_||b&&w)&&!h&&g&&!y)&&!x}},93813:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n(6848);function o(e,t){var n,o=(n=(0,r.c)(t)?t.baseUrl:t.isYango?"":"/maps",t.origin.includes("crowdtest")?t.baseUrl.replace(/^((\/maps-.+?)\/)?.*/,n):n);return t.origin+o+e}},47220:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(34788),o=n(6241),i=n(61250);function a(e,t,n,a){void 0===t&&(t={}),void 0===n&&(n={});var s=i.aA("orgpage",t.sublanding),u=o.joinPath(n.baseUrl,"org",e.seoname,e.id,s?void 0:t.sublanding),c=a&&"tab"in a,l=s&&t.sublanding&&!c?(0,r._)({},a,{tab:t.sublanding}):a;return o.addAdditionalParams(u,n,l)}},16647:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(69568),o=n(6241);function i(e,t,n){if(e.id){var i=(0,r.E)(t,n)+"stops/"+e.id+"/";return o.addAdditionalParams(i,n)}}},69568:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(6241);function o(e,t){return void 0===t&&(t={}),r.joinPath(t.baseUrl,e.id,e.seoname)}},96976:(e,t,n)=>{"use strict";n.d(t,{h:()=>u});var r=n(11912),o=n(36897),i=n(6241),a=n(69568),s=["house","vegetation","hydro","street","district"];function u(e,t,n,u){void 0===n&&(n={});var c=(void 0===u?{}:u).sublanding,l=s.includes(e.kind),d="house"===e.kind&&e.hasEmptyAddress;if((!l||t)&&("house"===e.kind||e.id)&&!d&&((0,o.J)(e.coordinates,e.displayCoordinates)||n.skipPointCheck)){var p="house"===e.kind?["house",e.seoname,e.encodedCoordinates,c]:["geo",e.seoname,e.id,c],f=l&&t?(0,a.E)(t,n)+i.joinPath.apply(i,(0,r._)(p)):i.joinPath.apply(i,[n.baseUrl].concat((0,r._)(p)));return i.addAdditionalParams(f,n)}}},81194:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(34788),o=n(18007),i=n(87363),a=n(35645),s=n(44748),u=n(57636),c=n(2866),l={angle:"dropdown-16",triangle:"arrow-down-8"},d=(0,s.Z)("button"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=i.createRef(),n._onMouseEnter=function(e){n.props.title&&!n.state.hideTitle&&n.setState({hideTitle:!0}),n.props.onMouseEnter&&n.props.onMouseEnter(e)},n._onMouseDown=function(e){!n.props.disabled&&(n.setState({pressed:!!n.props.onClick}),n.props.onMouseDown&&n.props.onMouseDown(e))},n._onMouseUp=function(){n.setState({pressed:!1})},n._onMouseOut=function(){n.setState({pressed:!1})},n._onFocus=function(){var e=n.props.forwardedRef,t=void 0===e?n._ref:e;if(n.state.pressed){var r=t.current;r&&r.blur()}},n._renderLink=function(e,t){var o=n.props,a=o.disabled,s=o.url,u=o.role,c=o.rel,l=o.target,d=o.forwardedRef,p=void 0===d?n._ref:d;return i.createElement("a",(0,r._)({href:a?void 0:s,role:void 0===u?"button":u,target:l||"_parent",ref:p,rel:c},e),t)},n._renderButton=function(e,t){var o=n.props,a=o.role,s=o.type,u=o.forwardedRef,c=void 0===u?n._ref:u;return i.createElement("button",(0,r._)({role:void 0===a?"button":a,type:void 0===s?"button":s,ref:c},e),t)},n._renderIcon=function(e){var t=n.props;return i.createElement("span",{key:"icon",className:e("icon"),style:{width:t.iconWidth},"aria-hidden":!0},t.icon)},n._renderTick=function(e){var t=l[n.props.tick];return i.createElement(u.Z,{name:t,key:"tick",className:e("tick"),inline:!0})},n.state={pressed:!1,hideTitle:!1},n}return(0,o._)(t,e),t.prototype.render=function(){var e,t,n,o=this.props,a=[o.icon?this._renderIcon(d):null,o.children?i.createElement("span",{key:"text",className:d("text")},o.children):null,o.tick?this._renderTick(d):null],s=o.ariaHidden?{}:void 0===o.ariaCurrent?{"aria-pressed":null!=(e=o.pressed)?e:o.checked}:{"aria-current":o.ariaCurrent},u=o.disabled?c.yp:null,l=o.ariaHidden?c.xl:(0,r._)({"aria-checked":c.Kn.has(o.role)?!!(null!=(t=o.ariaChecked)?t:o.checked):void 0,"aria-selected":c.lg.has(o.role)?o.ariaSelected:void 0,"aria-haspopup":o.ariaHasPopup,"aria-expanded":o.ariaExpanded,"aria-label":null!=(n=o.ariaLabel)?n:void 0},s),p=(0,r._)({className:d({view:o.view,ui:!["air","air-alt","air-round","search"].includes(o.view),size:o.size,link:!!o.url,disabled:o.disabled,checked:o.checked,static:o.static,"pin-left":o.pinLeft,"pin-right":o.pinRight,"pin-top":o.pinTop,"pin-bottom":o.pinBottom,pressed:this.state.pressed||o.pressed,tick:o.tick,stretched:o.isStretched,"text-align-left":o.isTextAlignLeft,"flipped-tick":o.flippedTick,hovered:o.hovered,focused:o.focused,"no-shadow":o.noShadow,truncated:o.truncated,"dark-theme-only":o.darkThemeOnly}),title:this.state.hideTitle?void 0:o.title,itemProp:o.itemProp,onMouseEnter:this._onMouseEnter,onMouseLeave:o.onMouseLeave,onClick:o.disabled?void 0:o.onClick,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onMouseOut:this._onMouseOut,onFocus:this._onFocus},l,u);return o.url?this._renderLink(p,a):this._renderButton(p,a)},t}(i.Component),f=(0,a.Z)(p)},58155:(e,t,n)=>{"use strict";var r=n(34788),o=n(87363),i=n(89048),a=n(77823),s=[],u=function(e,t){var n=e.target,r=t.node,o=t.callback,i=t.stopPropagation,a=t.getExcludedNodes;if(p(r,n))return!i;var s=a&&a();return s&&(s=Array.isArray(s)?s:[s]).some(function(e){return p(e,n)})||o(e),!i},c=function(e){for(var t=s.length-1;t>=0&&u(e,s[t]);t--);},l=function(e){0===(s=s.filter(function(t){return e!==t})).length&&(window.document.removeEventListener("mousedown",c,!0),window.document.removeEventListener("touchstart",c,!0))},d=function(e,t){0===s.length&&(window.document.addEventListener("mousedown",c,!0),window.document.addEventListener("touchstart",c,{capture:!0,passive:!1}));var n=(0,r._)({node:e},t);return s.push(n),function(){return l(n)}};function p(e,t){return e===t||e.contains(t)}t.Z=function(e){var t=e.callback,n=e.stopPropagation,r=e.getExcludedNodes,s=o.useRef(null),u=o.useRef(void 0);return(0,i.Z)(function(){s.current instanceof Element&&(u.current=d(s.current,{callback:t,stopPropagation:n,getExcludedNodes:r}))}),(0,a.Z)(function(){null==u.current||u.current.call(u)}),o.createElement(o.Fragment,null,o.Children.only(e.children(s)))}},7760:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(34788),o=n(87363),i=n(44748),a=n(69602),s=n(31336),u=n(13752),c=n(980),l=n(44953),d=n(26306),p=n(32089),f=(0,i.Z)("close-button"),m={close:{small:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="16" rx="8" fill="#878787"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.251 10.749a.857.857 0 0 0 1.212 0L8 9.212l1.537 1.537a.857.857 0 1 0 1.212-1.212L9.212 8l1.537-1.537a.857.857 0 1 0-1.212-1.212L8 6.788 6.463 5.25a.857.857 0 0 0-1.212 1.212L6.788 8 5.25 9.537a.857.857 0 0 0 0 1.212z" fill="#fff"/></svg>',medium:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 12c0-6.627-5.373-12-12-12S0 5.373 0 12s5.373 12 12 12 12-5.373 12-12zm-8.293-3.707a1 1 0 0 1 0 1.414L13.414 12l2.293 2.293a1 1 0 0 1-1.414 1.414L12 13.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L10.586 12 8.293 9.707a1 1 0 0 1 1.414-1.414L12 10.586l2.293-2.293a1 1 0 0 1 1.414 0z" fill="currentColor"/></svg>'},cross:{small:p.Z,medium:p.Z}},v=function(e){var t=e.color,n=e.offset,i=void 0===n?"small":n,p=e.size,v=void 0===p?"medium":p,h=e.onClick,g=e.circle,y=e.relative,_=e.usePortal,b=e.tabIndex,w=e.analytics,E=(0,s.ZR)(),S=o.createRef(),C=(0,u.p)({ref:S}),k=g?"close":"cross",R="string"!=typeof i?{top:i.top,right:i.right}:{},x=o.createElement(l.ZP,(0,r._)({name:"close",logClick:!0},w),o.createElement("button",(0,r._)({type:"button","aria-label":"Закрыть",className:f({color:void 0===t?"black":t,circle:g,relative:y,size:"string"==typeof v?v:void 0,offset:"string"==typeof i?i:void 0}),onClick:h,style:(0,c.cq)(E,R),ref:S,tabIndex:b},C),o.createElement(d.Z,{tag:"span",dangerouslySetInnerHTML:{__html:m[k][v]}})));return _?o.createElement(a.Z,{selector:".body"},x):x}},54499:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=new Map,a=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._fetchUrl=function(){var e=t.props.url;e&&function(e){if(i.has(e))return Promise.resolve();var t=new Promise(function(t){var n=window.document.createElement("img");function r(){window.document.body.removeChild(n),n.removeEventListener("load",r),n.removeEventListener("error",r),t()}n.setAttribute("src",e),window.document.body.appendChild(n),n.addEventListener("load",r),n.addEventListener("error",r)});i.set(e,t)}(e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchUrl()},n.componentDidUpdate=function(e){e.url!==this.props.url&&this._fetchUrl()},n.render=function(){return null},t}(o.PureComponent);t.Z=a},67105:(e,t,n)=>{"use strict";n.d(t,{v6:()=>s,KE:()=>c});var r=n(87363);function o(){}var i=(0,n(84641).Z)("flyover",{isLayerInitialized:!1,activeTile3dId:null,flyoverObject:null,hoverState:null,setLayerInitialized:o,setFlyoverObject:o,setHoverState:o}),a=i.connect,s=i.Provider,u=i.Context;function c(){return r.useContext(u)}t.ZP=a},93522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(18188),o=n(87363),i=n(37176),a=n(44748),s=n(11108),u=n(31336),c=(0,a.Z)("hover-hint"),l=function(e){var t=(0,u.ZR)(),n=(0,r._)(o.useState(e.isInitialShown||!1),2),a=n[0],l=n[1],d=(0,i.Z)(e.isDisabled),p=o.useRef(null),f=o.useRef(0),m=e.isAir?"air":"help",v=function(){window.clearTimeout(f.current),f.current=0,l(!1)};return(o.useEffect(function(){!d&&e.isDisabled&&a&&(window.clearTimeout(f.current),f.current=0,l(!1))},[a,d,e.isDisabled]),o.useEffect(function(){var n=p.current,r=function(){f.current||e.isDisabled||(f.current=window.setTimeout(function(){return l(!0)},e.delay||200))},o=function(){v()},i=function(){void 0===e.hideOnClick||e.hideOnClick?v():t.uatraits.isMobile&&r()};return n&&(null==n||n.addEventListener("mouseenter",r),null==n||n.addEventListener("mouseleave",o),null==n||n.addEventListener("click",i)),function(){p&&(null==n||n.removeEventListener("mouseenter",r),null==n||n.removeEventListener("mouseleave",o),null==n||n.removeEventListener("click",i)),window.clearTimeout(f.current),f.current=0}},[t.uatraits.isMobile,d,e.delay,e.hideOnClick,e.isDisabled]),t.uatraits.isMobile&&!e.isNeededOnMobile)?o.createElement(o.Fragment,null,null==e.children?void 0:e.children.call(e)):o.createElement(o.Fragment,null,null==e.children?void 0:e.children.call(e,p),o.createElement(s.Z,{isShown:!!(!e.isDisabled&&(a||e.force)),position:e.position,offset:e.offset,type:m,onScroll:e.onScroll||"reposition",getTarget:function(){return p.current},onClose:function(){v()},className:e.className,showArrow:e.showArrow,arrowOffset:e.arrowOffset},o.createElement("div",{className:c({type:m,size:e.size||"m"})},e.text)))}},57636:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(34788),o=n(18188),i=n(87363),a=n(44748),s=n(31336),u=n(33228),c=["pin-alerts-closed-future-60x68","pin-alerts-cross-road-control-60x68","pin-alerts-drawbridge-future-60x68","pin-alerts-lane-control-60x68","pin-alerts-mobile-control-60x68","pin-alerts-no-stopping-control-60x68","pin-alerts-reconstruction-60x68","pin-alerts-speed-bump-60x68","pin-alerts-speed-camera-60x68","poi-alerts-closed-future-24x27","poi-alerts-closed-future-32","poi-alerts-closed-future-40","poi-alerts-cross-road-control-26x27","poi-alerts-cross-road-control-32","poi-alerts-cross-road-control-40","poi-alerts-drawbridge-future-24x27","poi-alerts-drawbridge-future-32","poi-alerts-drawbridge-future-40","poi-alerts-lane-control-26x27","poi-alerts-lane-control-32","poi-alerts-lane-control-40","poi-alerts-mobile-control-26x27","poi-alerts-mobile-control-32","poi-alerts-mobile-control-40","poi-alerts-no-stopping-control-26x27","poi-alerts-no-stopping-control-32","poi-alerts-no-stopping-control-40","poi-alerts-road-reconstruction-24x27","poi-alerts-road-reconstruction-32","poi-alerts-road-reconstruction-40","poi-alerts-speed-bump-24x27","poi-alerts-speed-bump-32","poi-alerts-speed-bump-40","poi-alerts-speed-camera-26x27","poi-alerts-speed-camera-32","poi-alerts-speed-camera-40","rubrics-medical-48","settings-speed-limit-highways-64x52","settings-speed-limit-single-carriageway-64x52","settings-speed-limit-within-towns-64x52","settings-speedlimit-city-in-88x48","settings-speedlimit-city-out-88x48","settings-speedlimit-highway-88x48","sound-off-24"],l=["camera2d-on-40","camera3d-on-40","carplay-aa-lockscreen-glyph-80","carplay-dash-continue-40","carplay-dash-phone-40","carplay-home-40","carplay-search-my-places-40","carplay-start-route-40","carplay-work-40","checkbox-on-24","child-seat-selected-day-24","child-seat-selected-night-24","collection-rubric-24","collection-rubric-48","collection-rubric-60","cp-dashboard-location-32","cp-dashboard-not-working-32","cp-dashboard-phone-32","cp-dashboard-plus-32","done-36","envelope-36","filters-select-24-flip","gas-48","il-find-places.png","il-low-data.png","il-navigation.png","il-notifications.png","il-parking.png","il-realtime-transport.png","il-road-alerts.png","il-routes.png","il-switcher.png","il-transport-timestable.png","layers-on-24","layers-on-40","loader-progress-a-16","loader-progress-b-16","loader-progress-c-16","loader-progress-d-16","location-center-40","location-navigate-center-40","map-placemark-compass-48x64","map-placemark-dot-32","maps-32","mark-actual-24","mark-actual-superscript-12","navi-service-image.png","navimark-48","overview-route-ferry-24","panorama-on-40-flip","parking-32","parking-on-40","parking-on-48","radio-on-24","search-category-24","tab-navigator-48","tab-taxi-48-flip","tab-transport-48-flip","tab-yndxfuel-48","taxi-service-image.png","thanks-32-flip","transit-marker-region-24","transit-on-40","transport-service-image.png","transport-service-schedule.png","warning-36"],d=n(41057),p=n(63003),f=(0,a.Z)("icon"),m=function(e){var t,n,a,m,v,h,g,y,_,b,w,E=(0,s.ZR)(),S=(n="dark"===(t={name:e.name,theme:e.theme}).theme?"_night":"",m=(a=(0,o._)(t.name.split("."),2))[0],v=a[1],h=E.isYango&&l.includes(m)?"yangomaps-":"",g=E.isRtl&&c.includes(m)?"_rtl":"",y=""+h+m+g+n+"."+(void 0===v?"svg":v),E.staticHost+"static/v53/icons/core/"+y),C=RegExp("^.*?(?:-(\\d+))?(?:x(\\d+))?(?:-no-gradient)?(?:-flip)?$").exec(e.name),k=(0,o._)(e.name.split("."),2),R=k[0],x=k[1],P=(null==C?void 0:C[1])?Number(C[1]):void 0,M=(null==C?void 0:C[2])?Number(C[2]):P,I=null!=(_=e.width)?_:P,T=null!=(b=e.height)?b:M,Z=E.isRtl&&R.endsWith("-flip"),D=e.inline&&"svg"===(void 0===x?"svg":x),L=[f({flip:Z,img:!D}),e.className].filter(Boolean).join(" "),A=null!=(w=e.ariaHidden)?w:!e.ariaLabel;if(D)return i.createElement(u.Z,{url:S,className:L,onClick:e.onClick,ariaLabel:e.ariaLabel,ariaHidden:A,width:I,height:T},"function"==typeof e.inline?e.inline:void 0);var N=e.onClick?d.Z:"span";return i.createElement(N,(0,r._)({tag:"span",className:L,onClick:e.onClick},(0,p.x)(!e.onClick,{ariaLabel:e.ariaLabel,ariaHidden:A})),i.createElement("img",{alt:e.ariaLabel,src:S,width:I||"100%",height:T||"100%"}))}},11108:(e,t,n)=>{"use strict";n.d(t,{Z:()=>e7});var r,o,i=n(22678),a=n(34788),s=n(18007),u=n(87363),c=n.n(u),l=n(44748),d=n(69602),p=n(58155),f=n(77558),m=n(1477),v=n(39014),h=n(41690),g=n(111),y=n(57636),_=n(31336);function b(e,t){if("function"==typeof e)return e(t);"object"==typeof e&&null!==e&&"current"in e&&(e.current=t)}var w=n(20224),E=n(63366),S=n(87462),C="data-focus-lock",k="data-focus-lock-disabled";function R(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var x="undefined"!=typeof window?u.useLayoutEffect:u.useEffect,P=new WeakMap,M={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},I=function(e){var t=e.children;return u.createElement(u.Fragment,null,u.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:M}),t,t&&u.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:M}))};I.propTypes={},I.defaultProps={children:null};var T=n(97582);function Z(e){return e}function D(e,t){void 0===t&&(t=Z);var n=[],r=!1;return{read:function(){if(r)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var o=t(e,r);return n.push(o),function(){n=n.filter(function(e){return e!==o})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var o=n;n=[],o.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(i)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}function L(e,t){return void 0===t&&(t=Z),D(e,t)}var A=L({},function(e){return{target:e.target,currentTarget:e.currentTarget}}),N=L(),z=L(),F=function(e){void 0===e&&(e={});var t=D(null);return t.options=(0,T.pi)({async:!0,ssr:!1},e),t}({async:!0}),U=[],O=u.forwardRef(function(e,t){var n,r,o,i,a,s=u.useState(),c=s[0],l=s[1],d=u.useRef(),p=u.useRef(!1),f=u.useRef(null),m=e.children,v=e.disabled,h=e.noFocusGuards,g=e.persistentFocus,y=e.crossFrame,_=e.autoFocus,b=(e.allowTextSelection,e.group),w=e.className,E=e.whiteList,I=e.hasPositiveIndices,T=e.shards,Z=void 0===T?U:T,D=e.as,L=e.lockProps,z=e.sideCar,O=e.returnFocus,q=e.focusOptions,B=e.onActivation,H=e.onDeactivation,j=u.useState({})[0],W=u.useCallback(function(){f.current=f.current||document&&document.activeElement,d.current&&B&&B(d.current),p.current=!0},[B]),G=u.useCallback(function(){p.current=!1,H&&H(d.current)},[H]);(0,u.useEffect)(function(){v||(f.current=null)},[]);var Y=u.useCallback(function(e){var t=f.current;if(t&&t.focus){var n="function"==typeof O?O(t):O;if(n){var r="object"==typeof n?n:void 0;f.current=null,e?Promise.resolve().then(function(){return t.focus(r)}):t.focus(r)}}},[O]),V=u.useCallback(function(e){p.current&&A.useMedium(e)},[]),K=N.useMedium,X=u.useCallback(function(e){d.current!==e&&(d.current=e,l(e))},[]),J=(0,S.Z)(((a={})[k]=v&&"disabled",a[C]=b,a),void 0===L?{}:L),$=!0!==h,Q=$&&"tail"!==h,ee=(n=[t,X],r=function(e){return n.forEach(function(t){return R(t,e)})},(o=(0,u.useState)(function(){return{value:null,callback:r,facade:{get current(){return o.value},set current(value){var e=o.value;e!==value&&(o.value=value,o.callback(value,e))}}}})[0]).callback=r,i=o.facade,x(function(){var e=P.get(i);if(e){var t=new Set(e),r=new Set(n),o=i.current;t.forEach(function(e){r.has(e)||R(e,null)}),r.forEach(function(e){t.has(e)||R(e,o)})}P.set(i,n)},[n]),i);return u.createElement(u.Fragment,null,$&&[u.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:v?-1:0,style:M}),I?u.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:v?-1:1,style:M}):null],!v&&u.createElement(z,{id:j,sideCar:F,observed:c,disabled:v,persistentFocus:g,crossFrame:y,autoFocus:_,whiteList:E,shards:Z,onActivation:W,onDeactivation:G,returnFocus:Y,focusOptions:q}),u.createElement(void 0===D?"div":D,(0,S.Z)({ref:ee},J,{className:w,onBlur:K,onFocus:V}),m),Q&&u.createElement("div",{"data-focus-guard":!0,tabIndex:v?-1:0,style:M}))});O.propTypes={},O.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var q=n(51721),B=n(71002),H=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!!t&&!!t.getPropertyValue&&("none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))},j=function(e,t){var n,r=e.get(t);if(void 0!==r)return r;var o=(n=j.bind(void 0,e),!t||t===document||t&&t.nodeType===Node.DOCUMENT_NODE||!H(t)&&n(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode));return e.set(t,o),o},W=function(e){return e.dataset},G=function(e){return"INPUT"===e.tagName},Y=function(e){return G(e)&&"radio"===e.type},V=function(e){var t;return!!(e&&(null===(t=W(e))||void 0===t?void 0:t.focusGuard))},K=function(e){return!V(e)},X=function(e){return!!e},J=function(e,t){return Y(e)&&e.name&&t.filter(Y).filter(function(t){return t.name===e.name}).filter(function(e){return e.checked})[0]||e},$=function(e){var t=new Set;return e.forEach(function(n){return t.add(J(n,e))}),e.filter(function(e){return t.has(e)})},Q=function(e){return e[0]&&e.length>1?J(e[0],e):e[0]},ee=function(e,t){return e.length>1?e.indexOf(J(e[t],e)):t},et="NEW_FOCUS",en=function(e,t,n,r){var o=e.length,i=e[0],a=e[o-1],s=V(n);if(!(n&&e.indexOf(n)>=0)){var u=void 0!==n?t.indexOf(n):-1,c=r?t.indexOf(r):u,l=r?e.indexOf(r):-1,d=u-c,p=t.indexOf(i),f=t.indexOf(a),m=$(t),v=(void 0!==n?m.indexOf(n):-1)-(r?m.indexOf(r):u),h=ee(e,0),g=ee(e,o-1);if(-1===u||-1===l)return et;if(!d&&l>=0)return l;if(u<=p&&s&&Math.abs(d)>1)return g;if(u>=f&&s&&Math.abs(d)>1)return h;if(d&&Math.abs(v)>1)return l;if(u<=p)return g;if(u>f)return h;if(d)return Math.abs(d)>1?l:(o+l+d)%o}},er=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},eo=function(e){return Array.isArray(e)?e:[e]},ei=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return -1}return n||r},ea=function(e,t,n){return er(e).map(function(e,t){return{node:e,index:t,tabIndex:n&&-1===e.tabIndex?(e.dataset||{}).focusGuard?0:-1:e.tabIndex}}).filter(function(e){return!t||e.tabIndex>=0}).sort(ei)},es="button:enabled,select:enabled,textarea:enabled,input:enabled,a[href],area[href],summary,iframe,object,embed,audio[controls],video[controls],[tabindex],[contenteditable],[autofocus]",eu="".concat(es,", [data-focus-guard]"),ec=function(e,t){return e.reduce(function(e,n){return e.concat(er(n.querySelectorAll(t?eu:es)),n.parentNode?er(n.parentNode.querySelectorAll(es)).filter(function(e){return e===n}):[])},[])},el=function(e,t){return er(e).filter(function(e){return j(t,e)}).filter(function(e){return!((G(e)||"BUTTON"===e.tagName)&&("hidden"===e.type||e.disabled))&&!e.ariaDisabled})},ed=function(e,t,n){return ea(el(ec(e,n),t),!0,n)},ep=function(e,t){return ea(el(ec(e),t),!1)},ef=function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var o=r+1;o<n;o+=1){var i=e[r].compareDocumentPosition(e[o]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(o),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter(function(e,n){return!t.has(n)})},em=function(e){return e.parentNode?em(e.parentNode):e},ev=function(e){return eo(e).filter(Boolean).reduce(function(e,t){var n=t.getAttribute(C);return e.push.apply(e,n?ef(er(em(t).querySelectorAll("[".concat(C,'="').concat(n,'"]:not([').concat(k,'="disabled"])')))):[t]),e},[])},eh=function(){return document.activeElement?document.activeElement.shadowRoot?document.activeElement.shadowRoot.activeElement:document.activeElement:void 0},eg=function(e,t){return void 0===t&&(t=[]),t.push(e),e.parentNode&&eg(e.parentNode,t),t},ey=function(e,t){for(var n=eg(e),r=eg(t),o=0;o<n.length;o+=1){var i=n[o];if(r.indexOf(i)>=0)return i}return!1},e_=function(e,t,n){var r=eo(e),o=eo(t),i=r[0],a=!1;return o.filter(Boolean).forEach(function(e){a=ey(a||e,e)||a,n.filter(Boolean).forEach(function(e){var t=ey(i,e);t&&(a=!a||t.contains(a)?t:ey(t,a))})}),a},eb=function(e,t){var n=new Map;return t.forEach(function(e){return n.set(e.node,e)}),e.map(function(e){return n.get(e)}).filter(X)},ew=function(e,t){var n=document&&eh(),r=ev(e).filter(K),o=e_(n||e,e,r),i=new Map,a=ep(r,i),s=ed(r,i).filter(function(e){return K(e.node)});if(s[0]||(s=a)[0]){var u=ep([o],i).map(function(e){return e.node}),c=eb(u,s),l=c.map(function(e){return e.node}),d=en(l,u,n,t);if(d===et){var p,f=a.map(function(e){return e.node}).filter((p=r.reduce(function(e,t){return e.concat(el(er(t.querySelectorAll("[".concat("data-autofocus-inside","]"))).map(function(e){return ec([e])}).reduce(function(e,t){return e.concat(t)},[]),i))},[]),function(e){var t;return e.autofocus||!!(null===(t=W(e))||void 0===t?void 0:t.autofocus)||p.indexOf(e)>=0}));return{node:f&&f.length?Q(f):Q(l)}}return void 0===d?d:c[d]}},eE=function(e,t){"focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},eS=0,eC=!1,ek=function(e,t,n){void 0===n&&(n={});var r=ew(e,t);if(!eC&&r){if(eS>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),eC=!0,setTimeout(function(){eC=!1},1);return}eS++,eE(r.node,n.focusOptions),eS--}},eR=function(){var e=document&&eh();return!!e&&er(document.querySelectorAll("[".concat("data-no-focus-lock","]"))).some(function(t){return t.contains(e)})},ex=function(e){var t=document&&eh();return!!t&&(!t.dataset||!t.dataset.focusGuard)&&ev(e).reduce(function(e,n){return e||n.contains(t)||!!er(n.querySelectorAll("iframe")).some(function(e){return e===document.activeElement})},!1)},eP=function(e){var t=ev(e).filter(K),n=e_(e,e,t),r=new Map,o=ed([n],r,!0),i=ed(t,r).filter(function(e){return K(e.node)}).map(function(e){return e.node});return o.map(function(e){var t=e.node;return{node:t,index:e.index,lockItem:i.indexOf(t)>=0,guard:V(t)}})};function eM(e){var t=window.setImmediate;void 0!==t?t(e):setTimeout(e,1)}var eI=null,eT=null,eZ=null,eD=!1,eL=function(e,t){eZ={observerNode:e,portaledElement:t}};function eA(e,t,n,r){var o=null,i=e;do{var a=r[i];if(a.guard)a.node.dataset.focusAutoGuard&&(o=a);else if(a.lockItem){if(i!==e)return;o=null}else break}while((i+=n)!==t)o&&(o.node.tabIndex=0)}var eN=function(e){return e&&"current"in e?e.current:e},ez=function(){var e=!1;if(eI){var t=eI,n=t.observed,r=t.persistentFocus,o=t.autoFocus,i=t.shards,a=t.crossFrame,s=t.focusOptions,u=n||eZ&&eZ.portaledElement,c=document&&document.activeElement;if(u){var l=[u].concat(i.map(eN).filter(Boolean));if((!c||(eI.whiteList||function(){return!0})(c))&&(r||(a?!!eD:"meanwhile"===eD)||!(document&&document.activeElement===document.body||eR())||!eT&&o)&&(u&&!(ex(l)||c&&l.some(function(e){return function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))}(c,e,e)})||eZ&&eZ.portaledElement===c)&&(document&&!eT&&c&&!o?(c.blur&&c.blur(),document.body.focus()):(e=ek(l,eT,{focusOptions:s}),eZ={})),eD=!1,eT=document&&document.activeElement),document){var d=document&&document.activeElement,p=eP(l),f=p.map(function(e){return e.node}).indexOf(d);f>-1&&(p.filter(function(e){var t=e.guard,n=e.node;return t&&n.dataset.focusAutoGuard}).forEach(function(e){return e.node.removeAttribute("tabIndex")}),eA(f,p.length,1,p),eA(f,-1,-1,p))}}}return e},eF=function(e){ez()&&e&&(e.stopPropagation(),e.preventDefault())},eU=function(){return eM(ez)},eO=function(){eD="just",setTimeout(function(){eD="meanwhile"},0)},eq=function(){document.addEventListener("focusin",eF),document.addEventListener("focusout",eU),window.addEventListener("blur",eO)},eB=function(){document.removeEventListener("focusin",eF),document.removeEventListener("focusout",eU),window.removeEventListener("blur",eO)};A.assignSyncMedium(function(e){var t=e.target,n=e.currentTarget;n.contains(t)||eL(n,t)}),N.assignMedium(eU),z.assignMedium(function(e){return e({moveFocusInside:ek,focusInside:ex})});var eH=(r=function(e){return e.filter(function(e){return!e.disabled})},o=function(e){var t=e.slice(-1)[0];t&&!eI&&eq();var n=eI,r=n&&t&&t.id===n.id;eI=t,!n||r||(n.onDeactivation(),e.filter(function(e){return e.id===n.id}).length||n.returnFocus(!t)),t?(eT=null,r&&n.observed===t.observed||t.onActivation(),ez(!0),eM(ez)):(eB(),eT=null)},function(e){var t,n,i,a,s=[];function l(){o(a=r(s.map(function(e){return e.props})))}var d=function(t){function n(){return t.apply(this,arguments)||this}(0,q.Z)(n,t),n.peek=function(){return a};var r=n.prototype;return r.componentDidMount=function(){s.push(this),l()},r.componentDidUpdate=function(){l()},r.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),l()},r.render=function(){return c().createElement(e,this.props)},n}(u.PureComponent);return t="displayName",n="SideEffect("+(e.displayName||e.name||"Component")+")",i=function(e,t){if("object"!=(0,B.Z)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(0,B.Z)(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==(0,B.Z)(i)?i:i+"")in d?Object.defineProperty(d,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):d[t]=n,d})(function(){return null}),ej=u.forwardRef(function(e,t){return u.createElement(O,(0,S.Z)({sideCar:eH,ref:t},e))}),eW=O.propTypes||{};eW.sideCar,(0,E.Z)(eW,["sideCar"]),ej.propTypes={};var eG=n(35645),eY=n(32858),eV=(0,eG.Z)(function(e){return(0,_.ZR)().uatraits.isMobile?u.createElement(u.Fragment,null,e.children):u.createElement(ej,(0,a._)({},e,{ref:e.forwardedRef,onDeactivation:function(t){eY.N(window,"focuslock-deactivation"),null==e.onDeactivation||e.onDeactivation.call(e,t)}}))}),eK=n(14246),eX=function(e){var t,n=u.useId(),r=e.enableFocusLock?eV:u.Fragment,o=e.enableFocusLock?{returnFocus:null==(t=e.returnFocus)||t}:{},i=e.tag,s=e.children,c=e.dialogDescription,l=(0,w._)(e,["tag","children","dialogDescription"]),d=u.createElement(u.Fragment,null,u.createElement(eK.Z,{tag:"div"},u.createElement("span",{id:n},c||"Открылось всплывающее окно")),s),p=u.createElement(i,(0,a._)({role:"dialog","aria-modal":"true",tabIndex:e.enableFocusLock?0:void 0,"aria-labelledby":n,ref:e.currentRef,onClick:function(t){t.stopPropagation(),null==e.onClick||e.onClick.call(e,t)},onKeyDown:function(t){"Escape"!==t.key&&t.stopPropagation(),null==e.onKeyDown||e.onKeyDown.call(e,t)}},l),d);return u.createElement(r,o,p)},eJ=n(2866),e$='[tabindex="0"]:not([data-focus-guard]), button, a, [role="button"]',eQ=function(e){var t=u.useRef(null),n=u.useRef(null),r=u.useRef(0),o=function(){r.current=0},i=function(){if(t.current&&document.activeElement){var e=Array.from(t.current.querySelectorAll(":scope "+e$)).indexOf(document.activeElement);return -1===e?null:e+1}return null},a=u.useCallback(function(e,o){var s,u=null==(s=t.current)?void 0:s.querySelector(":scope :nth-child("+e+" of "+e$+")"),c=i(),l=c?o?c+1:c-1:null;u&&(!l||l===e)?(r.current=e,u.focus(),n.current=u):u&&l?a(l,o):!u&&n.current&&(document.activeElement.blur(),a(1,o))},[]),s=u.useCallback(function(e){if("ArrowDown"===e.key||"ArrowUp"===e.key){e.stopPropagation(),e.preventDefault();var t=r.current;a("ArrowDown"===e.key?t+1:t>1?t-1:1,"ArrowDown"===e.key)}},[a]);return u.useLayoutEffect(function(){var e=t.current;return e&&(e.setAttribute("tabindex","0"),e.addEventListener("focus",o),e.addEventListener("keydown",s)),function(){e&&(e.removeEventListener("focus",o),e.removeEventListener("keydown",s)),r.current=0,n.current=null}},[s]),e.children(t)},e0=(0,l.Z)("popup"),e1={bottom:{vertical:!0,bottom:!0,center:!0},"bottom-right":{vertical:!0,bottom:!0,right:!0},"bottom-left":{vertical:!0,bottom:!0,left:!0},"right-bottom":{horizontal:!0,right:!0,bottom:!0},right:{horizontal:!0,right:!0,middle:!0},"right-top":{horizontal:!0,right:!0,top:!0},top:{vertical:!0,top:!0,center:!0},"top-right":{vertical:!0,top:!0,right:!0},"top-left":{vertical:!0,top:!0,left:!0},left:{horizontal:!0,left:!0,middle:!0},"left-bottom":{horizontal:!0,left:!0,bottom:!0},"left-top":{horizontal:!0,left:!0,top:!0}},e2=[],e4=function(e){function t(t){var n;return(n=e.call(this,t)||this)._popup=u.createRef(),n._getArrowDimensions=function(){if("tooltip"===n.props.type)return{diagonal:24,height:12};var e=Math.round((n._arrow?10:0)*Math.sqrt(2));return{diagonal:e,height:e/2}},n._getPopupSize=function(){var e=n._popup.current.getBoundingClientRect(),t=n.props.getTarget();return{width:Math.round(n.props.isDropdown&&t?t.getBoundingClientRect().width:e.width),height:Math.round(e.height)}},n._getTargetSize=function(){var e=n.props.getTarget();if(e instanceof HTMLElement)return{width:e.offsetWidth,height:e.offsetHeight};if(e&&"getBBox"in e){var t=e.getBBox();return{width:t.width,height:t.height}}return{width:0,height:0}},n._getTargetRect=function(){var e=n.props.getTarget();if(!e)return{top:0,right:0,bottom:0,left:0};var t=n._getTargetSize(),r=e.getBoundingClientRect(),o={top:r.top+e3(),left:r.left+e8()};return{top:o.top,right:o.left+t.width,bottom:o.top+t.height,left:o.left}},n._isTargetVisible=function(e,t){var r=t.top,o=t.right,i=t.bottom,a=t.left;if(!n.props.checkTargetVisibility)return!0;var s=window.document.elementFromPoint(a+(o-a)/2,r+(i-r)/2);return e.contains(s)},n._getPositions=function(){var e=Array.isArray(n.props.position)?n.props.position:[n.props.position||"bottom"];return n.props.config.isRtl?e.map(function(e){return e.includes("left")?e.replace("left","right"):e.includes("right")?e.replace("right","left"):e}):e},n._reposition=function(){var e=n.props,t=e.config.isRtl,r=e.getTarget();if(e.isShown&&n._popup.current&&r){var o=n._getTargetRect();if(!n._isTargetVisible(r,o)){n.setState({isTargetVisible:!1});return}var i={main:(e.offset?e.offset.main:0)+3,side:e.offset?e.offset.side:0},a=(h=window.document.documentElement,g=e8(),y=e3(),_=h.clientWidth,b=h.clientHeight,y>(w=Math.max(h.scrollHeight,b)-b)&&(y=w),{top:y,right:g+_,bottom:y+b,left:g}),s=n._getPopupSize(),u=n._getArrowDimensions(),c=!n._popupSize||n._popupSize.width!==s.width||n._popupSize.height!==s.height;n.props.onSizeChange&&c&&n.props.onSizeChange(s),n._popupSize=s;var l=-u.height,d=u.height/2,p=s.width*s.height,f=null,m=[];m=m.concat(n._getPositions()),e.restrictPosition||(m=m.concat(Object.keys(e1)));for(var v=0;v<m.length;v++){var h,g,y,_,b,w,E=m[v],S=e1[E],C={top:0,right:0,bottom:0,left:0},k={top:"auto",right:"auto",bottom:"auto",left:"auto"},R=void 0,x=e.arrowOffset||0,P=(e.positionOffsets||{})[E]||{main:0,side:0};if(S.horizontal){S.left?(C.left=o.left-s.width-u.height-i.main+P.main,k.right=l,R=t?"right":"left"):S.right&&(C.left=o.right+u.height+i.main+P.main,k.left=l,R=t?"left":"right"),S.middle?C.top=(o.top+o.bottom-s.height)/2+i.side+P.side:S.top?C.top=Math.max(o.bottom,(o.top+o.bottom+u.height)/2)+d-s.height-i.side+P.side:S.bottom&&(C.top=Math.min(o.top,(o.top+o.bottom-u.height)/2)-d+i.side+P.side);var M=(o.top+o.bottom-u.diagonal)/2-C.top+i.side+P.side+x;k.top=Math.min(Math.max(0,M),s.height-u.diagonal)}else if(S.vertical){S.top?(C.top=o.top-s.height-u.height-i.main+P.main,k.bottom=l,R="top"):S.bottom&&(C.top=o.bottom+u.height+i.main+P.main,k.top=l,R="bottom"),S.center?C.left=(o.left+o.right-s.width)/2+i.side+P.side:S.left?C.left=Math.max(o.right-s.width,(o.left+o.right+u.height)/2)+d-s.width-i.side+P.side:S.right&&(C.left=Math.min(o.left,(o.left+o.right-u.height)/2)-d+i.side+P.side);var I=(o.left+o.right-u.diagonal)/2-C.left+i.side+x+P.side;k.left=Math.min(Math.max(0,I),s.width-u.diagonal)}C.bottom=C.top+s.height,C.right=C.left+s.width;var T=Math.round(Math.max(0,Math.min(C.right,a.right)-Math.max(C.left,a.left))*Math.max(0,Math.min(C.bottom,a.bottom)-Math.max(C.top,a.top)));if(e.isMinLeftZero&&C.left<0&&S.vertical&&("number"==typeof k.left&&(k.left+=C.left),C.left=0),(!f||T>f.square)&&(f={popupPos:{left:C.left,top:C.top},arrowPos:k,square:T,mainPos:R}),T===p)break}var Z=f.popupPos,D={left:Math.floor(Z.left),top:Math.floor(Z.top)};n.props.isDropdown&&(D.width=n._getTargetSize().width);var L=Z.top>0?a.bottom-Z.top:void 0;n.setState({style:D,arrowStyle:f.arrowPos,position:f.mainPos,maxContentHeight:e.skipMaxHeight?void 0:L,isShown:!0,isTargetVisible:!0})}},n._onClickOutside=function(e){n.props.isShown&&n.props.onClose&&!n.props.disableClickOutside&&n.props.onClose({event:e,reason:"click-outside"})},n._onWindowChange=function(e){e.target===e.currentTarget&&n._applyScrollEvent(e)},n._onScroll=function(e,t){t&&n._applyScrollEvent(t)},n._applyScrollEvent=function(e){n.props.isShown&&(n.props.onScroll&&"reposition"!==n.props.onScroll?null==n.props.onClose||n.props.onClose.call(n.props,{event:e,reason:"scroll"}):n._repositionThrottled())},n._onEsc=function(e){n.props.isShown&&(null==n.props.onClose||n.props.onClose.call(n.props,{event:e,reason:"esc"}))},n._onShow=function(){e2.includes((0,i._)(n))||n.props.ninjaMode||e2.push((0,i._)(n));var e=n._getPopupSize();n.state.isShown&&n._popupSize.width===e.width&&n._popupSize.height===e.height||n._reposition()},n._onHide=function(){e2=e2.filter(function(e){return e!==(0,i._)(n)}),n.setState({style:{top:0,left:0},isShown:!1})},n._onHideEnd=function(){n._onHide(),n.props.onHideEnd&&n.props.onHideEnd()},n._getExcludedNodes=function(){var e=n.props,t=e.getExcludedNodes,r=e.hideOnTargetClick,o=e.getTarget,i=[],a=t&&t();a&&(i=i.concat(a));var s=r?null:o();return s&&(i=i.concat(s)),i},n._renderPopup=function(e){var t=n.props,r=n.state,o=r.isTargetVisible&&r.isShown?"visible":"hidden",i=t.noPointerEvents?"none":"auto",s=(0,a._)({zIndex:t.zIndex,visibility:o,pointerEvents:i},r.style),c=t.type||"normal",l=e0({type:c,position:r.position,dropdown:t.isDropdown,"full-height":t.fullHeight,view:t.view})+(t.className?" "+t.className:""),d=r.maxContentHeight?{maxHeight:r.maxContentHeight}:{},p=n.props.onClose?n._onEsc:n.props.onMouseLeave||n._onHideEnd;return u.createElement(eQ,null,function(o){return u.createElement(eX,{tag:"div",enableFocusLock:t.enableFocusLock,className:l,style:s,currentRef:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Map;return function(e){if(t.forEach(function(t){var n=b(t,e);n&&r.set(t,n)}),r.size>0)return function(){t.forEach(function(e){var t=r.get(e);t?t():b(e,null)}),r.clear()}}}(n._popup,e,o),onKeyDown:(0,eJ.d7)(p,{key:"Escape",stopPropogation:!0}),onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},void 0===t.showArrow||t.showArrow?u.createElement("div",{className:e0("arrow",{"arrow-type":t.arrowType}),style:r.arrowStyle,ref:function(e){n._arrow=e||void 0}},"tooltip"!==c||t.arrowType?null:u.createElement(y.Z,{name:"tips-arrow-vertical-8x24",className:e0("arrow-icon"),inline:!0})):null,u.createElement("div",{className:e0("content",{"full-height":t.fullHeight}),style:d},t.children),t.repositionOnContentResize?u.createElement(m.Z,{onResize:n._repositionThrottled}):null)})},n._repositionThrottled=(0,g.Z)(n._reposition,50),n.state={style:{top:0,left:0},arrowStyle:{top:"auto",right:"auto",bottom:"auto",left:"auto"},position:"bottom",isShown:!1,isTargetVisible:!t.checkTargetVisibility},n}(0,s._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._observer="IntersectionObserver"in window?new IntersectionObserver(function(){e._repositionThrottled()}):void 0,this.props.checkTargetVisibility&&this._repositionThrottled();var t=this.props.getTarget();t&&this._observer&&this._observer.observe(t)},n.componentDidUpdate=function(e){this.props!==e&&this.props.isShown&&this._repositionThrottled()},n.componentWillUnmount=function(){var e=this;e2=e2.filter(function(t){return t!==e}),this._repositionThrottled.cancel(),this._observer&&this._observer.disconnect()},n.render=function(){var e=this;return u.createElement(d.Z,{selector:this.props.selector},u.createElement(h.Z,{animationRef:this._popup,onShow:this._onShow,onHideEnd:this._onHideEnd},this.props.isShown?u.createElement(p.Z,{callback:this._onClickOutside,getExcludedNodes:this._getExcludedNodes},function(t){return e._renderPopup(t)}):null),u.createElement(f.Z,{type:"resize",listener:this._onWindowChange,options:!0}),u.createElement(v.Z,{eventHandler:this._onScroll,throttleWait:0}),u.createElement(f.Z,{type:"orientationchange",listener:this._onWindowChange,options:!0}),u.createElement(f.Z,{type:"layout-change",listener:this._onWindowChange}))},t}(u.Component);function e3(){return window.document.documentElement.scrollTop||window.document.body.scrollTop}function e8(){return window.document.documentElement.scrollLeft||window.document.body.scrollLeft}var e7=(0,_.ZP)(e4)},69602:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(61533),a=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getContainer=function(){var e=n.props;return e.containerRef?e.containerRef.current||void 0:e.selector?window.document.querySelector(e.selector)||void 0:window.document.body},n._updateContainer=function(){var e=n._getContainer();e!==n.state.container&&n.setState({container:e})},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateContainer()},n.componentDidUpdate=function(e){var t,n;((null==(t=e.containerRef)?void 0:t.current)!==(null==(n=this.props.containerRef)?void 0:n.current)||e.selector!==this.props.selector||e.children!==this.props.children)&&this._updateContainer()},n.render=function(){var e=this.state;return e.container?i.createPortal(this.props.children,e.container):null},t}(o.Component);t.Z=a},1477:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(34788),o=n(18007),i=n(87363),a=n(44748),s=n(2866),u=(0,a.Z)("resize-listener"),c=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._measurer=null,t._onResize=function(e){t.props.onResize(e)},t._onIframeLoad=function(){t._measurer.contentWindow.addEventListener("resize",t._onResize)},t._iframeRef=function(e){t._measurer=e},t}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this._measurer;e.contentWindow?this._onIframeLoad():e.addEventListener("load",this._onIframeLoad)},n.componentWillUnmount=function(){var e=this._measurer;e&&(e.removeEventListener("load",this._onIframeLoad),e.contentWindow&&e.contentWindow.removeEventListener("resize",this._onResize))},n.render=function(){return i.createElement("iframe",(0,r._)({className:u()},s.xl,{ref:this._iframeRef}))},t}(i.Component)},43285:(e,t,n)=>{"use strict";function r(){return r}n.d(t,{ID:()=>a}),n(87363);var o=(0,n(84641).Z)("scroll",{addListener:r,getScrollableNode:function(){return null},getCacheScrollPosition:function(){return null},scrollId:"",registerStickyElement:r,unregisterStickyElement:r,updateStickyElement:r,getStickyElementsOffset:function(){return 0}}),i=o.connect,a=o.Provider;o.Context,t.ZP=i},39014:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(111),a=n(43285),s=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._attachListener=function(){var e;t._listener=(0,i.Z)(t.props.eventHandler,null!=(e=t.props.throttleWait)?e:512),t._unsubscribe=t.props.addListener(t._listener)},t._unattachListener=function(){var e;t._unsubscribe(),null==(e=t._listener)||e.cancel()},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._attachListener()},n.componentDidUpdate=function(e){e.eventHandler!==this.props.eventHandler&&(this._unattachListener(),this._attachListener())},n.componentWillUnmount=function(){this._unattachListener()},n.render=function(){return null},t}(o.PureComponent);t.Z=(0,a.ZP)(s)},85672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(34788),o=n(18007),i=n(87363),a=n(77473),s=n.n(a),u=n(55877),c=n.n(u),l=n(44748),d=n(30473),p=n(1477),f=n(77558),m=n(111),v=n(39014),h=n(43285),g=function(e){var t=this;this._listeners=[],this.addListener=function(e){return t._listeners.push(e),e(t._ref.current,null),function(){return t._removeListener(e)}},this._removeListener=function(e){t._listeners=t._listeners.filter(function(t){return t!==e})},this.fire=function(e){t._listeners.forEach(function(n){return n(t._ref.current,e)})},this._ref=e},y=n(31336),_=(0,l.Z)("scroll"),b={},w={passive:!0},E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=c().v4(),n._container=i.createRef(),n._content=null,n._wrap=i.createRef(),n._scrollbar=null,n._scrollbarThumb=null,n._ratio=1,n._startPageY=0,n._startScrollTop=0,n._onSelectStart=null,n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._emitter.fire(e)},n._onResize=function(){n._wrap.current&&n._content&&(n._height=n._wrap.current.clientHeight,n._ratio=n._height/n._content.clientHeight,"dynamic"===n.props.width&&n._fixContentWidth(),n._scrollbarThumb&&(n._updateScrollbarThumbPosition(n._getContainer().current.scrollTop),n._scrollbarThumb.style.height=100*n._ratio+"%"),n._showHideScrollbar(n._ratio<1))},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;n._scrollbarThumb&&n._updateScrollbarThumbPosition(e.scrollTop),t.cacheKey&&(b[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._onWheel=function(e){n._getContainer().current.scrollTop=n._getContainer().current.scrollTop+e.deltaY},n._onScrollbarClick=function(e){var t=n._getContainer().current,r=n._scrollbarThumb;e.pageY<r.getBoundingClientRect().top?t.scrollTop-=n._height:t.scrollTop+=n._height},n._onMouseDown=function(e){var t=n._wrap.current,r=n._getContainer().current;t&&r&&(window.addEventListener("mouseup",n._onMouseUp,w),window.addEventListener("mousemove",n._onMouseMoveThrottled,w),t.classList.add("_pressed"),n._startPageY=e.pageY,n._startScrollTop=r.scrollTop,n._onSelectStart=r.onselectstart,r.onselectstart=function(e){e.preventDefault()})},n._onMouseUp=function(){var e=n._wrap.current,t=n._getContainer().current;e&&t&&(n._removeMouseListeners(),e.classList.remove("_pressed"),t.onselectstart=n._onSelectStart)},n._onMouseMove=function(e){var t=n._getContainer().current;n._scrollbar&&(t.scrollTop=n._startScrollTop+(e.pageY-n._startPageY)/n._ratio)},n._removeMouseListeners=function(){window.removeEventListener("mouseup",n._onMouseUp,w),window.removeEventListener("mousemove",n._onMouseMoveThrottled,w)},n._updateScrollbarThumbPosition=function(e){n._scrollbarThumb.style.setProperty((0,d.r1)().styles.transform,"translate3d(0, "+Math.ceil(e*n._ratio)+"px, 0)")},n._fixContentWidth=function(){var e=n._getContainer().current,t=n._content,r=e.offsetWidth-e.clientWidth;t.style.marginRight=-r+"px"},n._showHideScrollbar=function(e){var t=n._scrollbar;t&&(t.style.display=e?"flex":"none")},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&b[e.cacheKey]||0;t.scrollTop!==r&&(0===r?t.scrollTop=r:s()(function(){return t.scrollTop=r}))},n._onResizeThrottled=(0,m.Z)(n._onResize,64),n._onMouseMoveThrottled=(0,m.Z)(n._onMouseMove,64),n._emitter=new g(n._getContainer()),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._onResize(),setTimeout(this._onResize,0),this._restoreScrollPosition(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._getContainer().current.addEventListener("scroll",this._onScroll,w),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey||t.keepOnUpdate)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._removeMouseListeners(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(null),this._getContainer().current.removeEventListener("scroll",this._onScroll,w),this._emitter.fire(null),this._onResizeThrottled.cancel(),this._onMouseMoveThrottled.cancel()},n.render=function(){var e=this,t=this.props;return i.createElement("div",{className:_({width:t.width||"narrow",disabled:t.disabled,"full-height":t.fullHeight}),ref:this._wrap},i.createElement("div",{className:_("container",{firefox:"Firefox"===t.config.uatraits.BrowserName,"scroll-snap":t.scrollSnap}),ref:this._getContainer()},i.createElement("div",{className:_("content"),ref:function(t){e._content=t}},i.createElement(h.ID,{value:{addListener:this._emitter.addListener,getScrollableNode:function(){return e._getContainer().current},getCacheScrollPosition:function(){var t;return e.props.cacheKey&&null!=(t=b[e.props.cacheKey])?t:null},scrollId:this._id,registerStickyElement:this.props.registerStickyElement,unregisterStickyElement:this.props.unregisterStickyElement,updateStickyElement:this.props.updateStickyElement,getStickyElementsOffset:this.props.getStickyElementsOffset}},t.children,i.createElement(v.Z,{eventHandler:this._onScrollSelf,throttleWait:64})),i.createElement(p.Z,{onResize:this._onResizeThrottled})),i.createElement(p.Z,{onResize:this._onResizeThrottled}),i.createElement("div",{className:_("scrollbar",{noprint:!0}),ref:function(t){e._scrollbar=t},onWheel:this._onWheel},i.createElement("div",{"aria-hidden":!0,className:_("scrollbar-track"),onClick:this._onScrollbarClick}),i.createElement("div",{"aria-hidden":!0,className:_("scrollbar-thumb"),ref:function(t){e._scrollbarThumb=t},onMouseDown:this._onMouseDown}))),i.createElement(f.Z,{type:"resize",listener:this._onResizeThrottled,options:w}))},t}(i.Component),S=(0,y.ZP)(E),C=(0,l.Z)("scroll"),k={},R={passive:!0},x=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=c().v4(),n._container=i.createRef(),n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._getContainer().current&&n._emitter.fire(e)},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&k[e.cacheKey]||0;t.scrollTop!==r&&window.requestAnimationFrame(function(){return t.scrollTop=r})},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;t.cacheKey&&(k[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._emitter=new g(n._getContainer()),n._provider={addListener:n._emitter.addListener,getScrollableNode:function(){return n._getContainer().current},getCacheScrollPosition:function(){var e;return n.props.cacheKey&&null!=(e=k[n.props.cacheKey])?e:null},registerStickyElement:n.props.registerStickyElement,unregisterStickyElement:n.props.unregisterStickyElement,updateStickyElement:n.props.updateStickyElement,getStickyElementsOffset:n.props.getStickyElementsOffset,scrollId:n._id,reachedBottom:function(){var e=n._getContainer().current;return!!e&&e.clientHeight+e.scrollTop>=e.scrollHeight-10}},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._restoreScrollPosition(),this._getContainer().current.addEventListener("scroll",this._onScroll,R),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey||t.keepOnUpdate)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._getContainer().current.removeEventListener("scroll",this._onScroll,R),this._emitter.fire(null)},n.render=function(){var e=this.props;return i.createElement("div",{className:C({width:e.width||"narrow",disabled:e.disabled,native:e.native,"full-height":e.fullHeight})},i.createElement("div",{className:C("container"),ref:this._getContainer()},i.createElement("div",{className:C("content")},i.createElement(h.ID,{value:this._provider},e.children,i.createElement(v.Z,{eventHandler:this._onScrollSelf,throttleWait:64})))))},t}(i.Component),P=n(44953),M=n(89048),I=n(37176),T={passive:!0},Z={},D=function(e){var t=i.useId(),n=i.useRef(e.node),r=i.useRef(new g(n));i.useEffect(function(){n.current=e.node},[e.node]);var o=(0,I.Z)(e.cacheKey),a={addListener:r.current.addListener,getScrollableNode:function(){return e.node},getCacheScrollPosition:function(){var t;return e.cacheKey&&null!=(t=Z[e.cacheKey])?t:null},registerStickyElement:e.registerStickyElement,unregisterStickyElement:e.unregisterStickyElement,updateStickyElement:e.updateStickyElement,getStickyElementsOffset:e.getStickyElementsOffset,scrollId:t},s=i.useCallback(function(){return e.node===window.document.documentElement?window.document:e.node},[e.node]),u=i.useCallback(function(t){e.node&&r.current.fire(t)},[e.node]),c=i.useCallback(function(){var t=e.cacheKey&&Z[e.cacheKey]||0;e.node&&e.node.scrollTop!==t&&window.requestAnimationFrame(function(){e.node&&(e.node.scrollTop=t)})},[e.cacheKey,e.node]);return i.useEffect(function(){var e=s(),t=r.current;return null==e||e.addEventListener("scroll",u,T),t.fire(null),function(){null==e||e.removeEventListener("scroll",u,T),t.fire(null)}},[s,u]),i.useEffect(function(){o===e.cacheKey&&(o||e.cacheKey||e.keepOnUpdate)||(o&&e.cacheKey&&Z[o]&&!Z[e.cacheKey]&&(Z[e.cacheKey]=Z[o]),c())},[o,e.cacheKey,e.keepOnUpdate,c]),i.createElement(h.ID,{value:a},e.children,i.createElement(v.Z,{eventHandler:function(t,n){(n||t)&&(e.cacheKey&&(Z[e.cacheKey]=t.scrollTop),e.onScroll&&e.onScroll(t.scrollTop),e.onScrollToEnd&&e.node&&e.node.clientHeight+e.node.scrollTop>=e.node.scrollHeight&&e.onScrollToEnd())},throttleWait:64}))},L=((0,l.Z)("body-scroll")("reload"),function(e){var t=i.useRef(null);return(0,M.Z)(function(){t.current=window.document.documentElement}),i.createElement(D,(0,r._)({},e,{node:t.current}),e.children)}),A=function(e){function t(t){var n;return(n=e.call(this,t)||this)._analyticsRef=i.createRef(),n._registerStickyElement=function(e,t,r,o){n._stickyHeights[r][e]=0,n._stickyRefs[r][e]=t,n._stickyListeners[r][e]=o,n._calcStickyPositions(Math.max(e-1,0),r)},n._unregisterStickyElement=function(e,t){delete n._stickyHeights[t][e],delete n._stickyRefs[t][e]},n._updateStickyElement=function(e,t,r){n._stickyHeights[r][e]=t,n._calcStickyPositions(e,r)},n._calcStickyPositions=function(e,t){for(var r,o,i=0,a=0;a<=e;a++)"number"==typeof n._stickyHeights[t][a]&&(i+=n._stickyHeights[t][a]);for(var s=e+1;s<n._stickyHeights[t].length;s++)null==(r=(o=n._stickyListeners[t])[s])||r.call(o,i),"number"==typeof n._stickyHeights[t][s]&&(i+=n._stickyHeights[t][s])},n._isNodeWithinStickyElement=function(e){return n._stickyRefs.top.concat(n._stickyRefs.bottom).some(function(t){var n;return null==(n=t.current)?void 0:n.contains(e)})},n._getStickyElementsOffset=function(e){return n._stickyHeights[e].filter(Boolean).reduce(function(e,t){return e+t},0)},n._onScrollAnalytics=function(e){var t;e&&(null==(t=n._analyticsRef.current)||t.logEvent("onscroll",{height:null==e?void 0:e.clientHeight,scrollHeight:null==e?void 0:e.scrollHeight,scrollPosition:null==e?void 0:e.scrollTop}))},n._getScrollComponent=function(){return n.props.body?L:n.props.config.uatraits.isMobile||n.props.native?x:S},n._renderAnalytics=function(){return n.props.useAnalytics?i.createElement(i.Fragment,null,i.createElement(P.ZP,{name:"scroll",nodeRef:n._analyticsRef}),i.createElement(v.Z,{eventHandler:n._onScrollAnalytics})):null},n._stickyListeners={top:[],bottom:[]},n._stickyHeights={top:[],bottom:[]},n._stickyRefs={top:[],bottom:[]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){null==this.props.setIsNodeWithinStickyElementRef||this.props.setIsNodeWithinStickyElementRef.call(this.props,this._isNodeWithinStickyElement)},n.componentWillUnmount=function(){null==this.props.setIsNodeWithinStickyElementRef||this.props.setIsNodeWithinStickyElementRef.call(this.props,void 0)},n.render=function(){var e=this._getScrollComponent(),t=i.createElement(i.Fragment,null,this.props.children,this._renderAnalytics());return i.createElement(e,(0,r._)({},this.props,{children:t,getStickyElementsOffset:this._getStickyElementsOffset,registerStickyElement:this._registerStickyElement,unregisterStickyElement:this._unregisterStickyElement,updateStickyElement:this._updateStickyElement}))},t}(i.Component),N=(0,y.ZP)(A)},36887:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(87363),o=n(44748),i=function(e){var t=e.view,n=e.withoutMargin,i=e.color,a=(0,o.Z)("spinner-view_"+t);return r.createElement("div",{className:a({"without-margin":n,color:i})},r.createElement("div",{className:a("circle")}))}},77558:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(50576),a=function(e){function t(){return e.apply(this,arguments)}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;window.addEventListener(e.type,e.listener,e.options)},n.componentDidUpdate=function(e){var t=this.props;e.listener===t.listener&&(0,i.Z)(e.options,t.options)||(window.removeEventListener(e.type,e.listener,e.options),window.addEventListener(t.type,t.listener,t.options))},n.componentWillUnmount=function(){var e=this.props;window.removeEventListener(e.type,e.listener,e.options)},n.render=function(){return null},t}(o.Component);t.Z=a},5035:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(18188),o=n(87363),i=n(44748),a=n(31336),s=n(81194),u=n(93522),c=n(44953),l=n(26306),d=n(33988),p=(0,i.Z)("zoom-control"),f=function(e){var t,n=(0,a.ZR)(),i=!!n.mapWidget,f=null!=(t=e.size)?t:n.uatraits.isMobile?"xmedium":"medium",m=(0,r._)(n.uatraits.isMobile&&!i?[d.zoomIn48Icon,d.zoomOut48Icon]:['<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 5.992c0-.537.448-.992 1-.992.556 0 1 .444 1 .992V11h5.008c.537 0 .992.448.992 1 0 .556-.444 1-.992 1H13v5.008c0 .537-.448.992-1 .992-.556 0-1-.444-1-.992V13H5.992C5.455 13 5 12.552 5 12c0-.556.444-1 .992-1H11V5.992z" fill="currentColor"/></svg>','<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 12a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1z" fill="currentColor"/></svg>'],2),v=m[0],h=m[1];return o.createElement("div",{className:p()},o.createElement("div",{className:p("group")},o.createElement("div",{className:p("zoom-in")},o.createElement(u.Z,{text:"Приблизить",position:"left",isDisabled:e.disabledZoomIn,isAir:!0},function(t){return o.createElement(c.ZP,{name:"zoom_in",logClick:!0},o.createElement(s.Z,{view:"air",size:f,icon:o.createElement(l.Z,{className:p("icon"),dangerouslySetInnerHTML:{__html:v}}),onClick:e.onZoomIn,ariaLabel:"Приблизить",disabled:e.disabledZoomIn,pinBottom:!n.uatraits.isMobile||i,ref:t}))})),o.createElement("div",{className:p("zoom-out")},o.createElement(u.Z,{text:"Отдалить",position:"left",isDisabled:e.disabledZoomOut,isAir:!0},function(t){return o.createElement(c.ZP,{name:"zoom_out",logClick:!0},o.createElement(s.Z,{view:"air",size:f,icon:o.createElement(l.Z,{className:p("icon"),dangerouslySetInnerHTML:{__html:h}}),ariaLabel:"Отдалить",onClick:e.onZoomOut,disabled:e.disabledZoomOut,pinTop:!n.uatraits.isMobile||i,ref:t}))}))))}},14246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(87363),o=(0,n(44748).Z)("a11y-hidden"),i=function(e){var t=e.children,n=e.tag,i=e.role,a=e.ariaLive,s=e.ariaBusy,u=e.ariaAtomic;return t?r.createElement(void 0===n?"span":n,{className:o(),"aria-live":a,"aria-busy":s,"aria-atomic":u,role:i},t):null}},73911:(e,t,n)=>{"use strict";var r=n(87363),o=n(42850),i=n(44953);t.Z=function(e){return r.createElement(o.Z,{type:"mapNode"},r.createElement(i.ZP,e,e.children))}},41690:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(61533),a=n(30473),s=n(31336),u=function(e){function t(t){var n;return(n=e.call(this,t)||this)._addListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.addEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.addEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._removeListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.removeEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.removeEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._onHideAnimationEnd=function(){var e;(null==(e=n.props.animationRef)?void 0:e.current)&&n._removeListeners(n.props.animationRef.current),i.flushSync(function(){n.setState({content:null},n.props.onHideEnd)})},n.state={content:t.children},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.children&&this.setState({content:this.props.children},this.props.onShow)},n.componentDidUpdate=function(e){var t=this,n=this.props.children;if(n)n!==e.children&&this.setState({content:n},this.state.content?void 0:this.props.onShow);else{var r,o=null==(r=this.props.animationRef)?void 0:r.current;o&&(this.props.config.query["no-animation"]?setTimeout(function(){return t._onHideAnimationEnd()}):(this._addListeners(o),o.classList.add("_animation-hide"))),this.props.onHideStart&&this.props.onHideStart()}},n.componentWillUnmount=function(){var e;(null==(e=this.props.animationRef)?void 0:e.current)&&this._removeListeners(this.props.animationRef.current)},n.render=function(){return this.state.content},t}(o.Component);t.Z=(0,s.ZP)(u)},53770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r,o=n(34788),i=n(2467),a=n(16145),s=n(80129),u=function(e){var t=s.stringify(e,{sort:function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}});return t?String(function(e){for(var t=e.length,n=5381,r=0;r<t;r++)n=33*n^e.charCodeAt(r);return n>>>0}(t)):""},c=n(18007),l=n(79429);function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=n(83840);function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return(0,l.L)(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,p.b)(n,e)})(e)}var m=function(e){function t(t){var n;return(n=e.call(this,t.message)||this).name="ApiError",n.statusCode=t.statusCode,n.responseHeaders=t.responseHeaders,n}return(0,c._)(t,e),t}(f(Error)),v=function e(t,n,s,c){var l={csrfToken:r||s.csrfToken,sessionId:s.counters.analytics.sessionId,host_config:s.hostConfig,host_exp:s.hostExp,ajax:"1"};s.query["no-mail"]&&(l["no-mail"]=!0),s.query["no-cache"]&&(l["no-cache"]=!0),s.query.debug&&(l.debug=s.query.debug),s.mocks&&(l.mocks=0!==Object.keys(s.mocks).length?s.mocks:"1");var d={url:(n.baseUrl||s.apiBaseUrl)+"/api/"+t,method:"body"in n&&n.body?"POST":"GET",headers:(0,o._)({"X-Retpath-Y":window.location.href},n.headers)};"body"in n&&n.body&&(d.body=JSON.stringify(n.body),d.headers=(0,o._)({},d.headers,{"Content-Type":"application/json; charset=utf-8"}));var p=(0,o._)({},l,"query"in n&&n.query?n.query:{}),f=u(p);return d.query=(0,o._)({},p,{s:f}),"prestable"===s.environment&&(d.headers=(0,o._)({},d.headers,{"X-Ya-Maps-Prestable":"1"})),(0,i.Z)(d).then(function(o){if("type"in o&&"captcha"===o.type)throw window.location.href=o.captcha["captcha-page"],Error("Response is captcha");if("csrfToken"in o){if(!1!==c)return r=o.csrfToken,e(t,n,s,!1);throw Error("Invalid csrf token")}if(o.debug&&(0,a.v)(o.debug),"error"in o)throw"message"in o.error?"statusCode"in o.error?new m(o.error):Error(o.error.message):o.error;return o.data})}},52869:(e,t)=>{"use strict";t.Z={create:function(e,t){var n=t.success,r=t.fail,o=t.always,i=!1;return e.then(function(e){!i&&(n&&n(e),o&&o(null,e))},function(e){!i&&(r&&r(e),o&&o(e))}),{cancel:function(){return i=!0}}},cancel:function(e){e&&e.cancel()}}},30473:(e,t,n)=>{"use strict";n.d(t,{r1:()=>o});var r=n(22967),o=function(){return{events:{transitionEnd:i("transition"),animationEnd:i("animation")},styles:{transform:s("transform"),transition:s("transition"),userSelect:s("user-select")},cssStyles:{transform:a("transform"),transformOrigin:a("transform-origin")},has:{touch:"ontouchstart"in window||!!window.navigator.maxTouchPoints,retinaDisplay:window.devicePixelRatio>1,printColorAdjust:null!==u("printColorAdjust"),snapAlign:null!==u("scrollSnapAlign"),objectFit:null!==u("objectFit")}}};function i(e){var t=u(e);return t?t+(0,r.Z)(e)+"End":null!==t?e+"end":null}function a(e){var t=u(e);return t?"-"+t+"-"+e:null!==t?e:null}function s(e){var t=u(e);return t?t+c(e):null!==t?e:null}function u(e){var t=window.document.createElement("div");return void 0!==t.style[e]?"":void 0!==t.style["webkit"+c(e)]?"webkit":void 0!==t.style["Moz"+c(e)]?"Moz":void 0!==t.style["ms"+c(e)]?"ms":null}function c(e){return e.split("-").map(function(e){return(0,r.Z)(e)}).join("")}},41057:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(34788),o=n(20224),i=n(87363),a=n(71392),s=n(13752),u=function(e){var t,n=i.useRef(null),o=e.clickableRef||n,u=(0,s.p)({ref:o,skipBlurOnPress:e.skipBlurOnPress}),c=(t=({callback:e.callback}).callback,i.useCallback(function(e,n){if(e.keyCode===a.n.ENTER||e.keyCode===a.n.SPACE){var r=n||t;null==r||r(e)}},[t]));return(0,r._)({},u,{onKeyDown:c,ref:o})},c=n(35645),l=n(2866),d=(0,c.Z)(function(e){var t=e.children,n=e.tag,a=e.forwardedRef,s=e.ariaSelected,c=e.ariaHidden,d=e.ariaLabel,p=e.ariaCurrent,f=e.ariaPressed,m=e.ariaChecked,v=e.onClick,h=e.ariaExpanded,g=e.ariaHasPopup,y=e.role,_=void 0===y?"button":y,b=e.skipBlurOnPress,w=(0,o._)(e,["children","tag","forwardedRef","ariaSelected","ariaHidden","ariaLabel","ariaCurrent","ariaPressed","ariaChecked","onClick","ariaExpanded","ariaHasPopup","role","skipBlurOnPress"]),E=u({callback:e.onClick,clickableRef:a,skipBlurOnPress:b}),S=null!=c?c:!v,C=d||("string"==typeof t?t:void 0),k=e.disabled?l.yp:null,R=i.useCallback(function(t){E.onMouseLeave(t),null==e.onMouseLeave||e.onMouseLeave.call(e,t)},[E,e]),x=i.useCallback(function(t){E.onMouseDown(t),null==e.onMouseDown||e.onMouseDown.call(e,t)},[E,e]);return i.createElement(void 0===n?"div":n,(0,r._)({},w,E,{onMouseDown:x,onMouseLeave:R,onClick:v,"aria-hidden":S,"aria-label":C,role:_,"aria-checked":l.Kn.has(_)?!!m:void 0,"aria-selected":l.lg.has(_)?s:void 0,"aria-haspopup":g,"aria-expanded":h},void 0!==p?{"aria-current":p}:{"aria-pressed":f},{tabIndex:S?-1:0},k),t)})},26306:(e,t,n)=>{"use strict";var r=n(34788),o=n(20224),i=n(87363);t.Z=function(e){var t=e.tag,n=e.displayInherit,a=e.dangerouslySetInnerHTML,s=e.style,u=(0,o._)(e,["tag","displayInherit","dangerouslySetInnerHTML","style"]);return i.createElement(void 0===t?"div":t,(0,r._)({},u,{style:void 0===n||n?(0,r._)({display:"inherit"},s):s,dangerouslySetInnerHTML:i.useMemo(function(){return{__html:null==a?void 0:a.__html}},[null==a?void 0:a.__html])}))}},35645:(e,t,n)=>{"use strict";var r=n(34788),o=n(20224),i=n(87363);t.Z=function(e){return function(t){var n=t.ref,a=(0,o._)(t,["ref"]);return i.createElement(e,(0,r._)({},a,{forwardedRef:n||void 0}),a&&"object"==typeof a&&"children"in a?a.children:null)}}},18:(e,t,n)=>{"use strict";var r=n(34788),o=n(18188),i=n(80129),a=n(50770),s=n(94430),u=n(72133),c=n(34943),l=["","permission_denied","position_unavailable","timeout","unknown"],d=function(e){this.message=e,this.code=l.indexOf(e)},p={ERROR_TYPES:l,getCurrentPosition:function(e,t){var n,r,o;return(void 0===t&&(t=6e4),(null==(n=e.query.mocks)?void 0:n.geolocation)==="denied")?Promise.reject(new d("permission_denied")):(null==(r=e.query.mocks)?void 0:r.geolocation)==="unavailable"?Promise.reject(new d("position_unavailable")):(null==(o=(0,s.W)())||o.logEvent("geolocation_request"),m({config:e,timeout:t}).then(function(t){var n,r=t.coords;return null==(n=(0,s.W)())||n.logEvent("geolocation_success",{accuracy:r.accuracy}),f(r,e),r}).catch(function(e){var t;if(null==(t=(0,s.W)())||t.logEvent("geolocation_fail",{type:(null==e?void 0:e.code)?p.ERROR_TYPES[e.code]:"unknown"}),e)throw e;throw new d("unknown")}))},watchPosition:function(e,t,n){if(void 0===n&&(n=6e4),(null==(o=t.query.mocks)?void 0:o.geolocation)==="denied")return e.onError("permission_denied"),function(){};if((null==(i=t.query.mocks)?void 0:i.geolocation)==="unavailable")return e.onError("position_unavailable"),function(){};null==(a=(0,s.W)())||a.logEvent("geolocation_watch_request");var o,i,a,c=!1;return function(e,t,n){if((0,u.Sp)(n.config)){var o,i=window.setInterval(function(){return m(n).then(e).catch(t)},null!=(o=null==n?void 0:n.timeout)?o:6e4);return function(){window.clearInterval(i)}}var a=window.navigator.geolocation.watchPosition(e,t,(0,r._)({enableHighAccuracy:!0},n));return function(){window.navigator.geolocation.clearWatch(a)}}(function(n){c||(null==(o=(0,s.W)())||o.logEvent("geolocation_watch_success",{accuracy:n.coords.accuracy}),c=!0);var r,o,i,a=h(null==(r=t.query.mocks)?void 0:r.geolocation),u=a?{accuracy:null!=(i=a.accuracy)?i:n.coords.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:n.coords;f(u,t),e.onSuccess(u)},function(t){var n,r=(null==t?void 0:t.code)?p.ERROR_TYPES[t.code]:"unknown";c||(null==(n=(0,s.W)())||n.logEvent("geolocation_watch_fail",{type:r}),c=!0),e.onError(r)},{config:t,timeout:n})},checkPermission:function(e){var t,n;return(null==(t=e.query.mocks)?void 0:t.geolocation)==="denied"||(null==(n=e.query.mocks)?void 0:n.geolocation)==="unavailable"?Promise.reject("denied"):window.navigator.permissions?Promise.race([window.navigator.permissions.query({name:"geolocation"}).then(function(e){return e.state}),a.Vs(2e3)]).catch(function(){}):Promise.resolve(void 0)}};function f(e,t){t.isYango||!e||e.accuracy>5e3||(new window.Image().src=t.morda.url+"/gpsave?"+i.stringify({sk:t.xscriptCsrfToken,lat:e.latitude,lon:e.longitude,precision:e.accuracy}))}function m(e){var t=function(){return new Promise(function(t,n){return window.navigator.geolocation.getCurrentPosition(t,n,(0,r._)({enableHighAccuracy:!0},e))})},n=h(null==(o=e.config.query.mocks)?void 0:o.geolocation);if(n){var o,i,s={accuracy:null!=(i=n.accuracy)?i:1e3,latitude:n.latitude,longitude:n.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null,toJSON:function(){return{accuracy:this.accuracy,latitude:this.latitude,longitude:this.longitude,altitude:this.altitude,altitudeAccuracy:this.altitudeAccuracy,heading:this.heading,speed:this.speed}}};return a.Dc(300).then(function(){return{coords:s}})}return(0,u.Sp)(e.config)?c.Z.hasMethod(e.config,"getCurrentUserLocation").then(function(n){if(n){var r;return c.Z.getCurrentUserLocation({config:e.config,waitTimeout:null!=(r=null==e?void 0:e.timeout)?r:6e4})}return t()}).catch(function(){throw new d("position_unavailable")}):t()}var v=/^\d+\.?(\d+)?,\d+\.?(\d+)?(,\d+)?$/;function h(e){if(v.test(e)){var t=(0,o._)(e.split(",").map(Number),3);return{latitude:t[0],longitude:t[1],accuracy:t[2]}}}t.Z=p},13752:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(34788),o=n(18188),i=n(87363);function a(e){var t=(0,o._)(i.useState(!1),2),n=t[0],a=t[1],s=i.useCallback(function(){return a(!1)},[a]),u=i.useCallback(function(){return a(!0)},[a]),c=i.useCallback(function(){if(n&&e.ref.current===window.document.activeElement&&!e.skipBlurOnPress){var t;null==(t=e.ref.current)||t.blur()}},[e,n]);return(0,r._)({},{onMouseLeave:s,onMouseDown:u,onFocus:c})}},33228:(e,t,n)=>{"use strict";var r=n(34788),o=n(18188),i=n(87363),a=n(37176),s=n(89048),u=n(44748),c=n(2467),l=n(52869),d=n(41057),p=n(55877),f=n.n(p),m=n(63003),v={},h={},g=(0,u.Z)("inline-image");t.Z=function(e){var t,n=(0,o._)(i.useState(!!v[e.url]),2),u=n[0],p=n[1],y=(0,a.Z)(u),_=(0,a.Z)(e.url),b=i.useRef(void 0),w=i.useRef(f().v4()),E=i.useRef(null),S=v[e.url],C=null==S?void 0:null==(t=S.match(/<clipPath[^>]+id="([^"]+)"/))?void 0:t[1];C&&(S=S.replace(RegExp(C,"g"),w.current));var k=i.useMemo(function(){return S?{__html:S}:void 0},[S]),R=i.useCallback(function(){var t,n=null==(t=E.current)?void 0:t.firstElementChild;n&&(void 0!==e.width&&n.setAttribute("width",String(e.width)),void 0!==e.height&&n.setAttribute("height",String(e.height)))},[e.height,e.width]),x=i.useCallback(function(){l.Z.cancel(b.current);var t=e.url;""!==t&&(h[t]||(h[t]=(0,c.Z)({url:t,parser:"string"}),h[t].then(function(e){return v[t]=e},function(){return delete h[t]})),b.current=l.Z.create(h[t],{success:function(){return p(!0)}}))},[e.url]);if((0,s.Z)(function(){u?R():x()}),i.useEffect(function(){if(!y&&u&&R(),e.url!==_){R(),l.Z.cancel(b.current);var t=!!v[e.url];p(t),t||x()}},[e.url,u,y,_,R,x]),e.children)return i.createElement(i.Fragment,null,e.children((null==k?void 0:k.__html)||""));var P=e.onClick?d.Z:"span";return i.createElement(P,(0,r._)({tag:"span",ref:E,key:u?0:1,style:(0,r._)({},e.style,{fontSize:0,lineHeight:0}),className:g({loaded:u})+(e.className?" "+e.className:""),onClick:e.onClick,dangerouslySetInnerHTML:k},(0,m.x)(!e.onClick,{ariaLabel:e.ariaLabel,ariaHidden:e.ariaHidden})),k?null:i.createElement("svg",{width:e.width,height:e.height}))}},70427:(e,t,n)=>{"use strict";var r=n(11912),o={};t.Z=function(e,t){var n=e.toString();return o[n]||Object.keys(t).reduce(function(t,i){return t[i]=function(){for(var t=arguments.length,a=Array(t),s=0;s<t;s++)a[s]=arguments[s];return function(t){var s,u=function(e){return t((s=e)[i].apply(s,(0,r._)(a)))};return o[n]?u(o[n]):e().then(function(e){var t=e.default;return u(o[n]=t)},function(e){var n;return t((n=e.message,function(e,t){e({type:"EXTEND",payload:{loadingErrors:(0,r._)(t().loadingErrors).concat([n])}})}))})}},t},{})}},88599:(e,t,n)=>{"use strict";var r=n(18007),o=n(20224),i=n(87363),a=n(28216);t.Z=function(e,t,n){void 0===n&&(n={});var s=!1,u=function(t){function a(){return t.apply(this,arguments)}(0,r._)(a,t);var u=a.prototype;return u.shouldComponentUpdate=function(e){return n.withSideEffect?e.shouldRender:!s&&!this.props.shouldRender&&e.shouldRender},u.componentDidUpdate=function(e){!e.shouldRender&&this.props.shouldRender&&(s=!0)},u.render=function(){var t=this.props,r=t.shouldRender,a=(0,o._)(t,["shouldRender"]);return r?i.createElement(e,a):n.placeholder||null},a}(i.Component);return a.$j(function(e){return{shouldRender:t(e)}})(u)}},65807:(e,t)=>{"use strict";var n={};t.Z=function(e,t){if(void 0===t&&(t=!0),e in n)return n[e];var r=window.document.createElement("script");return r.type="text/javascript",r.charset="utf-8",e.includes("//")&&!e.startsWith(window.location.origin)&&t&&(r.crossOrigin="anonymous"),r.src=("file:"===window.location.protocol&&e.startsWith("//")?"http:":"")+e,r.async=!0,n[e]=new Promise(function(e,t){r.onload=function(){r.onload=function(){return null},r.onerror=r.onload,e()},r.onerror=function(){r.onload=function(){return null},r.onerror=r.onload,t(Error("Failed to load "+r.src))};var n=window.document.getElementsByTagName("head")[0];n.insertBefore(r,n.lastChild)}),n[e]}},43272:(e,t,n)=>{"use strict";n.d(t,{k7:()=>o,sL:()=>i,M8:()=>u,Uc:()=>c,h9:()=>m,OO:()=>v,b:()=>h,aC:()=>a,EB:()=>s,mH:()=>l,B1:()=>d,iR:()=>p,WN:()=>f,mu:()=>g,US:()=>y,az:()=>_,Uv:()=>b,cg:()=>w,Cb:()=>E});var r=n(11912),o=["object/add"],i=["entrance/add","address/add","road/add","other/add","transit/stop/add","parking/add","barrier/add","fence/add","crosswalk/add","gate/add","provider/add"],a=["object/edit"],s=["object/other","address/edit","entrance/edit","object/location/edit","object/name/edit","object/not-found"],u=["assignment/organization/status"],c=["assignment/barrier/edit","assignment/gate/edit","assignment/entrance/edit","assignment/settlement/scheme/add","assignment/address/add"],l=["transit/stop/edit"],d=["transit/stop/not-found","transit/stop/name/edit","transit/stop/location/edit","transit/stop/route/incorrect","transit/stop/other"],p=["subway/edit"],f=["subway/not-found","subway/name/edit","subway/location/edit","subway/other"],m=["organization/add"],v=["organization/edit","organization/closed"],h=["organization/edit-info","organization/other","organization/closed-full","organization/closed/permanently","organization/closed/temporary","organization/closed/unknown","organization/opened","organization/moved","organization/location/edit","organization/edit-accessibility"],g=["route/edit","route/incorrect"],y=["route/edit/better","route/incorrect/road-closed","route/incorrect/poor-condition","route/incorrect/prohibiting-sign","route/incorrect/obstruction","route/incorrect/other","route/other"],_=["object/select"],b=["map/edit"],w=["spot/other"];(0,r._)(["ru.yandex.yandexnavi","ru.yandex.yandexnavi.inhouse","ru.yandex.yandexnavi.sandbox","ru.yandex.yandexnavi.debug","ru.yandex.yandexnavi.pr","ru.yandex.mobile.navigator","ru.yandex.mobile.navigator.inhouse","ru.yandex.mobile.navigator.sandbox"]).concat((0,r._)(["desktop-yango-maps","touch-yango-maps","com.yango.maps.android.pr","com.yango.maps.android.debug","com.yango.maps.ios.inhouse","com.yango.maps.ios.sandbox","com.yango.maps.android","com.yango.maps.ios","ru.yandex.yango","ru.yandex.yango.develop","ru.yandex.yango.inhouse","com.yandex.yango","com.yandex.yango.develop","com.yandex.yango.debug","com.yango.driver","com.yango.driver.beta","com.yango.driver.flutter.ios","com.yango.driver.flutter.ios.develop","ru.yandex.taximeter","ru.yandex.taximeter.flutter.ios","ru.yandex.taximeter.flutter.ios.develop","ru.yandex.taximeter.flutter.ios.develop.debug","ru.yandex.taximeter.flutter.ios.inhouse","ru.yandex.taximeter.beta","com.yango.delivery"]),["web","mobile_maps_android","mobile_maps_ios","serp","tycoon","webview_form","ugc","nyak","ru.yandex.searchplugin","ru.yandex.yandexmaps","ru.yandex.traffic","ru.yandex.traffic.sandbox","ru.yandex.traffic.inhouse","ru.yandex.yandexmaps.debug","ru.yandex.yandexmaps.pr","com.yandex.maps.TestApp","com.yandex.maps.testapp","com.yandex.maps.mrctestapp","com.yandex.maps.mrctestapp.testing","com.yandex.browser","ru.yandex.mobile","ru.yandex.mobile.search","desktop-maps","touch-maps","touch-nmaps","ru.yandex.delivery"]);var E=["feedback.common.error_in_geo_object_menu","feedback.common.add_object_to_map","feedback.spot_other.finish","feedback.finish_form.edit_status_carousel","toponym.add_finish","toponym.edit_finish","organization.add_finish","organization.edit_finish","ugc_profile.feedbacks_footer","ugc_profile.feedbacks_footer.edit_map","ugc_profile.feedbacks_footer.add_object","ugc_profile.feedbacks_placeholder","ugc_profile.feedbacks_drafts.feedbacks_draft","ugc_profile.assignments_placeholder.add_object","ugc_profile.assignments_push_placeholder.edit_object","ugc_profile.organization_edit_status_assignment.edit","ugc_profile.organization_edit_status_assignment.submit","ugc_profile.barrier_assignment.edit","ugc_profile.gate_assignment.edit","ugc_profile.add_address_assignment.edit","ugc_profile.settlement_scheme_assignment.edit","ugc_profile.entrances_assignment.edit","ugc_profile.review_impression.closed","map.context","map.controls","organization.footer","organization.features","organization.search_result","toponym.search_results","toponym.default","toponym.building","toponym.building_without_address","toponym.add_object","route.routes_list","route.detailed_info","user_profile.edit_map","masstransit.default","masstransit.subway"]},89920:(e,t,n)=>{"use strict";n.d(t,{qv:()=>S,W3:()=>i,bl:()=>u,RP:()=>a,Qr:()=>s,NM:()=>c,OI:()=>l,ai:()=>d,mR:()=>p,KT:()=>f,LB:()=>m,Rf:()=>g,UZ:()=>v,pj:()=>h,xT:()=>_,cV:()=>C,T_:()=>b,XS:()=>w,fU:()=>E});var r=n(43272);function o(e){return r.sL.includes(e)}function i(e){return r.k7.includes(e)||o(e)}function a(e){return r.aC.includes(e)}function s(e){return r.EB.includes(e)}function u(e){return a(e)||s(e)}function c(e){return r.mH.includes(e)}function l(e){return r.B1.includes(e)}function d(e){return r.iR.includes(e)}function p(e){return r.WN.includes(e)}function f(e){var t;return d(e)||p(e)||c(t=e)||l(t)}function m(e){return r.h9.includes(e)}function v(e){return r.OO.includes(e)}function h(e){return r.b.includes(e)}function g(e){return v(e)||h(e)}function y(e){return r.US.includes(e)}function _(e){return r.mu.includes(e)||y(e)}function b(e){return r.az.includes(e)}function w(e){return r.Uv.includes(e)}function E(e){return r.cg.includes(e)}function S(e){var t;return r.M8.includes(e)||r.Uc.includes(e)||o(e)||s(e)||l(e)||p(e)||h(t=e)||m(t)||y(e)||E(e)}function C(e){return o(e)||y(e)||E(e)||["transit/stop/location/edit","object/location/edit","entrance/edit","subway/location/edit"].includes(e)}},72393:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(18007),o=n(87363),i=n(44748),a=n(96449),s=n(31336),u=n(44953),c=n(97313),l=n(44054),d=n(57636),p=n(85172),f=(0,i.Z)("geolocation-pin"),m={fill:"#000",fillOpacity:.05,stroke:[{width:1,opacity:.07,color:"#000"}],interactive:!1,zIndex:c.I.minimum,simplificationRate:0},v=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(o.Fragment,null,o.createElement(u.ZP,{name:"geolocation_pin"},o.createElement(a.Z,{coordinates:e.currentPosition,zIndex:c.I.minimum,nonInteractive:!0},o.createElement("div",{className:f()},o.createElement("div",{className:f("shadow")},o.createElement(d.Z,{name:"map-placemark-dot-shadow-32",inline:!0})),o.createElement("div",{className:f("placemark")},o.createElement(d.Z,{name:"map-placemark-dot-32",theme:e.theme,inline:!0}))))),e.config.uatraits.isMobile?o.createElement(l.Z,{center:e.currentPosition,radius:e.accuracy,drawingStyle:m}):null)},t}(o.Component),h=(0,p.ZP)((0,s.ZP)(v))},25441:(e,t,n)=>{"use strict";n.d(t,{aK:()=>o,HA:()=>i});var r=n(3558);function o(e){return{permalink:e.permalink,orderIds:e.orderIds}}function i(e){var t,n,o,i,a=e.businessLinks.find(function(e){return"#hotel_traits"===e.aref}),s=r.x(e),u=(null==(i=e.advert)?void 0:null==(o=i.promo)?void 0:null==(n=o.ordInfo)?void 0:null==(t=n.client)?void 0:t.id)==="91317256";return!!(a&&!s&&u)}},89318:(e,t,n)=>{"use strict";n.d(t,{R7:()=>W,VB:()=>H,Gr:()=>B,y7:()=>j,XT:()=>G});var r=(0,n(34788)._)({},{airport:"airports",area:"district",country_fallback:"fallback-toponym",house:"building",metro_station:"fallback-toponym",railway_station:"railway-station",other:"fallback-toponym",region:"fallback-toponym",station:"bus-station",vegetation:"park",unknown:"fallback-toponym"},{barbershop:"hairdressers",gasoline:"gas-station",hotel:"hotels","phone-shop":"mobile-phones",restaurant:"restaurants",shop:"supermarket","shopping-mall":"malls",pharmacy:"medicine","currency-exchange":"currency-exchange-fallback"}),o={medicine:"medicine-tr",drugstores:"drugstores-tr","emergency-point":"emergency-point-tr","currency-exchange":"currency-exchange-tr"},i={banks:"banks-ru","currency-exchange":"currency-exchange-ru"},a={medicine:"medicine-wd",drugstores:"drugstores-ae"},s=n(23546),u=n.n(s),c=n(9912),l=n.n(c),d=n(48102),p=n.n(d),f=n(81004),m=n.n(f),v=n(69777),h=n.n(v),g=n(57070),y=n.n(g),_=n(17049),b=n.n(_),w=n(42363),E=n.n(w),S=n(82461),C=n.n(S),k=n(2509),R=n.n(k),x=n(82490),P=n.n(x),M=n(90851),I=n.n(M),T=n(23811),Z=n.n(T),D=n(26779),L=n.n(D),A=n(2285),N=n.n(A),z=n(72852),F=n.n(z),U={favicon:["favicon.svg"],"metro-favicon":["favicon.svg"],rubrics:["administration-14.svg","administration-24.svg","aeroexpress-14.svg","aeroexpress-24.svg","airfield-14.svg","airfield-24.svg","airports-14.svg","airports-24.svg","animation-14.svg","animation-24.svg","aquarium-14.svg","aquarium-24.svg","architect-bureau-14.svg","architect-bureau-24.svg","armenian-church-14.svg","armenian-church-24.svg","art-14.svg","art-24.svg","atm-14.svg","atm-24.svg","attraction-14.svg","attraction-24.svg","auto-14.svg","auto-24.svg","auto-parts-14.svg","auto-parts-24.svg","auto-repair-14.svg","auto-repair-24.svg","baby-shop-14.svg","baby-shop-24.svg","bakery-24.svg","banks-14.svg","banks-24.svg","banks-ru-14.svg","banks-ru-24.svg","banks-ru-central-14.svg","banks-ru-central-24.svg","bars-14.svg","bars-24.svg","baths-14.svg","baths-24.svg","beach-14.svg","beach-24.svg","beauty-14.svg","beauty-24.svg","beauty-shops-14.svg","beauty-shops-24.svg","beer-market-14.svg","beer-market-24.svg","bike-14.svg","bike-24.svg","bike-rent-14.svg","bike-rent-24.svg","bike-rent-test-14-flip.svg","bike-rent-test-24-flip.svg","boat-station-14.svg","boat-station-24.svg","bookstore-14.svg","bookstore-24.svg","bowling-14.svg","bowling-24.svg","buddhism-14.svg","buddhism-24.svg","building-14.svg","building-24.svg","bus-medium-14.svg","bus-medium-24.svg","bus-station-14.svg","bus-station-24.svg","bus-stop-14.svg","bus-stop-24.svg","butcher-shop-14.svg","butcher-shop-24.svg","cableway-14.svg","cableway-24.svg","cafe-14.svg","cafe-24.svg","canteen-14.svg","canteen-24.svg","car-14.svg","car-24.svg","car-park-14.svg","car-park-24.svg","car-park-barrier-14.svg","car-park-barrier-24.svg","car-park-disabled-14.svg","car-park-disabled-24.svg","car-park-taxi-14.svg","car-park-taxi-24.svg","car-park-toll-14.svg","car-park-toll-24.svg","car-wash-14.svg","car-wash-24.svg","catholic-church-14.svg","catholic-church-24.svg","cemetery-14.svg","cemetery-24.svg","checkpoint-14.svg","checkpoint-24.svg","childrens-camp-14.svg","childrens-camp-24.svg","childrens-playground-14.svg","childrens-playground-24.svg","christmas-bazaars-24.svg","cinemas-14.svg","cinemas-24.svg","circus-14.svg","circus-24.svg","clothes-shop-14.svg","clothes-shop-24.svg","college-14.svg","college-24.svg","concert-hall-14.svg","concert-hall-24.svg","confectionary-14.svg","confectionary-24.svg","construction-hypermarket-14.svg","construction-hypermarket-24.svg","construction-tool-14.svg","construction-tool-24.svg","country-14.svg","country-24.svg","covered-park-14.svg","covered-park-24.svg","currency-exchange-14.svg","currency-exchange-24.svg","currency-exchange-fallback-14.svg","currency-exchange-fallback-24.svg","currency-exchange-ru-14.svg","currency-exchange-ru-24.svg","currency-exchange-test-14.svg","currency-exchange-test-14_rtl.svg","currency-exchange-test-24.svg","currency-exchange-test-24_rtl.svg","currency-exchange-tr-14.svg","currency-exchange-tr-24.svg","dairy-14.svg","dairy-24.svg","dancehall-14.svg","dancehall-24.svg","dental-14.svg","dental-24.svg","district-14.svg","district-24.svg","dolmus-14.svg","dolmus-24.svg","driving-school-14.svg","driving-school-24.svg","drop-off-14.svg","drop-off-24.svg","drugstores-14.svg","drugstores-24.svg","drugstores-ae-14.svg","drugstores-ae-24.svg","drugstores-tr-14.svg","drugstores-tr-24.svg","drugstores-wd-14.svg","drugstores-wd-24.svg","dry-cleaning-14.svg","dry-cleaning-24.svg","electronics-14.svg","electronics-24.svg","emergency-14.svg","emergency-24.svg","emergency-point-tr-14.svg","emergency-point-tr-24.svg","entertainments-14.svg","entertainments-24.svg","entrance-14.svg","entrance-24.svg","equestrian-14.svg","equestrian-24.svg","exhibition-center-14.svg","exhibition-center-24.svg","factory-14.svg","factory-24.svg","fallback-14.svg","fallback-24.svg","fallback-beauty-14.svg","fallback-beauty-24.svg","fallback-civil-services-14.svg","fallback-civil-services-24.svg","fallback-common-14.svg","fallback-common-24.svg","fallback-drugstores-14.svg","fallback-drugstores-24.svg","fallback-entertainment-14.svg","fallback-entertainment-24.svg","fallback-food-drink-14.svg","fallback-food-drink-24.svg","fallback-fun-14.svg","fallback-fun-24.svg","fallback-health-14.svg","fallback-health-24.svg","fallback-hydro-14.svg","fallback-hydro-24.svg","fallback-medicine-14.svg","fallback-medicine-24.svg","fallback-outdoor-14.svg","fallback-outdoor-24.svg","fallback-services-14.svg","fallback-services-24.svg","fallback-shopping-14.svg","fallback-shopping-24.svg","fallback-toponym-14.svg","fallback-toponym-24.svg","fallback-transport-14.svg","fallback-transport-24.svg","fast-food-14.svg","fast-food-24.svg","favorite-24.svg","festival-14.svg","festival-24.svg","film-studio-14.svg","film-studio-24.svg","fire-station-14.svg","fire-station-24.svg","fireworks-24.svg","fish-store-14.svg","fish-store-24.svg","fitness-14.svg","fitness-24.svg","flower-shop-14.svg","flower-shop-24.svg","food-market-14.svg","food-market-24.svg","forest-14.svg","forest-24.svg","fountain-14.svg","fountain-24.svg","funicular-14.svg","funicular-24.svg","furniture-store-14.svg","furniture-store-24.svg","gallery-14.svg","gallery-24.svg","garage-cooperative-14.svg","garage-cooperative-24.svg","garden-14.svg","garden-24.svg","gasstation-14.svg","gasstation-24.svg","gastro-market-14.svg","gastro-market-24.svg","geyser-14.svg","geyser-24.svg","giftshop-14.svg","giftshop-24.svg","golf-14.svg","golf-24.svg","government-14.svg","government-24.svg","grass-14.svg","grass-24.svg","greengrocery-14.svg","greengrocery-24.svg","hairdressers-14.svg","hairdressers-24.svg","haulier-14.svg","haulier-24.svg","heart-24.svg","highspeed-tram-stop-14.svg","highspeed-tram-stop-24.svg","home-14.svg","home-24.svg","home-appliances-14.svg","home-appliances-24.svg","hospital-14.svg","hospital-24.svg","hostels-14.svg","hostels-24.svg","hotels-14.svg","hotels-24.svg","household-supplies-14.svg","household-supplies-24.svg","hydro-14.svg","hydro-24.svg","hypermarket-14.svg","hypermarket-24.svg","indoor-infra-elevator-disabled-14.svg","indoor-infra-elevator-disabled-24.svg","indoor-service-charging-socket-14.svg","indoor-service-charging-socket-24.svg","indoor-service-luggage-14.svg","indoor-service-luggage-24.svg","industrial-enterprise-14.svg","industrial-enterprise-24.svg","information-14.svg","information-24.svg","it-14.svg","it-24.svg","jewelry-store-14.svg","jewelry-store-24.svg","justice-14.svg","justice-24.svg","kindergarten-14.svg","kindergarten-24.svg","landmark-14.svg","landmark-24.svg","laundry-14.svg","laundry-24.svg","library-14.svg","library-24.svg","liquor-store-14.svg","liquor-store-24.svg","locality-14.svg","locality-24.svg","locker-14.svg","locker-24.svg","malls-14.svg","malls-24.svg","market-14.svg","market-24.svg","marketplace-14.svg","marketplace-24.svg","medical-14.svg","medical-24.svg","medicine-14.svg","medicine-24.svg","medicine-il-14.svg","medicine-il-24.svg","medicine-tr-14.svg","medicine-tr-24.svg","medicine-wd-14.svg","medicine-wd-24.svg","memorable-event-14.svg","memorable-event-24.svg","minibus-14.svg","minibus-24.svg","mobile-phones-14.svg","mobile-phones-24.svg","monument-14.svg","monument-24.svg","mosque-14.svg","mosque-24.svg","mountain-14.svg","mountain-24.svg","museum-14.svg","museum-24.svg","music-store-14.svg","music-store-24.svg","musicclub-14.svg","musicclub-24.svg","nail-studio-14.svg","nail-studio-24.svg","news-14.svg","news-24.svg","night-club-14.svg","night-club-24.svg","office-14.svg","office-24.svg","office-service-14.svg","office-service-24.svg","offline-14.svg","offline-24.svg","online-store-14.svg","online-store-24.svg","opticial-store-14.svg","opticial-store-24.svg","orthodox-church-14.svg","orthodox-church-24.svg","park-14.svg","park-24.svg","pawnshop-14.svg","pawnshop-24.svg","pedestrian-14.svg","pedestrian-24.svg","perfume-shop-14.svg","perfume-shop-24.svg","pet-playground-14.svg","pet-playground-24.svg","petshop-14.svg","petshop-24.svg","photo-14.svg","photo-24.svg","picnic-14.svg","picnic-24.svg","pier-14.svg","pier-24.svg","pizzeria-14.svg","pizzeria-24.svg","planetarium-14.svg","planetarium-24.svg","playground-14.svg","playground-24.svg","police-14.svg","police-24.svg","police-post-14.svg","police-post-24.svg","pool-hall-14.svg","pool-hall-24.svg","port-14.svg","port-24.svg","post-office-14.svg","post-office-24.svg","printing-services-14.svg","printing-services-24.svg","protestant-church-14.svg","protestant-church-24.svg","province-14.svg","province-24.svg","pub-14.svg","pub-24.svg","racing-14.svg","racing-24.svg","railway-entrance-14.svg","railway-entrance-24.svg","railway-station-14.svg","railway-station-24.svg","railway-terminal-14.svg","railway-terminal-24.svg","restaurants-14.svg","restaurants-24.svg","rezervation-14.svg","rezervation-24.svg","route-14.svg","route-24.svg","sanatorium-14.svg","sanatorium-24.svg","school-14.svg","school-24.svg","science-14.svg","science-24.svg","shoe-store-14.svg","shoe-store-24.svg","shooting-14.svg","shooting-24.svg","skating-rink-14.svg","skating-rink-24.svg","ski-resort-14.svg","ski-resort-24.svg","smile-24.svg","software-14.svg","software-24.svg","spa-14.svg","spa-24.svg","sport-14.svg","sport-24.svg","sport-school-14.svg","sport-school-24.svg","sportcenter-14.svg","sportcenter-24.svg","sports-bar-14.svg","sports-bar-24.svg","spring-14.svg","spring-24.svg","stadium-14.svg","stadium-24.svg","stage-14.svg","stage-24.svg","standpipe-14.svg","standpipe-24.svg","stationery-store-14.svg","stationery-store-24.svg","stenograffia-14.svg","stenograffia-24.svg","street-14.svg","street-24.svg","subway-fallback-14.svg","subway-fallback-24.svg","supermarket-14.svg","supermarket-24.svg","sushi-14.svg","sushi-24.svg","swimming-pool-14.svg","swimming-pool-24.svg","synagogue-14.svg","synagogue-24.svg","tableware-14.svg","tableware-24.svg","tailor-14.svg","tailor-24.svg","taxi-14.svg","taxi-24.svg","tennis-14.svg","tennis-24.svg","theatre-14.svg","theatre-24.svg","ticket-office-14.svg","ticket-office-24.svg","tire-fitting-14.svg","tire-fitting-24.svg","tram-stop-14.svg","tram-stop-24.svg","trash-14.svg","trash-24.svg","travel-agency-14.svg","travel-agency-24.svg","trolley-14.svg","trolley-24.svg","university-14.svg","university-24.svg","urban-leisure-house-of-culture-14.svg","urban-leisure-house-of-culture-24.svg","urban-service-nursing-room-14.svg","urban-service-nursing-room-24.svg","vet-clinic-14.svg","vet-clinic-24.svg","veterinary-14.svg","veterinary-24.svg","viewpoint-14.svg","viewpoint-24.svg","waterfall-14.svg","waterfall-24.svg","waterpark-14.svg","waterpark-24.svg","wc-14.svg","wc-24.svg","wedding-14.svg","wedding-24.svg","well-14.svg","well-24.svg","wine-14.svg","wine-24.svg","work-14.svg","work-24.svg","ya-electro-station-14.svg","ya-electro-station-24.svg","ya-gas-station-14.svg","ya-gas-station-24.svg","yoga-14.svg","yoga-24.svg","zoo-14.svg","zoo-24.svg"],service:["bookmark-14.svg","bookmark-list-14.svg","geolocation-14.svg","home-14.svg","home-24.svg","like-14.svg","like-24.svg","lock-24.svg","message-24.svg","my-location-14.svg","personal-14.svg","poll-24.svg","search-14.svg","search-24.svg","show-map-14.svg","web-24.svg","work-14.svg","work-24.svg"],"yango-favicon":["favicon.svg"]},O={small:14,normal:24,large:38},q={light:{red:{ru:h(),uk:y(),en:y(),tr:y(),uz:y(),kk:y(),az:y(),ar:y(),"sr-Latn":y(),hy:y(),es:y()},"red-border":{ru:C(),uk:R(),en:R(),tr:R(),uz:R(),kk:R(),az:R(),ar:R(),"sr-Latn":R(),hy:R(),es:R()},black:{ru:u(),uk:l(),en:l(),tr:l(),uz:l(),kk:l(),az:l(),ar:l(),"sr-Latn":l(),hy:l(),es:l()},portal:{ru:L(),en:Z(),tr:Z(),uk:Z(),uz:Z(),kk:Z(),az:Z(),ar:Z(),"sr-Latn":Z(),hy:Z(),es:Z()}},dark:{red:{ru:b(),uk:E(),en:E(),tr:E(),uz:E(),kk:E(),az:E(),ar:E(),"sr-Latn":E(),hy:E(),es:E()},"red-border":{ru:P(),uk:I(),en:I(),tr:I(),uz:I(),kk:I(),az:I(),ar:I(),"sr-Latn":I(),hy:I(),es:I()},black:{ru:p(),uk:m(),en:m(),tr:m(),uz:m(),kk:m(),az:m(),ar:m(),"sr-Latn":m(),hy:m(),es:m()},portal:{ru:F(),en:N(),tr:N(),uk:N(),uz:N(),kk:N(),az:N(),ar:N(),"sr-Latn":N(),hy:N(),es:N()}}};function B(e,t){var n,s=e.type,u=e.name,c=e.size,l=(n=u.toLowerCase().replace(/\s+/g,"-"),t.isYango&&a[n]?a[n]:"yandex.ru"===t.domain&&i[n]?i[n]:"yandex.kz"===t.domain&&a[n]?a[n]:"tr"===t.lang&&o[n]?o[n]:r[n]||n);if(!l)return null;var d=l+"-"+O[c]+".svg";return U[s]&&U[s].includes(d)?t.staticHost+"static/v53/icons/"+s+"/"+d:null}function H(e,t){var n=e.name,r=e.size,o=B({type:"rubrics",name:n,size:r},t),i=B({type:"rubrics",name:"fallback",size:r},t);return o||i}function j(e){return"//yastatic.net/s3/front-maps-static/constructor-icons/"+e+".svg"}function W(e){var t=e.type,n=e.lang;return q[e.theme][t][n]}function G(e){return["ru","uk","kk"].includes(e.lang)}},25663:(e,t,n)=>{"use strict";n.r(t);var r=n(34788),o=n(18007),i=n(18188),a=n(11912),s=n(87363),u=n(61533),c=n(39705),l=n(81966),d=n(49297),p=n(88237),f=n(73754),m=n(56590),v=n(47220),h=n(96976),g=n(93813),y=n(16647),_=n(13688),b=n(67677),w=n(52869),E=n(7418),S=n(18),C=n(92830),k=n(31336),R=n(93265),x=n(33418),P=n(72393),M=n(13109),I=n(51806),T=n(43481),Z=n(41126),D=n(4307),L=n(35137),A=n(24135),N=n(77840),z=n(18413),F=n(86187),U=n(57689),O=n(32002),q=n(23840),B=n(14479),H=n(36522),j=n(37830),W=n(35501),G=n(15462),Y=(0,l.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,15289))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 15289}},{ssr:!1}),V=(0,l.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,46552))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 46552}},{ssr:!1}),K=[50,70,72,50],X={passive:!1},J=function(e){function t(t){(n=e.call(this,t)||this)._popupAnchorRef=s.createRef(),n._getInitialContent=function(){var e=n.props,t=null==(i=e.config.mapWidget)?void 0:i.activeMode,r=W.Y(null==(a=n.props.config.poiPreloadedResults)?void 0:a.items),o="whatshere"===t&&W.Y(null==(s=n.props.config.whatsherePreloadedResults)?void 0:s.items)?W.Y(null==(u=n.props.config.whatsherePreloadedResults)?void 0:u.items):void 0;if("routes"===t&&n.props.config.routerResponse)return{type:"route",data:{}};if("poi"===t&&r)return{type:"search",data:{result:r,coordinates:r.coordinates}};if("stop"===t&&e.config.masstransitStop)return{type:"masstransit-stop",data:{stop:e.config.masstransitStop,coordinates:e.config.masstransitStop.coordinates}};if(o)return{type:"search",data:{result:o,coordinates:o.coordinates}};if("search"===t&&(n.props.config.searchPreloadedResults||(null==(c=n.props.config.mapWidget)?void 0:c.activeObject))){var i,a,s,u,c,l,d,p,f,m=null==(d=n.props.config.mapWidget)?void 0:null==(l=d.activeObject)?void 0:l.items[0],v=(null==(p=n.props.config.searchPreloadedResults)?void 0:p.resultsCount)===1?n.props.config.searchPreloadedResults.items[0]:void 0,h=m||(null==(f=n.props.config.searchPreloadedResults)?void 0:f.exactResult)||v;if((null==h?void 0:h.type)==="business"||(null==h?void 0:h.type)==="toponym")return{type:"search",data:{result:h,coordinates:h.coordinates}};if(!h&&!(0,q.h)(e.mapSize))return{type:"search-list"}}return null},n._getInitialUserMapsState=function(){if("string"==typeof n.props.config.query.um)return{request:{um:n.props.config.query.um},response:n.props.config.userMap||void 0}},n._onUserMapsLoad=function(e){n._deepSetState({userMaps:{response:e},traffic:{isActive:(null==e?void 0:e.isTrafficShown)||n.state.traffic.isActive}},function(){(null==e?void 0:e.map.center)&&n._updateLocationRequest({center:e.map.center,zoom:e.map.zoom||16})})},n._getInitialRoutesState=function(){var e,t=null!=(e=({auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle"})[n.props.config.query.rtt])?e:"auto";return{routerResponse:n.props.config.routerResponse?p.N(n.props.config.routerResponse):null,routePoints:n.props.config.routePoints||[],travelMode:t,activeRouteIndex:Number(n.props.config.query.rtn)||0,formActiveFieldIndex:-1,isPointDragging:!1,isFormFocused:!1,isFormOpened:!1}},n._isRichRoutesClient=function(){var e;return!!(null==(e=n.props.config.mapWidget)?void 0:e.constructorApiValidKey)},n._onRouterResponseLoad=function(e){n.setState((0,r._)({},n.state,{routes:(0,r._)({},n.state.routes,{routerResponse:e,activeRouteIndex:0})})),n._updateContentData({type:"route",data:{}})},n._onRouterResponseError=function(e){n.setState((0,r._)({},n.state,{routes:(0,r._)({},n.state.routes,{routerResponse:e})}))},n._getIsPoiEnabled=function(e,t){return e>=295&&t>=400},n._deepSetState=function(e,t){n.setState(function(t){return(0,E.Z)(t,e)},t)},n._onGeolocationControlClick=function(){n._makeGeolocationRequest()},n._makeGeolocationRequest=function(){var e=n.props.config;n.setState({geolocation:{isStarted:!0}}),n._getLocationAction=w.Z.create(S.Z.getCurrentPosition(e,1500),{success:n._onGeolocationSuccess,fail:n._onGeolocationFail})},n._onGeolocationSuccess=function(e){n._updateLocationRequest({center:[e.longitude,e.latitude],duration:1e3,zoom:e.accuracy<=200?16:void 0}),n._deepSetState({geolocation:{isStarted:!1,accuracy:e.accuracy,currentPosition:[e.longitude,e.latitude]}})},n._onGeolocationFail=function(){var e;(null==(e=n.props.config.mapWidget)?void 0:e.userCoordinates)&&(n._updateLocationRequest({center:n.props.config.mapWidget.userCoordinates,duration:1e3}),n._deepSetState({geolocation:{isStarted:!1,currentPosition:n.props.config.mapWidget.userCoordinates,accuracy:1e3}}))},n._updateLocation=function(e){n._deepSetState({map:{location:e}})},n._updateLocationRequest=function(e){n.setState(function(t){return{map:(0,r._)({},t.map,{locationRequest:e})}})},n._onRoutesBoundsChange=function(e){var t=d.$Y({bounds:e},K,n.state.map.size);n._updateLocationRequest(t)},n._onSearchBoundsChange=function(e){var t=d.$Y({bounds:e},K,n.state.map.size);n._updateLocationRequest(t)},n._updateRuler=function(e){n._deepSetState({ruler:e})},n._onTrafficLevelChange=function(e){n._deepSetState({traffic:{level:e}})},n._onTrafficControlClick=function(){var e=n._getContentData("traffic");n._deepSetState({traffic:{isActive:!n.state.traffic.isActive},content:e?void 0:n.state.content})},n._onRichRoutesControlClick=function(){var e=!n.state.routes.isFormOpened,t=2===n.state.routes.routePoints.length,o=t?n.state.routes.routePoints:[f.Y(),f.Y()];n._deepSetState({routes:(0,r._)({isFormOpened:e},e?{isFormFocused:!0,routePoints:o,routerResponse:t?n.state.routes.routerResponse:null}:{})},function(){n._deepSetState({routes:{formActiveFieldIndex:n._getEmptyRoutePointIndex()}})})},n._setMapSize=function(e){n._deepSetState({map:{size:e}})},n._updateContentData=function(e){n.setState({content:e})},n._processMapObjectClick=function(e,t){var r=n._getEmptyRoutePointIndex();-1!==r?n._updateRoutePointByMap(e,r):t()},n._onTrafficLayerClick=function(e,t){var r,o=n.props;if(e){var i=e.properties,a=i.HotspotMetaData,s=i.vectorMetadata,u=(null==s?void 0:s.get("objectId"))||(null==a?void 0:a.id);if(u){var c=null==(r=e.geometry)?void 0:r.coordinates;n._processMapObjectClick({value:"",coords:c&&2===c.length?c:t.coordinates},function(){c&&2===c.length&&(w.Z.cancel(n._asyncRoadEventAction),n._asyncRoadEventAction=w.Z.create(C.Z.getRoadEvent(u,o.config),{success:function(e){e&&e.position&&n._updateContentData({type:"traffic",data:{event:e,coordinates:e.position}})},fail:function(){return n._resetContentData()}}))})}}},n._onRouteClick=function(e,t){var r,o=((null==(r=n.state.routes.routerResponse)?void 0:r.routes)||[]).indexOf(e);n._updateContentData({type:"route",data:{coordinates:t}}),n._deepSetState({routes:{activeRouteIndex:-1!==o?o:0}})},n._onUserMapsFeatureClick=function(e,t){n._processMapObjectClick({coords:t,value:""},function(){var r,o,i=null==(o=n.state.userMaps)?void 0:null==(r=o.response)?void 0:r.features[e];i&&n._updateContentData({type:"user-maps",data:{feature:i,coordinates:t}})})},n._onPlacemarkClick=function(e){var t={coords:e.coordinates,value:e.title,uri:e.uri};n._processMapObjectClick(t,function(){if(n.state.isPoiEnabled)n._updateContentData({type:"search",data:{result:e,coordinates:e.coordinates}});else{var t="business"===e.type?v.S({id:e.id,seoname:e.seoname}):h.h(e,e.region,{skipPointCheck:!0});if(t){var r=(0,_._)(g.e("/"+t,n.props.config));window.open(r,"_blank")}}})},n._onMasstransitPlacemarkClick=function(e){var t,r={coords:e.coordinates,value:e.name,uri:null==(t=e.searchResult)?void 0:t.uri};n._processMapObjectClick(r,function(){if(n.state.isPoiEnabled)n._updateContentData({type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}});else{var t=e.region?y.u(e,e.region):"";if(t){var r=(0,_._)(g.e("/"+t,n.props.config));window.open(r,"_blank")}}})},n._resetContentData=function(){n._deepSetState({content:null})},n._updateRoutePointDragging=function(e){u.flushSync(function(){var t;n._deepSetState({routes:{isPointDragging:e},content:(null==(t=n.state.content)?void 0:t.type)==="route"?null:n.state.content})})},n._updateRoutePointByMap=function(e,t){if(n.state.routes.isPointDragging){var r=(0,a._)(n.state.routes.routePoints);r[t]=e,n._deepSetState({routes:{routePoints:r}})}else n._getRoutePointAction=w.Z.create((0,x.Kc)(e,n.props.config,"router").catch(function(){return null}),{success:function(r){r?(e.value=(null==r?void 0:r.title)||"",e.input=(null==r?void 0:r.title)||"",e.searchResult=r):e.coords&&(e.value=(0,c.s)(e.coords),e.input=(0,c.s)(e.coords));var o=(0,a._)(n.state.routes.routePoints);o[t]=e,n._deepSetState({routes:{routePoints:o}})}})},n._getEmptyRoutePointIndex=function(e){return(void 0===e&&(e=n.state.routes.routePoints),n._isRichRoutesClient()&&!n.state.routes.isFormOpened)?-1:e.findIndex(function(e){return!e.coords})},n._getRoutePointsDraggableIndexes=function(){return n._isRichRoutesClient()?(n.state.routes.routePoints||[]).map(function(e,t){return t}):(n.props.config.routePoints||[]).reduce(function(e,t,n){return t.coords||e.push(n),e},[])},n._onRoutesFormTravelModeChange=function(e){n._deepSetState({routes:{travelMode:e}})},n._onRoutesFormFocus=function(e){n._deepSetState({routes:{isFormFocused:!0,formActiveFieldIndex:e}})},n._onRoutesFormBlur=function(){n._deepSetState({routes:{isFormFocused:!1,formActiveFieldIndex:-1}})},n._onRoutesFormReset=function(){n._deepSetState({routes:{routePoints:[f.Y(),f.Y()],routerResponse:null}})},n._onRoutesFormClose=function(){n._deepSetState({routes:{isFormOpened:!1}})},n._onRoutesFormRoutePointSubmit=function(e,t){var r=(0,a._)(n.state.routes.routePoints);r[t]=e;var o=n._getEmptyRoutePointIndex(r);n._deepSetState({routes:{routePoints:r,formActiveFieldIndex:o}})},n._onRoutesFormRoutePointInputChange=function(e,t){var r=(0,a._)(n.state.routes.routePoints);r[t]=e,n._deepSetState({routes:{routePoints:r}})},n._onRoutesFormRoutePointClear=function(e){var t=(0,a._)(n.state.routes.routePoints);t[e]=f.Y(),n._deepSetState({routes:{routePoints:t,routerResponse:null}})},n._onRoutesFormRoutePointMovePosition=function(e,t){var r=(0,a._)(n.state.routes.routePoints),o=(0,i._)(r.splice(e,1),1)[0];r.splice(t,0,o),n._deepSetState({routes:{routePoints:r}})},n._onPoiClick=function(e,t){var r=e.properties.uri,o=e.geometry&&e.geometry.coordinates||t.coordinates;n._processMapObjectClick({coords:o,value:e.properties.name||"",uri:r},function(){n.setState({poiData:{coordinates:o,feature:e}})})},n._getCursor=function(){var e=n._getEmptyRoutePointIndex();if(-1!==e&&!n.props.config.uatraits.isPhone&&!n.state.ruler.isEnabled)return m.B(e,n.state.routes.routePoints)+"_"+e},n._getContentData=function(e){var t;if((null==(t=n.state.content)?void 0:t.type)===e)return n.state.content},n._preventZoomByPinching=function(e){"scale"in e&&1!==e.scale&&e.touches.length>1&&e.preventDefault()},n._renderRichRoutesControl=function(){return n._isRichRoutesClient()?s.createElement(Y,{isActive:n.state.routes.isFormOpened,onClick:n._onRichRoutesControlClick,buttonContainerRef:n._popupAnchorRef}):null},n._renderInMapsControl=function(e){return j.m(n.props.config)?null:s.createElement(B.Z,{state:n.state,size:e})},n._renderGeolocationPin=function(){return n.state.geolocation.currentPosition&&n.state.geolocation.accuracy?s.createElement(P.Z,{currentPosition:n.state.geolocation.currentPosition,accuracy:n.state.geolocation.accuracy}):null},n._renderTrafficLayer=function(){return n.state.traffic.isActive?s.createElement(D.Z,{showRoadEvents:G.W(n.state,n.props.config),mapLocation:n.state.map.location,mapSize:n.state.map.size,updateLocationRequest:n._updateLocationRequest,onClick:n._onTrafficLayerClick,onTrafficLevelChange:n._onTrafficLevelChange,resetContentData:n._resetContentData,content:n._getContentData("traffic")}):null},n._renderUserMaps=function(){return n.state.userMaps?s.createElement(A.Z,{userMaps:n.state.userMaps,mapLocation:n.state.map.location,mapSize:n.state.map.size,updateLocationRequest:n._updateLocationRequest,onFeatureClick:n._onUserMapsFeatureClick,cursor:n._getCursor(),resetContentData:n._resetContentData,content:n._getContentData("user-maps"),onLoad:n._onUserMapsLoad}):null},n._renderSearchResult=function(){return s.createElement(N.Z,{mapSize:n.state.map.size,mapLocation:n.state.map.location,isTrafficLayerEnabled:n.state.traffic.isActive,updateLocationRequest:n._updateLocationRequest,content:n.state.isPoiEnabled?n._getContentData("search"):void 0,onContentClose:n._resetContentData,onStaticPlacemarkClick:n._onPlacemarkClick})},n._renderSearchComponentWithControl=function(){var e;return s.createElement(O.Z,{mapLocation:n.state.map.location,mapSize:n.state.map.size,activeResult:null==(e=n._getContentData("search"))?void 0:e.data.result,onSearchBoundsChange:n._onSearchBoundsChange,isResultsListShown:!!n._getContentData("search-list"),onResultClick:n._onPlacemarkClick,onResultsListOpen:function(){return n._updateContentData({type:"search-list"})},onResultsListClose:function(){return n._updateContentData(null)}})},n._renderRichRoutesForm=function(){var e=n.state;return n._isRichRoutesClient()&&e.routes.isFormOpened?s.createElement(V,{travelMode:e.routes.travelMode,routePoints:e.routes.routePoints,routerResponse:e.routes.routerResponse,activeFieldIndex:e.routes.formActiveFieldIndex,isFocused:e.routes.isFormFocused,mapLocation:e.map.location,mapSize:e.map.size,popupAnchorRef:n._popupAnchorRef,onTravelModeChange:n._onRoutesFormTravelModeChange,onReset:n._onRoutesFormReset,onClose:n._onRoutesFormClose,onFocus:n._onRoutesFormFocus,onBlur:n._onRoutesFormBlur,onRoutePointSubmit:n._onRoutesFormRoutePointSubmit,onRoutePointInputChange:n._onRoutesFormRoutePointInputChange,onRoutePointClear:n._onRoutesFormRoutePointClear,onRoutePointMovePosition:n._onRoutesFormRoutePointMovePosition}):null},n._renderRoutes=function(){var e=n.state;return s.createElement(s.Fragment,null,s.createElement(L.Z,{routerResponse:e.routes.routerResponse,activeRouteIndex:e.routes.activeRouteIndex,routePoints:e.routes.routePoints,mapLocation:e.map.location,mapSize:e.map.size,emptyPointIndex:n._getEmptyRoutePointIndex(),isTrafficLayerEnabled:e.traffic.isActive,isRoutePointDragging:e.routes.isPointDragging,cursor:n._getCursor(),setDragging:n._updateRoutePointDragging,draggablePointIndexes:n._getRoutePointsDraggableIndexes(),updateRoutePoint:n._updateRoutePointByMap,onRouteClick:n._onRouteClick,onBoundsChange:n._onRoutesBoundsChange,resetContentData:n._resetContentData,content:n._getContentData("route")}),s.createElement(U.Z,{routePoints:e.routes.routePoints,travelMode:e.routes.travelMode,onLoad:n._onRouterResponseLoad,onError:n._onRouterResponseError}),n._renderRichRoutesForm())},n._renderBanner=function(){if(!(null==(e=n.props.config.banner)?void 0:e.blockIds.widget))return null;var e,t=n.props.config.banner.blockIds.widget,r=n.props.config.banner.blockIds.largeWidget;return s.createElement(H.default,{id:t,largeBannerId:r,mapSize:n.state.map.size,usePortal:!0})};var n,o,l,k=d.$Y(n.props.config.mapLocation,K,{width:t.mapSize.width,height:t.mapSize.height}),M=n._getIsPoiEnabled(t.mapSize.width,t.mapSize.height),I=n._getInitialUserMapsState();return n.state={placemarks:t.config.query.pt?b.Q(t.config.query.pt):void 0,map:{location:k,size:t.mapSize},geolocation:{isStarted:!1},ruler:(0,R.H)(t.config),traffic:{isActive:(null==(o=t.config.query.l)?void 0:o.includes("trf"))||(null==I?void 0:null==(l=I.response)?void 0:l.isTrafficShown),level:null},routes:n._getInitialRoutesState(),content:n._getInitialContent(),isPoiEnabled:M,userMaps:I},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.body.classList.add("_app_ready"),document.addEventListener("touchmove",this._preventZoomByPinching,X)},n.componentDidUpdate=function(e,t){if(t.map.size!==this.state.map.size){var n=this._getIsPoiEnabled(this.state.map.size.width,this.state.map.size.height);this._deepSetState({isPoiEnabled:n})}},n.componentWillUnmount=function(){w.Z.cancel(this._getLocationAction),w.Z.cancel(this._getRoutePointAction)},n.render=function(){var e,t=this.state,n=!!(null==(e=this.props.config.flyover)?void 0:e.isEnabled),r=j.m(this.props.config);return s.createElement(I.Z,{location:t.map.location,locationRequest:t.map.locationRequest,margin:K,onLocationChange:this._updateLocation,onSizeChange:this._setMapSize,isPoiEnabled:!n&&!r&&this.state.isPoiEnabled,onPoiClick:n||r?void 0:this._onPoiClick},s.createElement(T.ZP,{mapSize:t.map.size,geolocation:{isStarted:t.geolocation.isStarted,onClick:this._onGeolocationControlClick},location:t.map.location,ruler:{isEnabled:t.ruler.isEnabled,updateRuler:this._updateRuler},traffic:{isActive:t.traffic.isActive,level:t.traffic.level,onClick:this._onTrafficControlClick},search:{render:this._renderSearchComponentWithControl},inMaps:{render:this._renderInMapsControl},routes:{render:this._renderRichRoutesControl}}),this._renderBanner(),this._renderUserMaps(),this._renderGeolocationPin(),this._renderTrafficLayer(),this._renderRoutes(),this._renderSearchResult(),s.createElement(Z.Z,{ruler:t.ruler,updateRuler:this._updateRuler}),s.createElement(M.Z,{points:t.placemarks}),s.createElement(z.Z,{content:t.isPoiEnabled?this._getContentData("masstransit-stop"):void 0,mapSize:t.map.size,mapLocation:t.map.location,updateLocationRequest:this._updateLocationRequest,onContentClose:this._resetContentData,onStaticPlacemarkClick:this._onMasstransitPlacemarkClick}),s.createElement(F.Z,{poiData:t.poiData,updateContent:this._updateContentData}))},t}(s.Component);t.default=(0,k.ZP)(J)},36522:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var r,o,i=n(18188),a=n(87363),s=n(44748),u=n(18007),c=n(65807),l="yaContextCb",d=!1,p={load:function(e){return d||(r=new Promise(function(t,n){Array.isArray(window[l])||(window[l]=[]),window[l].push(function(){return t(window.Ya.Context.AdvManager)}),(0,c.Z)(e).catch(n)})).then(function(){d=!0}),r}},f=n(52869),m=n(31336),v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onLoadEnd=function(e){n.props.onLoadEnd&&n.props.onLoadEnd(e)},n.state={advertManager:o,isLoadingFailed:!1},n}(0,u._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props.config.hosts.advertLoader;!o&&t&&(this._loadAction=f.Z.create(p.load(t),{success:function(t){o=t,e.setState({advertManager:o},function(){return e._onLoadEnd(o)})},fail:function(){e.setState({isLoadingFailed:!0},function(){return e._onLoadEnd()})}}))},n.componentWillUnmount=function(){f.Z.cancel(this._loadAction)},n.render=function(){return this.state.advertManager?this.props.children(this.state.advertManager):this.state.isLoadingFailed&&this.props.renderFallback?this.props.renderFallback():this.props.renderLoading?this.props.renderLoading():null},t}(a.Component),h=(0,m.ZP)(v),g=n(34788);n(72450);var y=n(55877),_=n.n(y),b=n(90585),w=n(28342),E=n(77558),S=n(49481),C=n(44953),k=function(e){var t=(0,i._)((0,S.Y)({threshold:.5,triggerOnce:!0}),3),n=t[0],r=t[2];return a.createElement(a.Fragment,null,e.children(n),void 0!==r?a.createElement(C.ZP,{name:"advert_visible",nodeState:{visible_part:r.intersectionRatio}}):null)},R=n(41740),x=n(85172),P=(0,s.Z)("banner-view");function M(e){return Math.floor(e.getTime()/1e3)}var I=(0,b.Z)(m.ZP,w.ZP,x.ZP)(function(e){function t(t){var n;return(n=e.call(this,t)||this)._isWindowActive=!1,n._refreshCount=0,n._lastShowSeconds=0,n._isVisibleEnough=!1,n._setWindowActive=function(){n._isWindowActive=!0},n._setWindowInactive=function(){n._isWindowActive=!1},n._getElementId=function(){return String(n._bannerContainerId)+n.props.id},n._init=function(){n._refreshCount=0,n._refresh(),n._refreshBannerIntervalId&&window.clearInterval(n._refreshBannerIntervalId),n._refreshBannerIntervalId=window.setInterval(n._clockTick,1e3)},n._refresh=function(){var e,t=n.props,r=null==(e=t.id)?void 0:e.trim();if(r){n._lastShowSeconds=M(t.getToday()),n._refreshCount++;var o=(0,g._)({},t.extParams,{"test-ids":t.testIds});t.advertManager.render({blockId:r,renderTo:n._getElementId(),cspNonce:t.cspNonce,extParams:o,format:t.format,position:t.position,darkTheme:"dark"===t.theme,allowRepeatAds:{screen:-1},onError:n._onError,onRender:n._onRender,onHide:t.onHide})}},n._onError=function(e){var t=n.props,r=t.config;null==t.onDisplay||t.onDisplay.call(t),null==t.onError||t.onError.call(t),"VIDEO_ERROR"!==e.code&&(0,R.H)(Error("AdvertManager "+e.type+" ("+e.code+"): "+e.text),{config:r,block:"BannerView",additional:{id:t.id,format:t.format,position:t.position}})},n._onRender=function(e){n.state.isAdvertRendered||n.setState({isAdvertRendered:!0}),null==n.props.onRender||n.props.onRender.call(n.props,e),null==n.props.onDisplay||n.props.onDisplay.call(n.props)},n._clockTick=function(){!(n._refreshCount>20)&&n._isWindowActive&&n._isVisibleEnough&&M(n.props.getToday())-n._lastShowSeconds>=35&&n._refresh()},n._onIntersectionChange=function(e){n._isVisibleEnough=e},n._bannerContainerId=_().v4().replace(/-/g,""),n.state={isAdvertRendered:!1},n}(0,u._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isWindowActive=!0,window.document.addEventListener("keydown",this._setWindowActive),this._init()},n.componentDidUpdate=function(e){e.id!==this.props.id&&this._init()},n.componentWillUnmount=function(){window.document.removeEventListener("keydown",this._setWindowActive),window.clearInterval(this._refreshBannerIntervalId);var e,t=null==(e=this.props.id)?void 0:e.trim();this.props.advertManager.destroy({blockId:t,renderTo:this._getElementId()})},n.render=function(){var e=this,t=[P(),this.props.className].filter(Boolean).join(" ");return a.createElement("div",{"aria-hidden":!0,tabIndex:-1},a.createElement(S.Z,{as:"div",threshold:.3,onChange:this._onIntersectionChange},a.createElement(k,null,function(n){return a.createElement("div",{ref:e.state.isAdvertRendered?n:void 0,className:t,id:e._getElementId(),style:{height:e.props.maxHeight,maxHeight:e.props.maxHeight}})})),a.createElement(E.Z,{type:"focus",listener:this._setWindowActive}),a.createElement(E.Z,{type:"blur",listener:this._setWindowInactive}))},t}(a.Component)),T=n(43481),Z=(0,s.Z)("map-widget-banner-component"),D=function(e){var t=(0,m.ZR)(),n=(0,i._)(a.useState(!1),2),r=n[0],o=n[1],s=(0,i._)(a.useState(!1),2),u=s[0],c=s[1],l=(0,i._)(a.useState(!1),2),d=l[0],p=l[1],f=(0,i._)(a.useState(!1),2),v=f[0],g=f[1],y=e.mapSize,_=t.uatraits.isMobile;a.useEffect(function(){g(!(_?y.height>=250&&y.width>=250:y.height>=200&&y.width>=250)),p(y.height>600&&!t.uatraits.isMobile)},[y,g,_,t]);var b=d?e.largeBannerId:e.id,w="string"==typeof b?b:void 0;if(r||v||!w)return null;var E=e.usePortal?T.v7:a.Fragment;return a.createElement(E,null,a.createElement("div",{className:Z({displayed:u,large:d})},a.createElement("div",{className:Z("content")},a.createElement(h,{onLoadEnd:function(e){return o(!e)},renderFallback:function(){return null}},function(e){return a.createElement(I,{id:w,maxHeight:d?"90px":_?"50px":"56px",advertManager:e,cspNonce:t.cspNonce,onError:function(){return o(!0)},onDisplay:function(){return c(!0)}})}))))}},14479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var r=n(87363),o=n(83466),i=n(34788),a=n(18188),s=n(11912),u=n(39705),c=n(95930),l=n(80283),d=n(4670);function p(e){return e[0][0]=Math.round(e[0][0]),e[0][1]=Math.round(e[0][1]),e[1][0]=Math.round(e[1][0]),e[1][1]=Math.round(e[1][1]),e}var f=n(37048),m=n(37806),v=n(36897),h=n(38024),g=n(28361),y=n(73754),_=n(15462),b=n(35501),w=n(6241);function E(e){return e.isPoiEnabled&&!!(e.content&&["masstransit-stop","search"].includes(e.content.type))}function S(e){return{params:{ll:(0,u.s)(e.map.location.center),z:Math.round(100*e.map.location.zoom)/100}}}function C(e){var t;return e.isPoiEnabled&&(null==(t=e.content)?void 0:t.type)==="masstransit-stop"?{params:{masstransit:{stopId:e.content.data.stop.id},mode:"stop"}}:{}}function k(e,t){var n,r,o,i,a=b.Y(null==(r=t.mapWidget)?void 0:null==(n=r.activeObject)?void 0:n.items);if(e.isPoiEnabled&&(null==(o=e.content)?void 0:o.type)==="search"){var s=e.content.data.result,u={};return"business"!==s.type||e.routes.routerResponse||t.searchPreloadedResults?u.poi={uri:s.uri,point:s.coordinates}:u.orgpage={id:s.id},{params:u}}return!E(e)&&a&&(null==(i=t.mapWidget)?void 0:i.activeMode)==="search"?{params:{poi:{uri:a.uri,point:a.coordinates}}}:{}}function R(e,t){var n,r,o,i;return(null==(n=t.mapWidget)?void 0:n.activeMode)==="search"?{params:{filter:t.query.filter,text:null==(r=t.searchPreloadedResults)?void 0:r.requestQuery,"display-text":null==(i=t.searchPreloadedResults)?void 0:null==(o=i.chain)?void 0:o.name}}:{}}function x(e,t){var n=D(e,t);if(n)return{textContent:"Как добраться",params:(0,i._)({},g.D({routerResponse:null,travelMode:e.routes.travelMode,detailedIndex:-1,activeRouteIndex:0,viaIndexes:[],routePoints:[y.Y(),n]},t),{mode:"routes"})};if(e.routes.routePoints.length>0){var r,o,a,s,u,v,h,_,b,w=g.D({routerResponse:null,travelMode:e.routes.travelMode,detailedIndex:-1,activeRouteIndex:e.routes.activeRouteIndex,viaIndexes:(null==(v=e.routes.routerResponse)?void 0:v.viaIndexes)||[],routePoints:e.routes.routePoints},t),S=(0,i._)({},w,{rtm:t.query.rtm,mode:(null==(h=t.mapWidget)?void 0:h.activeMode)!=="routes"||E(e)?void 0:"routes"}),C=null==(_=e.routes.routerResponse)?void 0:_.routes[e.routes.activeRouteIndex];return{params:S,textContent:!E(e)&&(!t.searchPreloadedResults||(null==(b=t.mapWidget)?void 0:b.activeMode)==="routes")&&(null==C?void 0:C.bounds)&&(r=e.map.location.bounds,o=C.bounds,a=(0,c.Z)(m.m6),s=(0,l.C)((0,f.n)(r,m.m6),a),u=(0,l.C)((0,f.n)(o,m.m6),a),s.some(function(e){return u.some(function(t){return(0,d.Y)(p(e),p(t))})}))?"Открыть маршрут":void 0}}return{}}function P(e,t){return{params:{rl:e.ruler.points.slice(0,t.ruler.maxCount).map(function(e,t,n){var r=e.coordinates,o=n[t-1]&&n[t-1].coordinates,i=0===t?r:[r[0]-o[0],r[1]-o[1]];return(0,u.s)(i)}).join("~")||null}}}function M(e,t){return{layers:{trf:e.traffic.isActive,trfe:e.traffic.isActive&&_.W(e,t)}}}function I(e){var t=e.userMaps;return t?{params:{um:t.request.um}}:{}}function T(e,t){var n,r,o,i,a,c,l,d,p,f=D(e,t),m=e.content&&"data"in e.content&&e.content.data.coordinates,h=E(e)||(null==(n=t.mapWidget)?void 0:n.activeMode)!=="search"?null==(r=b.Y(null==(i=t.mapWidget)?void 0:null==(o=i.activeObject)?void 0:o.items))?void 0:r.coordinates:void 0,g=null==(a=b.Y(null==(c=t.poiPreloadedResults)?void 0:c.items))?void 0:a.coordinates,y=null==(l=b.Y(null==(d=t.whatsherePreloadedResults)?void 0:d.items))?void 0:l.coordinates,_=null==(p=t.masstransitStop)?void 0:p.coordinates,w=(0,s._)((e.placemarks||[]).map(function(e){return e.coordinates})).concat([h,g,y,_]).filter(function(e){return!!(e&&(!(null==f?void 0:f.coords)||!(0,v.J)(null==f?void 0:f.coords,e))&&(!m||!(0,v.J)(m,e)))});return{params:{pt:w.length>0?w.map(function(e){return(0,u.s)(e)}).join("~"):void 0}}}function Z(){return{params:{source:"mapframe",utm_source:"mapframe",from:"mapframe"}}}function D(e,t){if(!((null==(n=t.mapWidget)?void 0:n.activeMode)==="search"||E(e))){var n,r,o,i=[],a=b.Y(null==(r=t.poiPreloadedResults)?void 0:r.items);t.poiPreloadedResults&&t.poiPreloadedResults.resultsCount>0&&a&&i.push({coords:a.coordinates,value:a.title});var s=b.Y(null==(o=t.whatsherePreloadedResults)?void 0:o.items);return t.whatsherePreloadedResults&&t.whatsherePreloadedResults.resultsCount>0&&s&&i.push({coords:s.coordinates,value:s.title}),t.masstransitStop&&i.push({coords:t.masstransitStop.coordinates,value:t.masstransitStop.name}),i.find(function(t){return(0,h.V)(e.map.location.bounds,t.coords)})}}var L=n(31336),A=n(93522),N=n(57793),z=function(e){var t,n,u,c,l,d,p,f=(0,L.ZR)(),m=(t=e.state,c=void 0===(u=(n=[S,C,k,R,x,P,M,I,T,Z].reduce(function(e,n){var r=n(t,f);return{textContent:e.textContent||r.textContent,params:(0,i._)({},e.params||{},r.params||{}),layers:(0,i._)({},e.layers||{},r.layers||{})}},{})).params)?{}:u,l=n.layers,d=n.textContent,c.l=Object.entries(void 0===l?{}:l).reduce(function(e,t){var n=(0,a._)(t,2),r=n[0],o=n[1];return(0,s._)(e.filter(function(e){return e!==r})).concat((0,s._)(o?[r]:[]))},[]).join(",")||null,p=Object.entries(c).reduce(function(e,t){var n=(0,a._)(t,2),r=n[0],o=n[1];return null!==o&&(e[r]=o),e},{}),{url:w.render(f.hosts.maps,p),textContent:d}),v=m.url,h=m.textContent,g=function(){switch(e.size){case"tiny":break;case"small":return"Открыть в Картах";case"medium":return h||"Открыть в Яндекс Картах"}return null},y=(0,N.d)(e.state.map.size,f),_=function(e){return r.createElement("div",{style:{marginLeft:""+y.toFixed(0)+"px"},ref:e},r.createElement(o.Z,{url:v},g()))};return"tiny"===e.size?r.createElement(A.Z,{text:"Открыть в Яндекс Картах",position:"right",isAir:!0},function(e){return _(e)}):_()}},51806:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ev});var r,o,i=n(34788),a=n(18007),s=n(11912),u=n(87363),c=n(50576),l=n(44748),d=n(31336),p=n(79429),f=n(2267),m=n(18188),v=n(90585),h=n(30473),g=n(99870),y=n(78597),_=n(52869),b=n(36897),w=n(49297),E=n(12574),S=n(1477),C=n(77558),k=n(99111),R=n(76475),x=n(48223),P=n(49771),M={failIfMajorPerformanceCaveat:!0,antialias:!1,depth:!0,stencil:!0,alpha:!1},I=[{renderer:/SwiftShader/},{renderer:/Parallels/}];function T(e){try{var t=document.createElement("canvas");t.width=1,t.height=1;var n=(0,x._)({},M);(null==e?void 0:e.allowSoftware)&&(n.failIfMajorPerformanceCaveat=!1);var r=t.getContext("webgl",n);if(r)return r}catch(o){}D(["getContext:null"])}function Z(e){if(void 0===r){var t=e||T();if(t)try{r=function(e){for(var t=!0,n=[],r=["requestAnimationFrame","Worker","URL","Blob","fetch","AbortController","ArrayBuffer","Set","Map"],o=0;o<r.length;o++){var i=r[o];window[i]||(t=!1,n.push("WindowPropertyNotExist-"+i))}"function"!=typeof Math.trunc&&(t=!1,n.push("MathTrunc")),0===e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(t=!1,n.push("MAX_VERTEX_TEXTURE_IMAGE_UNITS")),e.getExtension("OES_vertex_array_object")||(t=!1,n.push("OES_vertex_array_object"));var a=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);a&&0!==a.precision||(t=!1,n.push("Highp")),function(e){if(!e)return!1;var t=e.createShader(e.VERTEX_SHADER);if(!t)return!1;e.shaderSource(t,"#version 100\nattribute vec2 p;\nvoid main() {\n    gl_Position = vec4(p,0,1);\n    gl_PointSize = 1.0;\n}"),e.compileShader(t);var n=e.createShader(e.FRAGMENT_SHADER);if(!n)return!1;e.shaderSource(n,"#version 100\nvoid main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"),e.compileShader(n);var r=e.createProgram();if(!r)return!1;e.attachShader(r,t),e.attachShader(r,n),e.bindAttribLocation(r,0,"p"),e.linkProgram(r);var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.clearColor(0,1,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(r),e.drawArrays(e.POINTS,0,1);var i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteBuffer(o),e.deleteShader(t),e.deleteShader(n),e.deleteProgram(r),255===i[0]}(e)||(t=!1,n.push("TestPoints")),function(){if("undefined"==typeof WebAssembly||"function"!=typeof WebAssembly.validate||"function"!=typeof WebAssembly.instantiate)return!1;var e=new Uint8Array([0,97,115,109,1,0,0,0]);return WebAssembly.validate(e)}()||(t=!1,n.push("NoWebAssembly"));for(var s=e.getExtension("WEBGL_debug_renderer_info"),u=s&&e.getParameter(s.UNMASKED_VENDOR_WEBGL),c=s&&e.getParameter(s.UNMASKED_RENDERER_WEBGL),l="string"==typeof u?u:"",d="string"==typeof c?c:"",p=navigator.userAgent,f=!!function(){var e;try{var t=document.createElement("canvas");if(t.width=1,t.height=1,!(e=t.getContext("webgl2",M)))throw Error("failed to get context");return e}catch(n){return}}(),m=0;m<I.length;m++)if(function(e,t){return Object.keys(e).every(function(n){var r=e[n],o=t[n];return!r||r.test(o)})}(I[m],{vendor:l,renderer:d,ua:p})){t=!1,n.push("BlacklistedGpu");break}return{supported:t,reasonsFailed:n,info:{vendor:l,renderer:d,userAgent:p,webgl2:f}}}(t)}catch(n){D(["detectFeatures:error"])}else D(["getContext:null"])}return r}function D(e){r={supported:!1,reasonsFailed:["HasWebGl"].concat((0,P._)(e)),info:{userAgent:navigator.userAgent,webgl2:!1}}}var L=n(84238),A=n(38614),N=n(44953),z=n(41740),F=n(1251),U="undefined"==typeof window,O=[],q=0;function B(){U=!0,O.forEach(function(e){return e()}),o&&o.disconnect()}U||(0,F.Z)(function(){if(!window.PerformanceObserver||!window.PerformanceLongTaskTiming||!window.performance||!window.performance.now){setTimeout(B,5e3);return}(o=new window.PerformanceObserver(function(e){var t=e.getEntries().pop();t&&(q=t.startTime+t.duration)})).observe({entryTypes:["longtask"]}),function e(){var t=window.performance.now();if(t>2e4){B();return}(q?3e3-(t-q):3e3)<=0?B():setTimeout(e,1e3)}()});var H=function(e){U?e():O.push(e)},j=n(18898),W=n(85172),G=function(){function e(){}var t=e.prototype;return t.submit=function(e,t){if("0"!==t.visible)for(var n=this._getViewportSuffix(t),r=0,o=Object.keys(t);r<o.length;r++){var i=o[r],a=parseFloat(t[i]);"firstViewport"!==i&&"visible"!==i&&Number.isFinite(a)&&(0,z.s4)(""+e+n+"."+i,a)}},t._getViewportSuffix=function(e){if(!("firstViewport"in e))return"";switch(e.firstViewport){case"0":return".viewport_regular";case"1":return".viewport_first"}return""},e}(),Y=function(){return Promise.all([n.e("ymaps").then(n.bind(n,19905)),n.e("ymaps").then(n.bind(n,19377)),n.e("ymaps").then(n.t.bind(n,58040,23))]).then(function(e){var t=(0,m._)(e,3),n=t[0],r=t[1].EventBlockerLayer,o=t[2];return new Promise(function(e){return setTimeout(function(){return e([(0,i._)({},n,{EventBlockerLayer:r}),o.default])},0)})})},V=(0,v.Z)(d.ZP,W.ZP),K=function(e,t,n){var r=document.createElement("canvas");r.width=256,r.height=256;var o=r.getContext("2d");return o&&(o.lineWidth=1,o.strokeStyle="rgba(255, 0, 0, 0.5)",o.strokeRect(0,0,256,256),o.font="16px Arial",o.textBaseline="top",o.fillStyle="rgb(255, 0, 0)",o.fillText("x="+e+", y="+t+", z="+n,10,10)),Promise.resolve({image:r})},X=function(){var e;return(null==(e=(0,d.ZR)().debug)?void 0:e.params.includes("tiles"))?u.createElement(R.ZP,{layer:"debugTiles",dataSource:{type:"tile",raster:{type:"ground",fetchTile:K}}}):null},J=V(function(e){function t(t){(o=e.call(this,t)||this)._isMapCreated=!1,o._ref=u.createRef(),o._onYmaps3Load=function(e){var t=(0,m._)(e,2),n=t[0],r=t[1];o._ymaps3=n,n.errorLoggerFactory(function(e){var t=new r;return t.initErrors(e),t.logError}),o._createMap()},o._handleMapLocationRequest=function(e){var t=o._map;if(o._location&&e&&t){var n=o._location,r="bounds"in e?(0,w.$Y)({bounds:e.bounds},o._margin,o._getSize(),o.props.config.uatraits.isMobile||"snap"===t.effectiveZoomRounding):void 0,i=n.center,a=n.zoom;r?i=r.center:"center"in e&&(i=e.center),r?a=r.zoom:"zoom"in e&&e.zoom&&(a=e.zoom),a===n.zoom&&(0,b.J)(i,n.center)||t.animateCenterAndZoom(i,a,e.duration||0)}},o._createMap=function(){var e=o.props,t=o.state,i=o._isElementProvided?e.element:o._ref.current;if(i&&!o._isMapCreated&&o._ymaps3){o._isMapCreated=!0,e.config.query["disable-vector-force"]?(A.Z.set("disable_vector_force",!0),o.setState({isVectorDisabledForce:!0})):A.Z.get("disable_vector_force")&&o.setState({isVectorDisabledForce:!0});var a,u,c=e.locationRequest,l=c&&"center"in c&&c.center||e.initialLocation.center,d=c&&"zoom"in c&&c.zoom||e.initialLocation.zoom;o._location={center:l,zoom:d},o._margin=e.marginRequest,o._camera=e.initialCamera||{azimuth:0,tilt:0};var f=(0,g.mt)({config:e.config,theme:e.theme,modeFutureSelected:e.modeFutureSelected,discoveryHomeIntentSlug:e.discoveryHomeIntentSlug}),v=o._getMapMode(),y=o._ymaps3.YaMap,_=Object.values(g.UZ),b=(0,g.c8)(_,o._ymaps3.EventBlockerLayer,function(e){return f[e]},e.config),w=b.topRasterLayers,E=b.mainLayers;i.dir="ltr";var S=new y({mode:v,element:i,center:l,zoom:d,margin:o._margin,zoomRange:e.zoomRange||{min:2,max:21},dataSources:f,topRasterLayers:w,mainLayers:E,behaviors:e.behaviors,zoomRounding:e.zoomRounding,eventObjectsFilter:e.eventObjectsFilter,nonRotatableRasterSources:g.Iw,experiments:{useCpuConflictResolver:e.config.experiments.ui.useCpuConflictResolver,useExperimentalColliding:e.config.experiments.ui.useExperimentalColliding,useCollidingCandidates:e.config.experiments.ui.useCollidingCandidates,useCollidingTextOptional:e.config.experiments.ui.useCollidingTextOptional,disableTileColliding:e.config.experiments.ui.disableTileColliding}});if(e.config.query["no-map"]&&i.remove(),e.initialCamera&&(e.initialCamera.azimuth||e.initialCamera.tilt)&&S.on("vectorStart",function(){var t,n;(null==(t=e.initialCamera)?void 0:t.azimuth)&&(0,j.Cm)(S,e.initialCamera.azimuth),(null==(n=e.initialCamera)?void 0:n.tilt)&&(0,j.lp)(S,e.initialCamera.tilt)}),window.yandex_map=S,S.events.clickTimeout=300,S.events.waitHotspotsTimeout=1e3,(0,h.r1)().has.touch?o._ymaps3.loadHotspotsForViewport(S):o._ymaps3.loadHotspotsByPointerPosition(S),e.vector&&e.config.isVectorEnabled&&!t.isVectorDisabledForce){if(function(){if(r)return r.supported;if(!window.WebGLRenderingContext)return D(["WebGLRenderingContext:absent"]),!1;var e,t,n,o,i,a=(e=navigator.userAgent,!(/YandexSearch\//.test(e)||/YaApp/.test(e)||/YaBrowser\/[0-9][0-9.]* YaApp_iOS\/[0-9][0-9.]*/.test(e))&&!/MiuiBrowser\//.test(e)&&/Mac OS X [0-9_]+;.*HTC[_/ ]/.test(e)||/Mac OS X 10_[0-8][^0-9]/.test(navigator.userAgent)||/SamsungBrowser\//.test(e)),s=!!((n=null==(t=navigator.userAgent)?void 0:t.match(/WebKit\/?(\d+)/i))&&537>Number(n[1])),u=!!(i=null==(o=navigator.userAgent)?void 0:o.match(/Chrome\/(\d+)/i))&&57>Number(i[1]);return!a&&!s&&!u||(D([a&&"blacklist",s&&"oldWebKit",u&&"oldChromium"].filter(Boolean).map(function(e){return"userAgent:"+e})),!1)}()){Promise.all([(a=e.config.baseUrl,u=new G,Promise.all([n.e("ymaps-vector").then(n.bind(n,85731)),n.e("ymaps-vector").then(n.t.bind(n,26259,23)),a+new URL(n(32448),n.b).pathname]).then(function(e){var t=(0,m._)(e,3),n=t[0],r=t[1],o=t[2];return function(e){return function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return(0,p._)(n.VectorMapEngine,[r.default,o,e,u].concat((0,s._)(i)))}}})),new Promise(function(e,t){setTimeout(function(){var n=T();n&&Z(n).supported||t(Error("Vector is not supported")),e(n)})})]).then(function(e){var t=(0,m._)(e,2),n=t[0],r=t[1];S.destroyed||(S.provideVectorMapEngineFactory(n(r)),o._reportVector("ok"))}).catch(function(e){o.setState({isVectorSupported:!1});var t=Z();o._reportVector(t.supported?"error":"vector_not_supported",t.supported?{error:null==e?void 0:e.message}:{report:t})})}else{o.setState({isVectorSupported:!1});var C=Z();o._reportVector("browser_no_webgl",{report:C})}}else o._reportVector("config_disabled");o._map=S,o._onMapUpdate(),o._onZoomRoundingChange(),o._onMapSizeChange(),o._addFilter(),null==o.props.onMarginChange||o.props.onMarginChange.call(o.props,o._margin||[0,0,0,0]),e.onReady&&e.onReady(S),o._handleMapLocationRequest(c),o.forceUpdate()}},o._addFilter=function(){var e=o.props.getFilter;e&&(o._filter=e(o._ymaps3),o._map.addObjectFilter(o._filter))},o._onMapUpdate=function(){var e=o._map;if(!e.isInAction){var t=[e.center[0],e.center[1]],n=o._location.zoom!==e.zoom||!(0,b.J)(o._location.center,t);(0,c.Z)(o._margin,e.margin)||(o._margin=e.margin,null==o.props.onMarginChange||o.props.onMarginChange.call(o.props,e.margin)),n&&(o._location={zoom:Math.round(100*e.zoom)/100,center:t},o._onLocationChange()),(o._camera.azimuth!==e.azimuth||o._camera.tilt!==e.tilt)&&(o._camera={azimuth:e.azimuth,tilt:e.tilt},o.props.onCameraChange&&o.props.onCameraChange(o._camera))}},o._onLocationChange=function(){var e=o.props.onLocationChange;if(e){var t=(0,w.$Y)(o._location,o._margin,o._getSize()),n=t.bounds,r=t.span;e((0,i._)({},o._location,{bounds:n,span:r}))}},o._onMapSizeChange=function(){o.props.onSizeChange&&o.props.onSizeChange(o._getSize(),o._map.offset),o._onLocationChange()},o._getSize=function(){var e=o._map.size;return{width:e.x,height:e.y}},o._onResize=function(){var e=o._map;e&&e.resize()},o._onDragStart=function(){o.setState({isDragged:!0})},o._onDragEnd=function(){o.setState({isDragged:!1})},o._onZoomRoundingChange=function(){o.props.onZoomRoundingChange&&o._map&&o.props.onZoomRoundingChange(o._map.effectiveZoomRounding)},o._onThemeChange=function(){var e=o.props,t=o._map;Object.entries((0,g.mt)({config:e.config,theme:e.theme,modeFutureSelected:e.modeFutureSelected,discoveryHomeIntentSlug:e.discoveryHomeIntentSlug})).filter(function(e){return"tile"===(0,m._)(e,2)[1].type}).forEach(function(e){var n=(0,m._)(e,2),r=n[0],o=n[1];null==t||t.updateTileDataSource(r,o)})},o._onMapModeFutureToggle=function(){var e=o.props,t=o._map,n=(0,g.mt)({config:e.config,theme:e.theme,modeFutureSelected:e.modeFutureSelected,discoveryHomeIntentSlug:e.discoveryHomeIntentSlug});null==t||t.updateTileDataSource("map",n.map)},o._renderLayers=function(){var e=o.props;return"satellite"===e.type?u.createElement(R.ZP,{layer:"sat"}):"hybrid"===e.type?u.createElement(u.Fragment,null,u.createElement(R.ZP,{layer:"sat"}),u.createElement(R.ZP,{layer:"skl",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}})):u.createElement(R.ZP,{layer:"map",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}})},o.state={isDragged:!1,isVectorSupported:!0,isVectorDisabledForce:!1,vectorReport:null};var o,a=o.props.updateTimeout||300;return o._onMapUpdateDebounced=(0,k.Z)(o._onMapUpdate,a),"undefined"!=typeof window&&(t.delayLoad?(o._loadDelayStart=Date.now(),(0,z.J3)("mapLoadDelay",o._loadDelayStart),H(function(){o._loadAction||((0,z.J3)("mapLoadDelayCompleted",Date.now()-o._loadDelayStart),o._loadAction=_.Z.create(Y(),{success:o._onYmaps3Load}))})):o._loadAction=_.Z.create(Y(),{success:o._onYmaps3Load})),o}(0,a._)(t,e);var o=t.prototype;return o.componentDidMount=function(){this._createMap(),this._previousWindowMap=window.yandex_map},o.componentDidUpdate=function(e){!e.delayLoad||this.props.delayLoad||this._loadAction||((0,z.J3)("mapLoadDelayAborted",Date.now()-this._loadDelayStart),this._loadAction=_.Z.create(Y(),{success:this._onYmaps3Load}));var t=this._map;if(!t)return this._createMap();var n=this.props;n.behaviors&&!(0,c.Z)(n.behaviors,e.behaviors)&&t.behaviors.setEnabled(n.behaviors);var r=n.locationRequest;r!==e.locationRequest&&this._handleMapLocationRequest(r),(0,c.Z)(n.marginRequest,e.marginRequest)||t.setMargin(n.marginRequest);var o=this._getMapMode();t.setMode(o),n.getFilter!==e.getFilter&&(this._filter&&(t.removeObjectFilter(this._filter),this._filter=void 0),this._addFilter()),e.theme!==n.theme&&this._onThemeChange(),e.modeFutureSelected!==n.modeFutureSelected&&this._onMapModeFutureToggle()},o.componentWillUnmount=function(){_.Z.cancel(this._loadAction),this._onMapUpdateDebounced.cancel(),this._map&&this._map.destroy(),window.yandex_map=this._previousWindowMap||window.yandex_map},o._getMapMode=function(){var e=this.state.isVectorSupported&&this.props.vector&&this.props.config.isVectorEnabled&&!this.state.isVectorDisabledForce,t=this.props.config.uatraits.isMobile;return e?t?"vector":"auto":"raster"},o._reportVector=function(e,t){var n={mapMode:this._getMapMode(),status:e};this.state.isVectorDisabledForce&&(n.forceDisabled=!0),this.state.isVectorSupported||(n.notSupported=!0),t&&Object.assign(n,t),this.setState({vectorReport:n})},o.render=function(){var e=this.props,t=this.state;return u.createElement(u.Fragment,null,this._isElementProvided?null:u.createElement("div",{className:e.className,ref:this._ref}),u.createElement(y.Ib,{value:{map:this._map,ymaps3:this._ymaps3}},this._renderLayers(),u.createElement(E.Z,{onUpdate:this._onMapUpdateDebounced,onDragStart:this._onDragStart,onInertiaStart:this._onDragEnd,onDragEnd:this._onDragEnd,onResize:this._onMapSizeChange,onZoomRoundingChanged:this._onZoomRoundingChange}),e.children,this.state.isDragged?u.createElement(L.Z,{cursor:"grabbing"}):null,u.createElement(X,null)),u.createElement(S.Z,{onResize:this._onResize}),u.createElement(C.Z,{type:"resize",listener:this._onResize}),t.isVectorDisabledForce?u.createElement(N.ZP,{name:"disable_vector_force"}):null,t.vectorReport?u.createElement(N.ZP,{name:"vector_report",nodeState:t.vectorReport}):null)},(0,f._)(t,[{key:"_isElementProvided",get:function(){return"element"in this.props}}]),t}(u.Component)),$=n(24063),Q=(0,v.Z)(d.ZP,(0,y.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._update=function(){var e=n.props,t=e.map.getLayers(),r=t.topRasterLayers,o=t.mainLayers,i=(0,s._)(r).concat((0,s._)(o)).map(function(e){return e.split(":")[0]}),a=g.Hi.filter(function(e){return i.includes(e)});_.Z.cancel(n._loadAction);var u=(0,c.Z)(a,["map"])?Promise.resolve({map:{copyrights:["© Яндекс"]}}):$.Z.getLayers({layers:a,center:e.map.center,zoom:e.map.zoom},e.config);n._loadAction=_.Z.create(u,{success:n._onDataLoad})},n._onDataLoad=function(e){var t=n.props.map;Object.entries(e).forEach(function(e){var n=(0,m._)(e,2),r=n[0],o=n[1];if(o){var a=t.getDataSource(r),s=(0,i._)({},a);if("zoomRange"in o&&o.zoomRange){var u=(0,m._)(o.zoomRange,2),l=u[0],d=u[1];s.zoomRange={min:l,max:d}}s.copyrights="copyrights"in o?o.copyrights:void 0,(0,c.Z)(a,s)||t.updateTileDataSource(r,s)}})},n._updateDebounced=(0,k.Z)(n._update,500),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateDebounced()},n.componentWillUnmount=function(){this._updateDebounced.cancel(),_.Z.cancel(this._loadAction)},n.render=function(){return u.createElement(E.Z,{onUpdate:this._updateDebounced})},t}(u.Component)),ee=n(2467),et=["map","indoor","realTimePoi"],en=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._loadFile=function(){var e=t.props,n=e.config.staticHost+"static/v53/map-customizations/"+e.name+".json";_.Z.cancel(t._loaderAction),t._loaderAction=_.Z.create((0,ee.Z)({url:n,parser:"json"}),{success:t._setMapCustomization})},t._setMapCustomization=function(e){void 0===e&&(e={});var n,r=t.props;(null!=(n=r.dataSourceIds)?n:et).forEach(function(t){var n=r.map.getDataSource(t);n&&"tile"===n.type&&r.map.updateTileDataSource(t,(0,g._I)(n,e))})},t}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadFile()},n.componentDidUpdate=function(e){this.props.name!==e.name&&this._loadFile()},n.componentWillUnmount=function(){this._setMapCustomization(),_.Z.cancel(this._loaderAction)},n.render=function(){return null},t}(u.PureComponent),er=(0,d.ZP)((0,y.ZP)({shouldWait:!0})(en)),eo=n(67105),ei=n(9322),ea=n(91086),es=function(e){function t(t){var r;return(r=e.call(this,t)||this)._shouldHover=function(e){var t,n;return(r.props.shouldHover?r.props.shouldHover(e):!!r.props.onClick)&&(!!(null==(t=e.properties.vectorMetadata)?void 0:t.has("uri"))||Number(null==(n=e.properties.vectorMetadata)?void 0:n.get("itemId"))>0)},r._dataSource={type:"tile3d",priority:"high",theme:(0,g.gh)(t.theme),workerUrl:r.props.config.baseUrl+new URL(n(1367),n.b).pathname},r}(0,a._)(t,e);var r=t.prototype;return r.componentDidMount=function(){this._addLayer()},r.componentDidUpdate=function(e){this.props.theme!==e.theme&&(this._dataSource=(0,i._)({},this._dataSource,{theme:(0,g.gh)(this.props.theme)}),this.props.map.updateTile3dDataSource(ea.Y0,this._dataSource))},r.componentWillUnmount=function(){this._removeLayer()},r._getMapLayers=function(){var e=this.props.map.getLayers(),t=e.mainLayers,n=e.topRasterLayers;return(0,s._)(t).concat((0,s._)(n))},r._setMapLayers=function(e){var t=this;this.props.map.setLayers((0,g.c8)(e,this.props.ymaps3.EventBlockerLayer,function(e){return t.props.map.getDataSource(e)},this.props.config))},r._addLayer=function(){this.props.map.addDataSource(ea.Y0,this._dataSource);var e=this._getMapLayers();e.push.apply(e,(0,s._)((0,g.se)(ea.Y0))),this._setMapLayers(e)},r._removeLayer=function(){var e=(0,g.se)(ea.Y0),t=this._getMapLayers().filter(function(t){return!e.includes(t)});this._setMapLayers(t),this.props.map.getDataSource(ea.Y0)&&this.props.map.removeDataSource(ea.Y0)},r.render=function(){return u.createElement(ei.Z,(0,i._)({layer:ea.Y0},this.props,{shouldHover:this._shouldHover}))},t}(u.Component),eu=(0,v.Z)(d.ZP,(0,y.ZP)({shouldWait:!0}),W.ZP)(es),ec="_vector_ready",el=["drag","dblClick","magnifier","oneFingerZoom","pinchZoom"],ed=["scrollZoom"],ep=["mouseRotate","pinchRotate","mouseTilt","panTilt"],ef=(0,l.Z)("map-widget-map-component"),em=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onReady=function(e){window.document.body.classList.add("_map_ready"),n._map=e,n.setState({isReady:!0})},n._getBehaviors=function(){var e;return(0,s._)(el).concat((0,s._)((null==(e=n.props.config.flyover)?void 0:e.isEnabled)?ep:[]),(0,s._)(n.props.config.isScrollDisabled?[]:ed))},n._onMainEngineChanged=function(){var e;(null==(e=n._map)?void 0:e.getEffectiveMode())!=="vector"||window.document.body.classList.contains(ec)||window.document.body.classList.add(ec)},n._setTile3dLayerInitialized=function(){n.state.flyover.isLayerInitialized||n.setState(function(e){return{flyover:(0,i._)({},e.flyover,{isLayerInitialized:!0})}})},n._setFlyoverObject=function(e){var t;(null==(t=n.state.flyover.flyoverObject)?void 0:t.tile.id)!==(null==e?void 0:e.tile.id)&&n.setState(function(t){var n;return{flyover:(0,i._)({},t.flyover,{flyoverObject:e,activeTile3dId:null!=(n=null==e?void 0:e.tile.id)?n:null})}})},n._setFlyoverHoverState=function(e){(0,c.Z)(n.state.flyover.hoverState,e)||n.setState(function(t){return{flyover:(0,i._)({},t.flyover,{hoverState:e})}})},n.state={isReady:!1,flyover:{isLayerInitialized:!1,activeTile3dId:null,flyoverObject:null,hoverState:null,setLayerInitialized:n._setTile3dLayerInitialized,setFlyoverObject:n._setFlyoverObject,setHoverState:n._setFlyoverHoverState}},n}return(0,a._)(t,e),t.prototype.render=function(){var e,t=this.props,n=(null==(e=t.config.flyover)?void 0:e.isEnabled)&&this.state.flyover.isLayerInitialized;return u.createElement(J,{className:ef(),type:t.config.mapType,initialLocation:t.location,vector:!0,isPoiEnabled:t.isPoiEnabled,onReady:this._onReady,locationRequest:t.locationRequest,marginRequest:t.margin,onPoiClick:t.onPoiClick,onLocationChange:t.onLocationChange,onSizeChange:t.onSizeChange,behaviors:this._getBehaviors()},u.createElement(Q,null),n?u.createElement(u.Fragment,null,u.createElement(eu,null),u.createElement(er,{name:"realty",dataSourceIds:["map"]})):null,this.state.isReady?u.createElement(eo.v6,{value:this.state.flyover},t.children):null,u.createElement(E.Z,{onMainEngineChanged:this._onMainEngineChanged}))},t}(u.Component),ev=(0,d.ZP)(em)},18413:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var r=n(18007),o=n(87363),i=n(31336),a=n(91027),s=n(44748),u=n(39705),c=n(16647),l=n(93813),d=n(13688),p=n(81194),f=n(57636),m=n(32584),v=n(85172),h=(0,s.Z)("masstransit-underground-line-name-view"),g=function(e){var t,n,r=e.transport,i=(0,v.Fg)(),a=r.transportSystemId?null==(t=m.x[r.transportSystemId])?void 0:t.small:null;return o.createElement("div",{className:h()},a?o.createElement("div",{className:h("icon")},o.createElement(f.Z,{inline:!0,name:a,theme:i})):null,o.createElement("div",{className:h("line-number"),style:{backgroundColor:r.Style&&r.Style.color||"transparent"}},null!=(n=r.shortName)?n:null),o.createElement("div",{className:h("line-name")},r.name))},y=n(5130),_=n(59093),b=n(6241),w=(0,s.Z)("map-widget-masstransit-stop-content-view"),E=function(e){var t,n,r,a=(0,i.ZR)(),s=e.content.data.stop,f=s.region?c.u(s,s.region):"",m=(0,d._)(l.e("/"+f,a)),v={coords:s.coordinates,value:"",uri:null==(t=s.searchResult)?void 0:t.uri},h=(0,d.V)([{coords:null,value:""},v],{},a);return o.createElement("div",{className:w()},o.createElement(y.Z,{title:("underground"===s.type?"Станция метро":"railway"===s.type?"Ж/д станция":"Остановка")+" "+s.name,titleUrl:m,subtitle:"underground"!==s.type?null==(n=s.searchResult)?void 0:n.description:void 0}),"underground"===s.type&&s.transports[0]?o.createElement("div",{className:w("underground-title")},o.createElement(g,{transport:s.transports[0]})):null,o.createElement("div",{className:w("buttons-container")},o.createElement("div",{className:w("button-container")},o.createElement(p.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:h,target:"_blank"},"Как добраться")),o.createElement("div",{className:w("button-container")},o.createElement(p.Z,{view:"primary",size:"small",isStretched:!0,url:function(){if("railway"===s.type){var e,t=null==(e=s.links)?void 0:e.find(function(e){return"timetable"===e.type});return null==t?void 0:t.href}if("underground"===s.type)return b.format(a.hosts.metro,{ll:(0,u.s)(s.coordinates)});if("urban"===s.type&&s.region){var n=c.u(s,s.region)||"";return(0,d._)(l.e("/"+n,a))}}(),target:"_blank"},"underground"===s.type?"Схема метро":"railway"===s.type?"Показать расписание":"Список маршрутов"))),(null==(r=s.searchResult)?void 0:r.metro)&&"underground"!==s.type?o.createElement("div",{className:w("nearest-stops")},o.createElement(_.Z,{result:s.searchResult})):null)},S=n(9662),C=n(73911),k=n(33228),R=n(96449),x=n(61111),P=n(97313),M=n(37358),I={bus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},minibus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},tramway:{small:"rubrics-tram-stop-14",normal:"rubrics-tram-stop-24"},trolleybus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},water:{small:"rubrics-pier-14",normal:"rubrics-pier-24"},underground:{small:"rubrics-subway-fallback-14",normal:"rubrics-subway-fallback-24"},suburban:{small:"rubrics-railway-station-14",normal:"rubrics-railway-station-24"},suburban_express:{small:"rubrics-railway-station-14",normal:"rubrics-railway-station-24"},funicular:{small:"rubrics-funicular-14",normal:"rubrics-funicular-24"},cable:{small:"rubrics-cableway-14",normal:"rubrics-cableway-24"},aeroexpress:{small:"aeroexpress-14",normal:"aeroexpress-24"},fallback:{small:"rubrics-fallback-14",normal:"rubrics-fallback-24"}},T=function(e){var t,n,r,i,a=(0,v.Fg)();if(!e.vehicleType)return null;var s=null==(t=m.x[null!=(i=e.transportSystemId)?i:""])?void 0:t[e.size],u=s||(null==(n=I[e.vehicleType])?void 0:n[e.size])||(null==(r=I.fallback)?void 0:r[e.size]);return u?o.createElement(f.Z,{inline:!0,name:u,className:e.className,theme:s?a:void 0}):null},Z=n(45350),D=n.n(Z),L=n(55172),A=n.n(L),N=n(65560),z=n.n(N),F=(0,s.Z)("masstransit-stop-placemark"),U=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(C.Z,{name:"masstransit_stop_placemark",logClick:!0},o.createElement(R.Z,{coordinates:e.coordinates,onClick:e.onClick,zIndex:P.I.masstransitStop},o.createElement("div",{className:F({bookmark:e.isBookmark})},!e.hotspotIconUrl||e.isBookmark?o.createElement(T,{className:F("content-icon"),size:"normal",vehicleType:e.type,transportSystemId:e.transportSystemId}):null,e.hotspotIconUrl&&!e.isBookmark?o.createElement("img",{alt:"",src:e.hotspotIconUrl,className:F("background-icon"),width:"60",height:"68"}):o.createElement(k.Z,{className:F("background-icon"),url:e.isBookmark?A():e.transportSystemId?z():D()}),e.name?o.createElement("div",{className:F("name")},e.name):null)),e.id?o.createElement(x.Z,{uri:M.p1(e.id)}):null)},t}(o.PureComponent),O=(0,i.ZP)(U),q=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStopPlacemark=function(e,t){var n,r=(0,S.Od)(e);return"underground"===r&&(n=e.transports[0].transportSystemId),o.createElement(O,{id:e.id,type:r,coordinates:e.coordinates,transportSystemId:n,name:e.name,isBookmark:!1,onClick:function(){return null==t?void 0:t(e)}})},t._renderStaticStop=function(){var e,n=t.props.config.masstransitStop;return n&&n.id!==(null==(e=t.props.content)?void 0:e.data.stop.id)?t._renderStopPlacemark(n,t.props.onStaticPlacemarkClick):null},t._renderContentStop=function(){var e=t._getDisplayType();return t.props.content?o.createElement(o.Fragment,null,o.createElement(a.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,displayType:e,mapSize:t.props.mapSize},o.createElement(E,{content:t.props.content})),"panel"===e?t._renderStopPlacemark(t.props.content.data.stop):null):null},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderContentStop(),this._renderStaticStop())},t}(o.Component),B=(0,i.ZP)(q)},86187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(87363),o=n(37358),i=n(31336),a=n(52869),s=n(34862),u=n(34788),c=(n(11912),n(57619),n(53770));n(39705);var l={getStopInfo:function(e,t){return(0,c.Z)("masstransit/getStopInfo",{query:{id:e.id,uri:e.uri,locale:t.realLocale,lang:t.lang,mode:"prognosis",experimental:t.experiments.mtInfoParams}},t).then(function(e){if(!e)throw Error("Stop no data");return e})}},d=n(35501),p=function(e){var t=(0,i.ZR)(),n=e.poiData,c=e.updateContent;return r.useEffect(function(){var e;if(n){a.Z.cancel(e);var r,i,p,f,m,v,h,g,y,_,b,w=o.lB(n.feature.properties.uri)?(i=(r=n.feature).properties,p=r.properties.uri,(f={id:o.QT(p),uri:p,hotspotProperties:i,hotspotCoordinates:n.coordinates,clearLine:!0},l.getStopInfo(f,t).then(function(e){return(0,u._)({},e,{coordinates:f.hotspotCoordinates||e.coordinates})})).then(function(e){return{type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}}})):(y=(g=n.feature).properties,_=g.properties.uri,b={clientId:null==(m=t.mapWidget)?void 0:m.clientId,origin:null!=(h=null==(v=t.mapWidget)?void 0:v.origin)?h:"poi",from:"poi",coordinates:n.coordinates,hotspotProperties:y,uri:_},s.Z.fetchSearchResult(b,t).then(function(e){var t=d.Y(null==e?void 0:e.items);return t?{type:"search",data:{result:t,coordinates:n.coordinates}}:null}));e=a.Z.create(w,{success:function(e){e&&c(e)}})}return function(){a.Z.cancel(e)}},[n,c,t]),null}},57689:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(34788),o=n(18007),i=n(87363),a=n(99111),s=n(50576),u=n(31336),c=n(52869),l=n(85469),d=n(47855),p=function(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?(0,d.Z)(e,r?0:i,r?i+1:o):(0,d.Z)(e,r?i+1:0,r?o:i)},f=n(39705),m=n(29287),v=n(38067);function h(e,t){if("comparison"===t){for(var n=0,r=1;r<e.length;r++)n+=(0,v.t)(e[r],e[r-1]);return n<=5e4}return!0}function g(e){var t=e.searchResult,n=e.ignorePctx;if(t&&!n)return"routePoint"in t?t.routePoint&&t.routePoint.context:void 0}var y=n(51898),_=n(17316),b=n(88237),w=n(15462),E=n(53770),S=(n(50770),{buildRoute:function(e,t){return(0,E.Z)("router/buildRoute",{query:(0,r._)({},e,{locale:t.realLocale,lang:t.lang})},t)}}),C=function(e){function t(t){var n;return(n=e.call(this,t)||this)._buildRoute=function(){var e,t,o,i,a,s,u,d,E,C,k,R,x,P,M,I,T,Z,D,L,A,N,z,F,U=n.props;if(Z=U.routePoints,D=[],z=(L=Z.filter(function(e,t){return!D.includes(t)}),A=function(e,t){return t>=2&&!e.input&&!e.value&&!e.coords},N=L&&L.length?p(L,(0,l.Z)(A,3),!0,!0):[]).filter(function(e){return!e.input&&!e.value&&!e.coords}),F=N.filter(function(e){return!!e.input&&!e.coords}),2===N.length?0===z.length&&F.length>0:z.length>0||F.length>0){U.onError({waypoints:[],error:"invalid_points",type:U.travelMode,routes:[]});return}var O=(e=U.config,t={travelMode:U.travelMode,routerResponse:null,routePoints:U.routePoints,activeRouteIndex:-1,viaIndexes:[],settings:(0,r._)({},_.Z,{auto:(0,r._)({},_.Z.auto,{ignoreTrafficJams:w.a(U.config)}),masstransit:(0,r._)({},_.Z.masstransit,{avoidTypes:[]})})},a=(o={}).regionId,s=o.isRough,u=t.travelMode,d=t.routerResponse,E=t.routePoints,C=t.activeRouteIndex,k=t.viaIndexes,x=(R=E.filter(function(e){return!!e.coords})).map(function(e){return e.coords}),P=d?d.routes[C]:null,M=t.activeComparisonMode?t.activeComparisonMode:P&&"taxi"!==P.type&&P.type||void 0,I=(0,m.F)(u,t.settings,t.cargo),T=[],h(x,u)||T.push("bicycle"),h(x,u)||T.push("scooter"),"comparison"!==u||e.enableTaxi||T.push("taxi"),(0,r._)({isHDRoutesExperiment:e.experiments.ui.hdRoutes,rll:x.map(function(e){return(0,f.s)(e)}).join("~"),type:u,activeComparisonMode:M,via:k.length>0?k.join("~"):void 0,mode:function(e){var t=e.ignoreTrafficJams,n=e.travelMode,r=e.isRough;if(["auto","taxi","comparison"].includes(n))return r?"approx":t?"nojams":"best"}({ignoreTrafficJams:t.settings.auto.ignoreTrafficJams||!!(I&&I.timeDependent&&I.timeDependent.time&&"comparison"!==u),travelMode:u,isRough:s}),pctx:(i=R.map(g)).filter(Boolean).length>0?i.join("~"):void 0,ignoreTravelModes:T.length>0?T.join(","):void 0,regionId:a,enableRoutesB2B:(0,y.M)(u,e)||void 0},I,{isIntercityRoute:2===x.length&&(0,v.t)(x[0],x[1])>1e5,"no-taxi-route-hidden":e.query["no-taxi-route-hidden"],experiments:e.experiments.routerParams}));c.Z.cancel(n._buildRouteAction),n._buildRouteAction=c.Z.create(S.buildRoute(O,U.config).then(function(e){if(!e)throw Error("Unknown Error");return e}),{success:function(e){var t=b.N(e);t.error?U.onError(t):U.onLoad(t)},fail:function(){U.onError({waypoints:[],error:"unknown_error",type:U.travelMode,routes:[]})}})},n._buildRouteDebounced=(0,a.Z)(n._buildRoute,100),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=e.routePoints.map(function(e){return e.coords}).filter(Boolean),n=this.props.routePoints.map(function(e){return e.coords}).filter(Boolean);(!(0,s.Z)(t,n)||e.travelMode!==this.props.travelMode)&&n.length>=2&&this._buildRouteDebounced()},n.componentWillUnmount=function(){c.Z.cancel(this._buildRouteAction)},n.render=function(){return null},t}(i.Component),k=(0,u.ZP)(C)},32002:(e,t,n)=>{"use strict";var r=n(34788),o=n(18188),i=n(11912),a=n(87363),s=n(10951),u=n(37839),c=n(81966),l=n(31336),d=n(34862),p=n(33369),f=n(96315),m=n(23936),v=n(23840),h=n(22645),g=(0,c.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,89948))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 89948}},{ssr:!1}),y=(0,c.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,89948)).then(function(e){return{default:e.MapWidgetSearchFormResultsListIconView}})},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 89948}},{ssr:!1});t.Z=function(e){var t,n,c,_,b,w,E,S,C,k,R,x,P,M,I,T,Z,D,L,A,N,z,F,U,O=(0,l.ZR)(),q=(t=e.mapLocation,n=e.activeResult,c=e.onSearchBoundsChange,k=(C=(0,l.ZR)()).searchPreloadedResults,x=(R=(0,o._)(a.useState((null==k?void 0:k.chain)!==void 0||(null==k?void 0:k.requestQuery)!==void 0?{text:null==k?void 0:k.requestQuery,displayText:C.query["display-text"],chain:(null==k?void 0:k.chain)?{id:k.chain.id,name:k.chain.name}:void 0,filters:null==(b=C.query)?void 0:null==(_=b.filter)?void 0:_.split(";"),mapLocation:t}:void 0),2))[0],P=R[1],I=(M=(0,o._)(s.Z(function(e,t,o){if(P(e),!e)return Promise.resolve(void 0);var a,s,u,c,l=null==n?void 0:n.id,p=h.V(null==o?void 0:o.items),f=p.find(function(e){return e.id===l}),m=null!=(u=null==o?void 0:o.requestResults)?u:10,v={text:e.chain?"chain_id:("+e.chain.id+")":e.text,filters:e.filters,clientId:null==(a=C.mapWidget)?void 0:a.clientId,origin:null==(s=C.mapWidget)?void 0:s.origin,center:e.mapLocation.center,span:e.mapLocation.span,bounds:e.mapLocation.bounds,zoom:e.mapLocation.zoom,count:null==o?void 0:o.requestResults,type:["biz","geo"],context:null==o?void 0:o.requestContext,skip:t?Math.floor((null!=(c=null==o?void 0:o.pageCount)?c:0)/m)*m:void 0};return d.Z.fetch(v,C).then(function(e){var n=h.V(e.items);return!f||n.find(function(e){return e.id===f.id})||t&&p.find(function(e){return e.id===f.id})||n.push(f),(0,r._)({},e,{items:t&&o?(0,i._)(o.items).concat((0,i._)(n)):n})}).catch(function(){return o})},[C],{value:k,loading:!1}),2))[0],T=M[1],u.Z(function(){x&&T((0,r._)({},x,{mapLocation:t}),!1,I.value)},[t]),{request:x,response:I.value,isLoading:I.loading,searchDisplayText:(null==x?void 0:x.displayText)||(null==x?void 0:null==(w=x.chain)?void 0:w.name)||(null==(E=I.value)?void 0:E.requestCorrectedQuery)||(null==(S=I.value)?void 0:S.requestQuery)||(null==x?void 0:x.text)||"",fetchMore:function(){T(x,!0,I.value)},update:function(e){T({text:e,mapLocation:t},!1,void 0).then(function(e){var t;return(null==e?void 0:null==(t=e.exactResult)?void 0:t.bounds)&&(!e.items||1===e.resultsCount)?c(e.exactResult.bounds):(null==e?void 0:e.bounds)&&c(e.bounds),e})},clear:function(){T(void 0,!1,void 0)}}),B=(Z=e.mapSize,L=(D=(0,o._)(a.useState(!1),2))[0],A=D[1],a.useEffect(function(){A(Z.width<295||Z.height<250)},[Z]),L),H=!!(null==(U=O.mapWidget)?void 0:U.constructorApiValidKey),j=function(){q.clear(),e.onResultsListClose()},W=function(t){""===t.trim()?j():(q.update(t),(0,v.h)(e.mapSize)||e.onResultsListOpen())};return a.createElement(a.Fragment,null,function(){if(!H)return null;var t=!!q.response;return a.createElement(g,{value:q.searchDisplayText,mapLocation:e.mapLocation,mapSize:e.mapSize,submitSearch:W,onClear:j},t||e.isResultsListShown?a.createElement(y,{isActive:e.isResultsListShown,onClick:e.isResultsListShown?e.onResultsListClose:e.onResultsListOpen}):null)}(),!(q.request&&!B)||H?null:a.createElement(f.Z,{resultsCount:null!=(z=null==(N=q.response)?void 0:N.totalResultCount)?z:0,checked:e.isResultsListShown,onClick:e.isResultsListShown?e.onResultsListClose:e.onResultsListOpen}),e.isResultsListShown?a.createElement(v.Z,{searchFormMode:H,mapSize:e.mapSize,onClose:e.onResultsListClose},a.createElement(m.Z,{searchResultsCount:H?null==(F=q.response)?void 0:F.totalResultCount:void 0,searchDisplayText:q.searchDisplayText,searchRequest:q.request,searchResults:q.response,isLoading:q.isLoading,onListItemClick:e.onResultClick,onLoadMoreClick:function(){return q.fetchMore()}})):null,function(){if(!q.response)return null;var t,n,r,o,i=[e.activeResult,null==(n=O.mapWidget)?void 0:null==(t=n.activeObject)?void 0:t.items[0],null==(r=O.poiPreloadedResults)?void 0:r.items[0],null==(o=O.whatsherePreloadedResults)?void 0:o.items[0]].filter(function(e){return!!e});return a.createElement(p.Z,{hiddenResults:i,results:q.response,onPlacemarkClick:e.onResultClick})}())}},77840:(e,t,n)=>{"use strict";var r=n(34788),o=n(18007),i=n(87363),a=n(31336),s=n(18469),u=n(44229),c=n(91027),l=n(93798),d=n(95570),p=n(61111),f=n(87708),m=n(81966),v=n(35501),h=(0,m.Z)({resolved:{},chunkName:function(){return"flyover"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("flyover").then(n.bind(n,81344))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 81344}}),g={advert:void 0,brandingId:void 0},y=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStaticSearchResult=function(e){var n;return e&&e.id!==(null==(n=t.props.content)?void 0:n.data.result.id)?i.createElement(i.Fragment,null,i.createElement(s.Z,{searchResults:{requestId:"",requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1,items:[e]},mapLocation:t.props.mapLocation}),i.createElement(d.Z,{result:(0,r._)({},e,g),coordinates:e.coordinates,mode:"active",onClick:t.props.onStaticPlacemarkClick}),i.createElement(p.Z,{uri:e.uri})):null},t._renderContentSearchResult=function(){var e=t.props.content,n=t._getDisplayType();if(!e)return null;var o=e.data.result;return i.createElement(i.Fragment,null,i.createElement(c.Z,{coordinates:e.data.coordinates,mapLocation:t.props.mapLocation,displayType:n,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,mapSize:t.props.mapSize},"business"===o.type?i.createElement(u.Z,{result:o}):i.createElement(l.Z,{result:o,isTrafficLayerEnabled:t.props.isTrafficLayerEnabled})),i.createElement(s.Z,{searchResults:{requestId:"",requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1,items:[o]},mapLocation:t.props.mapLocation}),"panel"===n?i.createElement(i.Fragment,null,i.createElement(d.Z,{result:(0,r._)({},o,g),coordinates:o.displayCoordinates,mode:"active"}),i.createElement(p.Z,{uri:o.uri})):null)},t._renderBusinessGeometry=function(e){return e&&"business"===e.type?i.createElement(f.Z,{result:e}):null},t._renderFlyover=function(){var e,n=null==(e=t.props.content)?void 0:e.data.result;return n&&"business"===n.type?i.createElement(h,{result:n,zoom:t.props.mapLocation.zoom}):null},t}return(0,o._)(t,e),t.prototype.render=function(){var e,t,n,r,o,a=this.props.config,s=v.Y(null==(e=a.whatsherePreloadedResults)?void 0:e.items),u=v.Y(null==(t=a.poiPreloadedResults)?void 0:t.items),c=v.Y(null==(r=a.mapWidget)?void 0:null==(n=r.activeObject)?void 0:n.items),l=!!(null==(o=a.flyover)?void 0:o.isEnabled);return i.createElement(i.Fragment,null,this._renderStaticSearchResult(s),this._renderStaticSearchResult(u),this._renderStaticSearchResult(c),this._renderBusinessGeometry(c),this._renderBusinessGeometry(u),l?this._renderFlyover():this._renderContentSearchResult())},t}(i.Component);t.Z=(0,a.ZP)(y)},15462:(e,t,n)=>{"use strict";function r(e,t){var n,r,o;return(null==(n=t.query.l)?void 0:n.includes("trfe"))||(null==(o=e.userMaps)?void 0:null==(r=o.response)?void 0:r.isTrafficShown)}function o(e){return"atm"===e.query.rtm}n.d(t,{W:()=>r,a:()=>o})},57793:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var r=function(e,t){var n,r=t.uatraits.isMobile?620:e.height>600?1014:814;return(null==(n=t.banner)?void 0:n.blockIds.widget)&&!(e.width<=r)?Math.ceil((e.width-r)/2):0}},13688:(e,t,n)=>{"use strict";n.d(t,{V:()=>f,_:()=>p});var r=n(34788),o=n(18188),i=n(80129),a=n.n(i),s=n(39705),u=n(93813),c=n(28361),l=n(17316),d=n(6241);function p(e){var t=(0,o._)(e.split("?"),2),n=t[0],i=t[1];return n+"?"+a().stringify((0,r._)({},a().parse(void 0===i?"":i),{from:"mapframe"}))}function f(e,t,n){var o,i=c.D({routePoints:e,viaIndexes:[],travelMode:t.travelMode||"auto",activeRouteIndex:0,routerResponse:null,detailedIndex:0,settings:(0,r._)({},l.Z,{masstransit:(0,r._)({},l.Z.masstransit,{avoidTypes:[]})}),startNavigationInApp:!0},n),a=e.some(function(e){return!e.coords})?null==(o=e.find(function(e){return e.coords}))?void 0:o.coords:void 0;return p(u.e(d.render("/",(0,r._)({ll:a?(0,s.s)(a):void 0,z:a?14:void 0},i)),n))}},44229:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(93813),u=n(47220),c=n(27760);function l(e){var t;return!!((0,c.z)(e)&&(null==(t=e.onlineProperties)?void 0:t.hideAddress))}var d=n(13688),p=n(34989),f=n(34788),m=n(18188),v=n(24289),h=n(57636),g=(0,i.Z)("flip-icon"),y=function(e){var t=e.isFlipped;return o.createElement(h.Z,{name:"arrow-down-8",className:g({flipped:t}),inline:!0})},_=n(93522),b=(0,i.Z)("map-widget-business-working-intervals-view"),w=function(e){var t=(0,a.ZR)(),n=(0,m._)(o.useState(!1),2),r=n[0],i=n[1],s=v.lR(e.result,t),u=v.bL(e.result,t)||[],c=u.length>0;return o.createElement("div",{className:b()},o.createElement("div",{className:b("labels")},e.children?o.createElement("div",{className:b("extra-label")},e.children):null,o.createElement("div",{className:b("time-label",(0,f._)({},s.state,{clickable:c})),onClick:c?function(){i(!r)}:void 0},o.createElement("span",{className:b("label-text")},s.text),c?o.createElement("div",{className:b("working-status-control")},o.createElement(y,{isFlipped:r})):null)),r?o.createElement("div",{className:b("intervals")},u.map(function(e,t){var n=e.changedDate?o.createElement(o.Fragment,null,e.dayName,", ",o.createElement("span",{className:b("date")},e.changedDate)):e.dayName;return o.createElement(_.Z,{key:t,isDisabled:!e.changedDate,position:["right"],text:"Праздничный день"},function(t){return o.createElement("div",{className:b("interval"),ref:t},o.createElement("div",{className:b("day")},n),o.createElement("span",{className:b("time")},Array.isArray(e.text)?e.text.join(", "):e.text))})})):null)},E=n(11640),S=n(6241),C=(0,i.Z)("map-widget-business-contacts-view"),k=function(e){var t,n,r,i,s,u=(0,a.ZR)(),c=(0,m._)(o.useState(!1),2),l=c[0],d=c[1],p=(0,E._)((t=e.result,n=({}).useRealty,(null==(r=t.realty)?void 0:r.company.phone)&&(void 0===n||n)&&!t.advert?[{number:r.company.phone,counter:r.company.phoneCounter?r.company.phoneCounter+"&source=map&crc="+u.xscriptCsrfToken:void 0,type:"phone",info:"Офис продаж"}]:t.phones||[])),f=p[0],v=p.slice(1),g=null==(s=e.result.urls)?void 0:s[0];return o.createElement("div",{className:C()},e.result.fullAddress?o.createElement("div",{className:C("item")},o.createElement(h.Z,{inline:!0,name:"logo-24",className:C("icon")}),e.result.fullAddress):null,f?o.createElement("div",{className:C("item")},o.createElement("div",null,f?o.createElement("div",{className:C("phone-container")},o.createElement("a",{className:C("main-phone"),href:"tel:"+(null!=(i=f.value)?i:f.number)},o.createElement(h.Z,{inline:!0,name:"call-24",className:C("icon")}),f.number),v.length>0?o.createElement("div",{className:C("flip"),onClick:function(){d(!l)}},v.length,o.createElement(y,{isFlipped:l})):null):null,l?v.map(function(e){var t;return o.createElement("a",{key:e.number,className:C("phone"),href:"tel:"+(null!=(t=e.value)?t:e.number)},e.number)}):null)):null,g?o.createElement("div",{className:C("item")},o.createElement(h.Z,{inline:!0,name:"web-24",className:C("icon")}),o.createElement("a",{className:C("url"),href:g,target:"_blank"},S.cropUrlForDisplay(g,!0))):null)},R=n(59093),x=n(81194),P=(0,i.Z)("map-widget-business-buttons-view"),M=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderGetToButton=function(){if(l(t.props.result))return null;var e={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},n=(0,d._)((0,d.V)([{coords:null,value:""},e],{},t.props.config));return o.createElement("div",{className:P("button-container")},o.createElement(x.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Как добраться"))},t._renderAboutButton=function(){return o.createElement("div",{className:P("button-container")},o.createElement(x.Z,{view:"primary",size:"small",isStretched:!0,url:t.props.businessUrl,target:"_blank"},"Об организации"))},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement("div",{className:P()},this._renderGetToButton(),this._renderAboutButton())},t}(o.Component),I=(0,a.ZP)(M),T=n(10951),Z=n(53770),D=n(39705),L={checkCoverage:function(e,t){return(0,Z.Z)("taxi/checkCoverage",{query:{ll:(0,D.s)(e.center),lang:t.locale}},t)}},A=(0,i.Z)("map-widget-taxi-link-view"),N=function(e){var t=(0,a.ZR)(),n=(0,m._)(T.Z(function(){return L.checkCoverage({center:e.endPoint},t)},[e.endPoint,t],{value:null,loading:!1}),2),r=n[0],i=n[1];return(o.useEffect(function(){i()},[e.endPoint,i]),r.value||r.loading)?o.createElement("div",{className:A()},o.createElement(h.Z,{name:"yndx-taxi-16",className:A("icon")}),o.createElement("a",{className:A("link"),href:function(){var n,r,o,i,a,s,u,c,l,d,p,f,v=null==(d=t.mapWidget)?void 0:d.taxi,h=t.uatraits.isMobile;if(v){var g=(0,m._)((null==(p=e.startPoint)?void 0:p.map(String))||[],2),y=g[0],_=g[1],b=(0,m._)(e.endPoint.map(String),2),w=b[0],E=b[1];return r=(n={urlTemplate:h?v.mobileUrlTemplate:v.urlTemplate,domain:v.domain,startLat:void 0===_?"":_,startLon:void 0===y?"":y,endLat:void 0===E?"":E,endLon:void 0===w?"":w,tariffClass:"",lang:null!=(f=v.lang)?f:"ru"}).urlTemplate,o=n.domain,i=n.startLat,a=n.startLon,s=n.endLat,u=n.endLon,c=n.tariffClass,l=n.lang,r.replace("{domain}",o).replace("{startLat}",i).replace("{startLon}",a).replace("{endLat}",s).replace("{endLon}",u).replace("{tariffClass}",c).replace("{lang}",l)}}(),target:"_blank"},"Вызвать такси")):null},z=n(5130),F=(0,i.Z)("map-widget-business-content-view"),U=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getCategories=function(){if(t.props.result.categories&&0!==t.props.result.categories.length)return t.props.result.categories.map(function(e){return e.name}).join(", ")},t._renderFeedbackUrl=function(){var e=t.props,n="/?oid="+e.result.id+"&ol=biz&feedback=organization/edit",r=(0,d._)(s.e(n,e.config));return o.createElement("a",{className:F("feedback-link"),href:r,target:"_blank"},"Сообщить об ошибке")},t._renderTaxiUrl=function(){var e=t.props;return l(e.result)?null:o.createElement(N,{endPoint:e.result.coordinates,startPoint:e.userCoordinates})},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=u.S({id:e.result.id,seoname:e.result.seoname}),n=(0,d._)(s.e("/"+t,e.config));return o.createElement("div",{className:F()},o.createElement(z.Z,{title:e.result.title,titleUrl:n,subtitle:this._getCategories()}),o.createElement(w,{result:this.props.result},o.createElement(p.Z,{result:e.result})),o.createElement(k,{result:e.result}),o.createElement("div",{className:F("stops")},o.createElement(R.Z,{result:e.result})),o.createElement("div",{className:F("business-buttons")},o.createElement(I,{businessUrl:n,result:e.result})),o.createElement("div",{className:F("bottom-links")},this._renderTaxiUrl(),this._renderFeedbackUrl()))},t}(o.Component),O=(0,a.ZP)(U)},34989:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(47220),u=n(93813),c=n(13688),l=n(90585),d=n(57636),p=n(44953),f=n(21469),m=n(14246),v=n(85172),h=function(e,t){var n=o.useRef(Intl.NumberFormat(e,t));return function(e){return n.current.format(e).replace(",",".")}},g=(0,i.Z)("business-rating-badge-view"),y=(0,l.Z)(a.ZP,v.ZP)(function(e){var t=h(e.config.lang,{maximumFractionDigits:1}),n=Math.round(2*e.ratingValue),r=Math.floor(n/2),i=!1;2*r!==n&&(i=!0);var a=e.size||"m",s=e.weight||"medium",u=e.collapseStars?1:5,c=e.ratingSpacing||"normal",l=t(e.ratingValue),v=Number(l)>u?u:l;return o.createElement(p.ZP,{name:"business_rating"},o.createElement("div",{className:g({size:a,weight:s})},o.createElement("div",{"aria-label":"Оценка "+v+" Из "+u,className:g("stars",{spacing:c})},Array(u).fill(null).map(function(t,n){var a=i&&n===r,s=n>=(i?r+1:r);return o.createElement(d.Z,{name:a?"place-half-star-16-fullsize-16-flip":"place-rating-star-16-fullsize-16",className:g("star",{full:!s&&!a,empty:s,half:a}),theme:a?e.theme:void 0,key:n,inline:!0})})),e.onlyStars?null:o.createElement("div",{className:g("rating")},o.createElement(m.Z,null,"Рейтинг"," "),o.createElement("span",{className:g("rating-text")},f.D$(e.ratingValue,e.config.lang,{min:1,max:1})))))}),_=n(93522),b=(0,i.Z)("map-widget-business-rating-view"),w=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getReviewUrl=function(){if(!t.props.disableLink){var e=s.S(t.props.result,{sublanding:"reviews"},{},{"add-review":""});return(0,c._)(u.e("/"+e,t.props.config))}},t._renderContent=function(){let e;var n=t.props;return n.result.ratingData?n.result.ratingData.ratingValue?o.createElement(y,{ratingValue:n.result.ratingData.ratingValue}):(e={count:n.result.ratingData.reviewCount}).count?e.count+" "+(e.count%10==1&&e.count%100!=11?"отзыв":e.count%10>1&&e.count%10<5&&(e.count%100<10||e.count%100>20)?"отзыва":"отзывов"):"Ещё нет отзывов":null},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this;return o.createElement(_.Z,{text:"Оценить место",position:"bottom",isAir:!0},function(t){return o.createElement("a",{className:b(),href:e._getReviewUrl(),target:"_blank",ref:t},e._renderContent())})},t}(o.Component),E=(0,a.ZP)(w)},5130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(87363),o=(0,n(44748).Z)("map-widget-content-title-view"),i=function(e){return r.createElement(r.Fragment,null,r.createElement("a",{href:e.titleUrl,target:"_blank",className:o("title",{disabled:!e.titleUrl})},e.title),e.subtitle?r.createElement("div",{className:o("subtitle")},e.subtitle):null)}},91027:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(18007),o=n(87363),i=n(44748),a=n(50576),s=n(11912),u=n(38024),c=n(15900),l=n(60309),d=n(13340),p=n(85672),f=n(7760),m=n(43481),v=(0,i.Z)("map-widget-content-view"),h={top:10,right:8},g=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=null,n._updateMapLocation=function(){if(n.props.updateLocationRequest){var e,t,r,o,i=n.state.maxHeight||n.state.height,a=null==(o=n._containerRef)?void 0:o.offsetWidth;if(i&&a){var d="panel"===n.props.displayType?(e=n.props.mapLocation,t=n.props.coordinates,r=(0,c.f)(t,e.zoom),r[1]+=32,(0,l.W)(r,e.zoom)):function(e,t,n,r){var o,i=e.bounds,a=(0,u.V)(i,t)?e.center:t,d=(0,u.V)(i,t)?t:e.center,p=(0,c.f)(a,e.zoom),f=(0,c.f)(d,e.zoom),m=i.map(function(t){return(0,c.f)(t,e.zoom)}),v=f[0]-m[0][0],h=m[1][0]-f[0],g=f[1]-m[1][1],y=Math.min(v,h),_=(0,s._)(p),b=Math.ceil(n.width/2);if(y<b){var w=b-y;v>=h?_[0]+=w:_[0]-=w}var E=n.height+(null!=(o=null==r?void 0:r.main)?o:0);return g<E&&(_[1]-=E-g+10),(0,l.W)(_,e.zoom)}(n.props.mapLocation,n.props.coordinates,{width:a,height:i},n.props.offset);n.props.updateLocationRequest({center:d,duration:300})}}},n._updateWidthHeight=function(){if(n._containerRef){var e,t,r,o;n.setState({height:n._containerRef.clientHeight,width:"balloon"===n.props.displayType?n._containerRef.clientWidth+20:void 0,maxHeight:"balloon"===n.props.displayType?(e=n.props.mapLocation,t=n._containerRef.clientHeight,(o=(r=e.bounds.map(function(t){return(0,c.f)(t,e.zoom)}))[0][1]-r[1][1]+22)<t?o:t):Math.ceil(n.props.mapSize.height/2),ready:!0},function(){return n._updateMapLocation()})}},n._setContainerRef=function(e){n._containerRef=e,n._updateWidthHeight()},n._renderContainer=function(){return o.createElement("div",{className:v("container",{ready:n.state.ready}),ref:n._setContainerRef,style:{height:n.state.height,maxHeight:n.state.maxHeight,width:n.state.width}},o.createElement(p.Z,{width:"dynamic"},o.createElement("div",{className:v("frame")},n.props.children)))},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;e.coordinates===this.props.coordinates&&e.displayType===this.props.displayType&&(0,a.Z)(this.props.mapSize,e.mapSize)||this.setState({height:void 0,width:void 0,maxHeight:void 0,ready:void 0},function(){t._updateWidthHeight()})},n.render=function(){var e=this.props;return"balloon"===e.displayType?o.createElement(d.Z,{coordinates:e.coordinates,key:e.coordinates.join(),position:"top",restrictPosition:!0,type:"normal",skipMaxHeight:!0,offset:e.offset,isShown:!0},o.createElement("div",{className:v("balloon")},o.createElement(f.Z,{offset:h,onClick:e.onClose}),this._renderContainer())):o.createElement(m.v7,null,o.createElement("div",{className:v("panel"),key:e.coordinates.join()},o.createElement(f.Z,{offset:h,onClick:e.onClose}),this._renderContainer()))},t}(o.Component)},83466:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(87363),o=n(44748),i=n(81194),a=n(57636),s=(0,o.Z)("map-widget-in-maps-button"),u=function(e){var t=r.createElement(a.Z,{name:"logo-24",inline:!0,className:s("icon")});return r.createElement(i.Z,{view:"air",size:"small",icon:t,url:e.url,target:"_blank"},e.children)}},43481:(e,t,n)=>{"use strict";n.d(t,{v7:()=>e_,ZP:()=>eb});var r=n(2267),o=n(75766),i=n(34788),a=n(18007),s=n(18188),u=n(11912),c=n(87363),l=n(50576),d=n(44748),p=function(e){var t=null,n=null,r=!1,o=!1,i=-1;function a(){for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];if(o){r=!0,t=u,n=this;return}e.apply(this,u),o=!0,i=window.requestAnimationFrame(function(){o=!1,r&&(r=!1,n=null,t=null,a.apply(n,t))})}return a.scheduled=o,Object.defineProperty(a,"scheduled",{get:function(){return o}}),a.cancel=function(){window.cancelAnimationFrame(i),i=-1,o=!1,r=!1,n=null,t=null},a},f=n(31336),m=n(1477),v=n(69602),h=n(78597),g=n(5035),y=n(12574),_=(0,h.ZP)()(function(e){function t(t){var n;return(n=e.call(this,t)||this)._getState=function(){var e=n.props.map;if(!e)return{zoomOutIsEnabled:!1,zoomInIsEnabled:!1};var t=Math.round(100*e.zoom)/100;return{zoomOutIsEnabled:t>e.zoomRange.min,zoomInIsEnabled:t<e.zoomRange.max}},n._updateButtons=function(){n.setState(n._getState())},n._changeZoom=function(e){var t=n.props.map;if(t){var r,o=null!=(r=n._targetZoom)?r:t.zoom;n._targetZoom=o+e;var i=n._targetZoom;t.animateCenterAndZoom(t.center,n._targetZoom,200).then(function(){i===n._targetZoom&&(n._targetZoom=void 0)})}},n._onZoomIn=function(e){e.preventDefault(),n._changeZoom(1)},n._onZoomOut=function(e){e.preventDefault(),n._changeZoom(-1)},n.state=n._getState(),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.map&&this.props.map&&this._updateButtons()},n.render=function(){return c.createElement(c.Fragment,null,c.createElement(y.Z,{onUpdate:this._updateButtons,onZoomRangeChange:this._updateButtons}),c.createElement(g.Z,{onZoomIn:this._onZoomIn,onZoomOut:this._onZoomOut,disabledZoomIn:!this.state.zoomInIsEnabled,disabledZoomOut:!this.state.zoomOutIsEnabled,size:this.props.size}))},t}(c.PureComponent)),b=n(14185),w=n(83243),E=n(44953),S=n(81194),C=n(93522),k=n(36887),R=n(26306),x=n(91784),P=(0,d.Z)("map-geolocation-control"),M=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(e){e.preventDefault(),t.props.onClick()},t._renderIcon=function(){var e=t.props;if(e.isLoading)return c.createElement("div",{className:P("spinner")},c.createElement(k.Z,{view:"small",withoutMargin:!0}));var n=!!e.config.mapWidget;return c.createElement(R.Z,{className:P("icon"),dangerouslySetInnerHTML:{__html:e.config.uatraits.isMobile&&!n?x.location48Icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.385 12.42l16.01-7.614a.6.6 0 0 1 .8.8l-7.616 16.009a.6.6 0 0 1-1.11-.068l-2.005-6.012-6.01-2.003a.6.6 0 0 1-.069-1.111z" fill="currentColor"/></svg>'}})},t}return(0,a._)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=null!=(e=n.size)?e:n.config.uatraits.isMobile?"large":"medium",o=!!n.config.mapWidget;return c.createElement("div",{className:P({noprint:!0})},c.createElement(C.Z,{text:"Моё местоположение",position:"left",isAir:!0},function(e){return c.createElement(E.ZP,{name:"geolocation",logClick:!0},c.createElement(S.Z,{view:n.config.uatraits.isMobile&&!o?"air-round":"air",size:r,icon:t._renderIcon(),onClick:t._onClick,disabled:n.isLoading,checked:n.isChecked,ariaLabel:"Моё местоположение",ref:e}))}))},t}(c.Component),I=(0,f.ZP)(M),T=n(70692),Z=(0,d.Z)("map-widget-map-scale-line-view"),D=function(e){return c.createElement("div",{className:Z()},c.createElement(T.default,{center:e.location.center,zoom:e.location.zoom}))},L=(0,d.Z)("map-widget-ruler-control-view"),A=function(e){return c.createElement("div",{className:L()},c.createElement(C.Z,{text:"Линейка",position:"left",isAir:!0},function(t){return c.createElement(S.Z,{ariaHidden:!0,icon:c.createElement(R.Z,{className:L("icon"),dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.56 14.363L14.363 3.56a1.91 1.91 0 0 1 2.7 0l3.377 3.376a1.91 1.91 0 0 1 0 2.7L9.636 20.442a1.91 1.91 0 0 1-2.7 0l-3.377-3.377a1.91 1.91 0 0 1 0-2.7zm4.12-.743l1.282-1.282 1.823 1.824a.764.764 0 1 0 1.08-1.082l-1.824-1.822 1.216-1.215 1.148 1.145a.763.763 0 0 0 1.318-.534.765.765 0 0 0-.237-.545l-1.148-1.147 1.282-1.283 1.824 1.824a.764.764 0 0 0 1.08-1.082l-1.825-1.824 1.014-1.012a.478.478 0 1 0-.676-.675L4.91 15.038a.478.478 0 0 0 .675.675l1.012-1.012 1.15 1.146a.764.764 0 1 0 1.08-1.079L7.679 13.62v.001z" fill="currentColor"/></svg>'}}),view:"air",size:"small",onClick:function(){return e.updateRuler({isEnabled:!e.isEnabled})},checked:e.isEnabled,ref:t})}))},N=n(59270),z=(0,d.Z)("traffic-raw-icon"),F=(0,f.ZP)(function(e){var t=e.checked?N.ZU(e.level):"none",n=e.config.isRtl&&!e.config.uatraits.isPhone;return c.createElement("div",{className:z({color:t})},c.createElement("div",{className:z("icon"),style:{transform:n?"scaleX(-1)":void 0},dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10z" fill="#CCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10zm18.333 0a8.333 8.333 0 1 1-16.666 0 8.333 8.333 0 0 1 16.666 0z" fill="#4D4D4D"/><path d="M9.75 2h2.5c5.514 0 10 4.486 10 10a5.605 5.605 0 0 1-3.976-1.65c-1.018-1.018-1.68-2.104-3.22-3.906C13.694 4.857 11.818 3.25 9.75 3.25c-4.136 0-7.5 3.926-7.5 8.75C1.456 11.059 1 10.005 1 8.875 1 5.085 3.547 2 9.75 2z" fill="#4D4D4D"/></svg>'}}),c.createElement("div",{className:z("text")},e.checked?e.level:null))}),U=(0,d.Z)("map-widget-traffic-control-view"),O=function(e){var t=c.createElement(F,{checked:e.isActive,level:e.level});return c.createElement("div",{className:U()},c.createElement(S.Z,{onClick:e.onClick,icon:t,size:"small",view:"air"},e.hasText?"Пробки":null))},q=(0,d.Z)("layout-control-group"),B=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=c.createRef(),n._onUpdate=function(){var e=n.props,t=n._root.current.clientHeight,r=n._root.current.clientWidth;e.height>0&&t>0&&e.height===t||e.onUpdate(e.type,{height:t,width:r})},n._onResize=function(){n._onUpdate()},n._onResizeThrottled=p(n._onResize),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._root.current.clientHeight,n=this._root.current.clientWidth;e.onUpdate(e.type,{position:e.position,height:t,width:n})},n.componentDidUpdate=function(e){this.props.position!==e.position&&this.props.onUpdate(this.props.type,{position:this.props.position})},n.render=function(){var e=this.props,t=!e.visible,n=(0,s._)("left"===e.side?[""+e.sideLeftMargin+"px",void 0]:"right"===e.side?[void 0,""+e.sideRightMargin+"px"]:[""+e.sideLeftMargin+"px",""+e.sideRightMargin+"px"],2),r=n[0],o=n[1];return c.createElement(E.ZP,{group:!0,hidden:t},c.createElement("div",{ref:this._root,className:q({side:e.side||"right",hidden:t,animated:e.animated}),"data-type":e.type,style:{transform:"translateY("+e.top+"px)",left:r,right:o,pointerEvents:e.pointerEventsNone?"none":void 0}},e.children,c.createElement(m.Z,{onResize:this._onResizeThrottled})))},t}(c.Component);function H(e){for(var t={},n=0,r=0,o=e.controlsOrder;r<o.length;r++){var a=(0,s._)(o[r],1)[0],u=0,c=e.controlGroups[a];if(c&&0!==c[e.dimension]){var l=!t[c.type];l&&(u+=c[e.dimension]+e.betweenMargin);var d=n+u;if(d>e.viewport+e.betweenMargin)break;l&&(t[a]=(0,i._)({},c)),n=d}}return{controlGroups:t}}var j=function(e,t,n){var r={top:W(n.betweenMargin),center:W(n.betweenMargin),bottom:W(n.betweenMargin)};e.forEach(function(e){r[e.position].height+=e.height+n.betweenMargin}),r.top.height=Math.max(r.top.height,0),r.center.height=Math.max(r.center.height,0),r.bottom.height=Math.max(r.bottom.height,0),r.top.top=n.topSizes.minTop;var a=r.top.top+r.top.height+n.betweenMargin;return r.bottom.top=Y(n.topSizes.maxTop-r.bottom.height,a,n.topSizes.maxTop),r.center.top=Y(n.topSizes.middle-Math.round(r.center.height/2),a,r.bottom.top-n.betweenMargin-r.center.height),e.reduce(function(e,a){var s=r[a.position],u=s.top,c=Math.abs(a.top-u),l=c>20&&c<300&&n.enableAnimation,d=(0,i._)({},t[a.type],{animated:l,top:u});return s.top+=a.height+n.betweenMargin,(0,i._)({},e,(0,o._)({},a.type,d))},{})};function W(e){return{top:0,height:-e,width:-e}}function G(e,t){return Object.values(e).filter(function(e){return!!e}).sort(function(e,n){return t.indexOf(e.type)-t.indexOf(n.type)})}function Y(e,t,n){return Math.max(Math.min(e,n),t)}var V=n(57793),K=n(89048),X=n(77823),J=n(111),$=n(57636),Q=(0,d.Z)("flyover-button"),ee=function(e){return c.createElement("div",{className:Q({active:e.active})},c.createElement(S.Z,{ariaHidden:!0,view:"air",size:"medium",icon:e.iconName?c.createElement("div",{className:Q("icon")},e.isLoading?c.createElement("div",{className:Q("spinner")},c.createElement(k.Z,{view:"small",withoutMargin:!0})):c.createElement($.Z,{name:e.iconName,inline:!0})):void 0,onClick:e.isLoading?void 0:e.onClick,disabled:e.isLoading},e.text?c.createElement("div",{className:Q("text")},e.text):null))},et=n(71682),en=n(67105),er=n(91086),eo=(0,d.Z)("map-flyover-control"),ei=function(){var e=(0,h.Sx)().map,t=(0,en.KE)().flyoverObject,n=(0,s._)(c.useState(!1),2),r=n[0],o=n[1],i=(0,s._)(c.useState(!1),2),a=i[0],u=i[1],l=null==t?void 0:t.center,d=function(){et.p_("flyover"),o(!1)},p=function(){if(e&&l){o(!0);var t=null==e?void 0:e.projection.toWorldCoordinates(l);et.zR(e,{worldCenter:t},function(){o(!1)})}};c.useEffect(function(){d()},[l]);var f=(0,J.Z)(function(){e.zoom<16&&r&&d()},100),m=function(){var n="ready"!==(t?er.go(t.tile.uri,e):null);n!==a&&u(n)};return(0,K.Z)(function(){m()}),(0,X.Z)(function(){d(),f.cancel()}),l?c.createElement("div",{className:eo()},c.createElement(E.ZP,{name:"flyover_control",logClick:!0},c.createElement(ee,{active:r,onClick:function(){if(et.p_(),r){d();return}p()},iconName:"view360-24",text:"Обзор 360°",isLoading:a})),c.createElement(y.Z,{onActionStart:function(e){["scrollZoom","drag"].includes(e)||d()},onUpdate:f,onTile3dChanged:m})):null},ea=(0,d.Z)("map-widget-layout-view"),es=["zoom","rulers","top-right-controls","geolocation"],eu=["top-right-controls","zoom","3D"],ec=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],el=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],ed=[["zoom"],["top-right-controls"],["geolocation"],["3D"]],ep=[["top-right-controls"],["zoom"],["3D"]],ef=[["open-in-maps-medium"],["open-in-maps-small"],["open-in-maps-tiny"],["top-left-controls"]],em=[["open-in-maps-small"]],ev=[["open-in-maps-medium"]],eh=ea("top-panel"),eg=ea("bottom-panel"),ey=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=c.createRef(),n._getFittingBottomLayout=function(){var e,t=n.state,r=((null==(e=n._root.current)?void 0:e.clientWidth)||0)-305,o=Object.keys(H({controlsOrder:ev,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups),i=Object.keys(H({controlsOrder:em,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups);return 1===o.length?["open-in-maps-medium"]:1===i.length?["open-in-maps-small"]:["open-in-maps-tiny","rulers"]},n._reposition=function(){var e,t=n.state,r=(null==(e=n._root.current)?void 0:e.clientHeight)||0,o=10+r,a=Y(o,10,r),c=Math.round((o+10)/2),d=n._getFittingBottomLayout(),p=H({controlsOrder:ef.filter(function(e){var t=(0,s._)(e,1)[0];return!el.includes(t)||d.includes(t)}),viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),f=H({controlsOrder:n._isFlyover?ep:ed,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),m=G(p.controlGroups,ec),v=j(G(f.controlGroups,n._isFlyover?eu:es),n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:c},enableAnimation:!0}),h=j(m,n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:c},enableAnimation:!0}),g=(0,u._)(Object.keys(v)).concat((0,u._)(Object.keys(h))),y=(0,i._)({},t.controlGroups,v,h);(0,l.Z)(t.controlGroups,y)&&(0,l.Z)(t.visibleControlGroups,g)||n.setState({visibleControlGroups:g,controlGroups:y})},n._onControlGroupUpdate=function(e,t){n.setState(function(n){return(0,i._)({},n,{controlGroups:(0,i._)({},n.controlGroups,(0,o._)({},e,(0,i._)({type:e},n.controlGroups[e],t)))})},n._reposition)},n._getControlGroups=function(){return[{type:"top-right-controls",position:"top",side:"right",children:n._renderTopRightControls()},{type:"zoom",position:n.state.visibleControlGroups.length<=2?"top":"center",side:"right",children:n._renderZoomControls("small")},{type:"geolocation",position:"center",side:"right",children:n._renderGeolocationControl()},{type:"open-in-maps-medium",position:"bottom",side:"left",children:n._renderInMaps("medium")},{type:"open-in-maps-small",position:"bottom",side:"left",children:n._renderInMaps("small")},{type:"open-in-maps-tiny",position:"bottom",side:"left",children:n._renderInMaps("tiny")},{type:"top-left-controls",position:"top",side:"left",children:n._renderTopLeftControls()}]},n._getFlyoverControlGroups=function(){return[{type:"top-right-controls",position:"top",side:"both",children:n._renderFlyoverTopControls()},{type:"zoom",position:"center",side:"right",sideRightMargin:12,children:n._renderZoomControls()},{type:"3D",position:"center",side:"right",sideRightMargin:12,children:n._render3DControl()}]},n._renderFlyoverControl=function(){return c.createElement("div",{className:ea("flyover")},c.createElement(ei,null))},n._renderGeolocationControl=function(){return c.createElement("div",{className:ea("geolocation")},c.createElement(I,{onClick:n.props.geolocation.onClick,isLoading:n.props.geolocation.isStarted,size:"small"}))},n._render3DControl=function(){return c.createElement("div",{className:ea("3d")},c.createElement(b.Z,null))},n._renderFlyoverTopControls=function(){return c.createElement("div",{className:ea("top-flyover-control")},n._renderFlyoverControl())},n._renderTopRightControls=function(){return c.createElement("div",{className:ea("top-right-controls")},n._renderRuler(),n._renderTrafficControl())},n._renderTopLeftControls=function(){return c.createElement("div",{className:ea("top-left-controls")},c.createElement("div",{className:ea("search")},n.props.search.render()),c.createElement("div",{className:ea("routes")},n.props.routes.render()))},n._renderTrafficControl=function(){return c.createElement(O,(0,i._)({},n.props.traffic,{hasText:n.props.mapSize.width>400}))},n._renderRuler=function(){return c.createElement("div",{className:ea("ruler")},c.createElement(A,n.props.ruler))},n._renderInMaps=function(e){return c.createElement("div",{className:ea("maps-links")},n.props.inMaps.render(e))},n._renderZoomControls=function(e){return c.createElement("div",{className:ea("zoom-controls")},c.createElement(_,{size:e}))},n.state={visibleControlGroups:[],controlGroups:{}},n._repositionThrottled=p(n._reposition),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._repositionThrottled()},n.render=function(){var e=this,t=this._isFlyover?this._getFlyoverControlGroups():this._getControlGroups(),n=(0,V.d)(this.props.mapSize,this.props.config);return c.createElement("div",{className:ea()},c.createElement("div",{className:ea("layout")},c.createElement("div",{ref:this._root,className:ea("controls")},t.map(function(t){var n,r,o,a,s;return c.createElement(B,(0,i._)({},t,{key:t.type,sideLeftMargin:t.sideLeftMargin||8,sideRightMargin:t.sideRightMargin||8,visible:e.state.visibleControlGroups.includes(t.type),animated:null==(n=e.state.controlGroups[t.type])?void 0:n.animated,height:null!=(a=null==(r=e.state.controlGroups[t.type])?void 0:r.height)?a:0,top:null!=(s=null==(o=e.state.controlGroups[t.type])?void 0:o.top)?s:0,onUpdate:e._onControlGroupUpdate,pointerEventsNone:"top-left-controls"===t.type}))})),c.createElement("div",{className:ea("bottom-layout"),style:{marginRight:""+n.toFixed(0)+"px"}},c.createElement("div",{className:ea("copyrights")},c.createElement(w.Z,{right:100,copyrightOnly:!0})),c.createElement("div",{className:ea("scale-line")},c.createElement(D,{location:this.props.location}))),c.createElement(m.Z,{onResize:this._repositionThrottled})),c.createElement("div",{className:eh}),c.createElement("div",{className:eg}))},(0,r._)(t,[{key:"_isFlyover",get:function(){var e;return!!(null==(e=this.props.config.flyover)?void 0:e.isEnabled)}}]),t}(c.Component),e_=function(e){return c.createElement(v.Z,{selector:"."+eg},e.children)},eb=(0,f.ZP)(ey)},59093:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(13688),u=n(57636),c=(0,i.Z)("map-widget-nearest-stops-view"),l=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderFromStopDistance=function(e){var n={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},r={coords:e.coordinates,value:""},i=(0,s._)((0,s.V)([r,n],{travelMode:"pedestrian"},t.props.config));return o.createElement("a",{className:c("distance"),href:i,target:"_blank"},o.createElement("div",{className:c("distance-icon")},o.createElement(u.Z,{name:"pedestrian-24-flip",inline:!0,className:c("distance-icon-inner")})),o.createElement("div",{className:c("distance-text")},e.distance))},t._renderStop=function(e){var n="metro"===e.type?e.color:void 0;return o.createElement("div",{className:c("stop"),key:e.id},o.createElement("div",{className:c("metro-icon"),style:{color:n}},o.createElement(u.Z,{name:"metro-stop-24",inline:!0})),o.createElement("div",null,e.name),t._renderFromStopDistance(e))},t}return(0,r._)(t,e),t.prototype.render=function(){return this.props.result.metro?this.props.result.metro.map(this._renderStop):null},t}(o.Component),d=(0,a.ZP)(l)},35137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>nN});var r=n(34788),o=n(18007),i=n(87363),a=n(31336),s=n(28361),u=n(17316),c=n(41886),l=n(12574),d=n(11912),p=n(44748),f=n(33228),m=n(4670),v=n(15900),h=n(99209),g={};function y(e,t){if(!t.offset||!t.size)return{left:0,right:0,bottom:0,top:0};var n=t.offset[0],r=t.offset[0],o=t.offset[1],i=t.offset[1]+t.size.height;return"MASSTRANSIT"===e.pinType&&(n+=e.rotated?-t.size.width:-7,r+=e.rotated?7:t.size.width),"CONSTRUCTION"===e.pinType&&(n+=-10,r=r+t.size.width+-10,o+=-30,i+=-30),"ROUTEPOINT"===e.pinType&&(n-=t.size.width/2,r+=t.size.width/2,o=o+8-10,i+=8),"SPECIAL"===e.pinType&&(n+=-12,r=r+t.size.width+-12,o+=-24,i+=-24),{left:n,right:r,top:o,bottom:i}}function _(e,t,n,r){return Promise.all(e.map(function(e){var o;return g[o=w(e)]=g[o]||(0,h.Z)(function(){return t(e)},r),g[o].then(function(t){var r=(0,v.f)(n.bounds[0],n.zoom),o=(0,v.f)(e.coordinates,n.zoom);return{size:t,offset:[o[0]-r[0],o[1]-r[1]]}})})).then(function(t){return e.map(function(n,r){return function(e,t,n){var r=e[n],o=t[n];if(!o.offset||!o.size)return[];var i=y(r,o);return i.left===i.right||i.top===i.bottom?[]:e.reduce(function(e,n,o){if(r===n)return e;var a=t[o];if(!a.offset||!a.size)return e;var s=y(n,a);return s.left===s.right||s.top===s.bottom?e:(0,m.Y)([[i.left,i.top],[i.right,i.bottom]],[[s.left,s.top],[s.right,s.bottom]])?e.concat(o):e},[])}(e,t,r)})})}function b(e,t,n,r){return _(e,t,n,r).then(function(e){return e.every(function(e){return 0===e.length})})}function w(e){switch(e.pinType){case"CONSTRUCTION":return e.coordinates.join(",")+e.pinType;case"MASSTRANSIT":return(e.balloonItems&&String(e.balloonItems.length)||"0")+("string"==typeof e.text?e.text:e.cacheText||"")+(e.dotSize||"")+(e.rotated||"")+e.pinType+e.coordinates.join(",")+e.pinIndex;case"ROUTEPOINT":return(String(e.index)||0)+(e.value||"")+e.pinType+(e.isLast&&"last");case"SPECIAL":return e.coordinates.join(",")+e.position+e.pinType}}var E=n(96449),S=n(78597),C=n(49297),k=n(111),R={ROUTEPOINT:"ROUTEPOINT",MASSTRANSIT:"MASSTRANSIT",CONSTRUCTION:"CONSTRUCTION",SPECIAL:"SPECIAL"},x=function(e){function t(t){var n;return(n=e.call(this,t)||this)._validityChecksCounter=0,n._processingTimeout=0,n._routeComponentProcessingFunction=function(e,t){var r;return 1===e.length?Promise.resolve(e):(r=e.sort(function(e,t){return e.pinIndex>t.pinIndex?1:-1}),n.props.algoSteps.reduce(function(e,n){return e.then(function(e){return e.optimized?e:t(e.pins,n)})},Promise.resolve({pins:r,optimized:!1}))).then(function(e){return e.pins})},n._updatePins=function(){n._validityChecksCounter=0,window.clearTimeout(n._processingTimeout),n._validateDrawing(n.props.unprocessedPins.map(function(e,t){return(0,r._)({pinIndex:t},e)}))},n._collectAndProcessGroups=function(e){var t=n.state.mapLocation,r=n.props.config;_(e,n.props.getNodeByPin,t,r).then(function(o){Promise.all((function(e){for(var t=Array(e.length).map(function(){return!1}),n=[],r=0;r<e.length;r++)if(!t[r]){var o=[r],i=[r];for(t[r]=!0;o.length>0;)for(var a=e[o.pop()],s=0;s<a.length;++s){var u=a[s];t[u]||(t[u]=!0,o.push(u),i.push(u))}n.push(i)}return n})(o).map(function(o){var i=o.map(function(t){return e[t]});return n._routeComponentProcessingFunction(i,function(e,o){return function e(t,n,r,o,i,a){return new Promise(function(s){if(1===t.length)s({pins:t,optimized:!0});else if(i>10)s({pins:t,optimized:!1});else{var u=n(t);b(u.pins,r,o,a).then(function(t){t?s({pins:u.pins,optimized:!0}):u.isFinished?u.isFinished&&s({pins:u.pins,optimized:!1}):s(e(u.pins,n,r,o,i++,a))})}})}(e,o,n.props.getNodeByPin,t,0,r)})})).then(function(e){var t=e.reduce(function(e,t){return e.concat(t)});n._validateDrawing(t)})})},n._updateMapLocation=function(){var e=n.props.map.zoom;.25>Math.abs(n.state.mapLocation.zoom-e)||n.setState({mapLocation:(0,C.cx)(n.props.map)})},n._onMapUpdate=function(){n._updateMapLocationThrottled()},n._validateDrawing=function(e){n._validityChecksCounter+=1;var t=n.props.filterPinsByZoom(e,n.state.mapLocation.zoom);if(n._validityChecksCounter>=2){n.setState({pinsToDraw:t});return}b(t,n.props.getNodeByPin,n.state.mapLocation,n.props.config).then(function(e){if(e){n.setState({pinsToDraw:t});return}n._processingTimeout=window.setTimeout(function(){return n._collectAndProcessGroups(t)},50)})},n.state={pinsToDraw:[],mapLocation:(0,C.cx)(n.props.map)},n._updateMapLocationThrottled=(0,k.Z)(n._updateMapLocation,300),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._validityChecksCounter=0,this._validateDrawing(this.props.unprocessedPins.map(function(e,t){return(0,r._)({pinIndex:t},e)}))},n.componentDidUpdate=function(e,t){(this.state.mapLocation.zoom!==t.mapLocation.zoom||this.props.unprocessedPins!==e.unprocessedPins)&&this._updatePins()},n.componentWillUnmount=function(){window.clearTimeout(this._processingTimeout)},n.render=function(){var e=this;return i.createElement(i.Fragment,null,this.state.pinsToDraw.map(function(t){var n=e.props.getMapPlacemarkProps(t);return n?i.createElement(E.Z,(0,r._)({key:function(e){switch(e.pinType){case"CONSTRUCTION":case"MASSTRANSIT":case"SPECIAL":return w(e);case"ROUTEPOINT":return(String(e.index)||0)+e.pinType+(e.isLast&&"last")}}(t)},n),e.props.getNodeByPin(t)):null}),i.createElement(l.Z,{onUpdate:this._onMapUpdate}))},t}(i.Component),P=(0,S.ZP)({shouldWait:!0})((0,a.ZP)(x)),M=n(51815),I=n.n(M),T=n(79454),Z=n.n(T),D=n(61146),L=n.n(D),A=n(95550),N=n.n(A),z=n(63129),F=n.n(z),U=n(11504),O=n.n(U),q=n(74210),B=n.n(q),H=n(97313),j=n(61111),W=n(57636),G=n(18188),Y=n(32584),V=Object.entries(Y.V).reduce(function(e,t){var n=(0,G._)(t,2),r=n[0],o=n[1];return e[r]=null==o?void 0:o.normal,e},{walk:"pedestrian-16-flip"}),K=n(85172),X=n(41057),J=(0,p.Z)("masstransit-route-pin-view"),$=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(e){var n=t.props,r=e||n.balloonItems&&n.balloonItems[0].stopId;r&&n.onClick&&n.onClick({coordinates:n.coordinates,id:r})},t._renderBalloonItem=function(e){var n,r="underground"===e.iconType&&e.transportSystemId,o=r?null==(n=Y.x[e.transportSystemId])?void 0:n.small:"metro-exit"===e.iconType?void 0:V[e.iconType];return i.createElement(X.Z,{className:J("balloon-item",{type:e.iconType}),style:{backgroundColor:"underground"!==e.iconType?e.color:void 0},onClick:function(){return t._onClick(e.stopId)}},o?i.createElement(W.Z,{inline:!0,className:J("balloon-icon"),name:o,theme:r?t.props.theme:void 0}):null,e.text?i.createElement("div",{className:J("balloon-text"),style:{backgroundColor:e.color}},e.text):null)},t._renderBalloon=function(){var e=t.props.balloonItems;return e?i.createElement("div",{className:J("balloon")},t._renderBalloonItem(e[0]),e[1]?i.createElement(i.Fragment,null,i.createElement(W.Z,{name:"arrow-right-8-flip",className:J("arrow"),inline:!0}),t._renderBalloonItem(e[1])):null):null},t._renderText=function(){return t.props.text?i.createElement(X.Z,{tag:"span",className:J("text"),onClick:function(){return t._onClick()}},t.props.text):null},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.balloonItems&&t.balloonItems[t.balloonItems.length-1].color||t.dotColor,r=t.dotSize||"normal";return i.createElement("div",{className:J({rotated:t.rotated,double:t.balloonItems&&2===t.balloonItems.length,clickable:!!t.onClick})},i.createElement("div",{className:J("container")},i.createElement("div",{"aria-hidden":!0,className:J("dot",{size:r}),style:{background:n},onClick:function(){return e._onClick()}}),this._renderBalloon()),this._renderText())},t}(i.PureComponent),Q=(0,K.ZP)((0,a.ZP)($)),ee=n(59410),et=n(89318),en=n(75093),er=n.n(en),eo=n(91034),ei=n.n(eo),ea=(0,p.Z)("waypoint-pin-view"),es=function(e){function t(t){(n=e.call(this,t)||this)._getServiceIconUrl=function(){var e=n.props;return e.serviceType&&"geolocation"!==e.serviceType?et.Gr({type:"service",name:e.serviceType,size:e.mobileChooseMode?"normal":"small"},e.config):null},n._getRubricIconUrl=function(){var e,t,r=n.props;if(r.searchResult&&("categories"in r.searchResult&&r.searchResult.categories?e=null==(t=r.searchResult.categories[0])?void 0:t.class:"kind"in r.searchResult&&(e=r.searchResult.kind),e))return et.Gr({type:"rubrics",name:e,size:r.mobileChooseMode?"normal":"small"},r.config)||void 0},n._renderText=function(){if(!n.props.text)return null;var e=(0,ee.Z)(n.props.text,{length:40});return i.createElement("div",{className:ea("text",{hidden:n.props.hideText})},e.split(" ").map(function(e,t){return i.createElement("span",{key:t,className:ea("word")},e)}))},n._renderWaypoint=function(){var e=n.props,t=n.state;return i.createElement(i.Fragment,null,i.createElement(f.Z,{url:e.mobileChooseMode?ei():er(),className:ea("pin-icon")}),i.createElement(f.Z,{url:t.currentIconUrl,key:t.currentIconUrl,className:ea("rubric-icon",{"mobile-choose":e.mobileChooseMode,current:!0,type:e.serviceType})}),t.temporaryIconUrl?i.createElement(f.Z,{url:t.temporaryIconUrl,key:t.temporaryIconUrl,className:ea("rubric-icon",{"mobile-choose":e.mobileChooseMode,temporary:!0})}):null,n._renderText())},n._renderIntermediatePoint=function(){var e=n.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:ea("content")},i.createElement("span",{className:ea("index")},e.index)),n._renderText())};var n,r=et.Gr({type:"rubrics",name:"fallback",size:t.mobileChooseMode?"normal":"small"},t.config),o=n._getServiceIconUrl()||n._getRubricIconUrl()||r;return n.state={temporaryIconUrl:null,currentIconUrl:o},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=this._getServiceIconUrl()||this._getRubricIconUrl();(t.serviceType||t.searchResult!==e.searchResult)&&n&&n!==this.state.currentIconUrl&&this.setState({temporaryIconUrl:this.state.currentIconUrl,currentIconUrl:n})},n.render=function(){var e=this.props,t=0===e.index,n=!t&&!e.isLast&&!e.mobileChooseMode;return"geolocation"===e.serviceType&&e.config.uatraits.isMobile?i.createElement("div",{className:ea({geolocation:!0})}):i.createElement("div",{className:ea({disabled:e.disabled,first:t,last:e.isLast,intermediate:n,"mobile-choose":e.mobileChooseMode})},n?this._renderIntermediatePoint():this._renderWaypoint())},t}(i.Component),eu=(0,a.ZP)(es),ec=n(51898);function el(e){return e.find(function(e){return!!e.isRecommended})||e[0]}var ed=n(9662),ep=n(7418);function ef(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}function em(e){if(e.filter(function(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}).length<2)return{pins:e,isFinished:!0};var t=e.findIndex(function(e){return ef(e)}),n=(0,ep.Z)(e[t],{type:"STAIRS_UNKNOWN"});return{pins:e.filter(function(e){return!ef(e)}).concat(n),isFinished:!0}}function ev(e){if(e.filter(function(e){return"CONSTRUCTION"===e.pinType}).length<2)return{pins:e,isFinished:!0};var t=e.findIndex(function(e){return"CONSTRUCTION"===e.pinType});return{pins:e.filter(function(e){return"CONSTRUCTION"!==e.pinType}).concat(e[t]),isFinished:!0}}function eh(e){return{pins:e.filter(function(e){return"CONSTRUCTION"!==e.pinType}),isFinished:!0}}function eg(e){return{pins:e.filter(function(e){return"MASSTRANSIT"!==e.pinType||"balloonItems"in e&&e.balloonItems||"dotSize"in e}),isFinished:!0}}function ey(e){var t=e.findIndex(function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems});if(-1!==t){var n=(0,d._)(e),r=n[t];return n[t]=(0,ep.Z)(n[t],{balloonItems:void 0,dotColor:r.balloonItems&&r.balloonItems[r.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0}),{pins:n,isFinished:!1}}return{pins:e,isFinished:!0}}function e_(e){return{pins:e.filter(function(e){var t;return"MASSTRANSIT"!==e.pinType||!e.balloonItems||(null==(t=e.balloonItems[0])?void 0:t.iconType)!=="metro-exit"}),isFinished:!0}}function eb(e){var t=eR(e);return t?ek(t,e):{pins:e,isFinished:!0}}function ew(e){var t=e.reduce(function(e,t,n){return"MASSTRANSIT"===t.pinType?e.concat(n):e},[]);return ek(t.length>2?t.slice(0,3):t.slice(0,2),e)}function eE(e){var t=eR(e);return t?function(e,t){var n=(0,G._)(e,2),o=n[0],i=n[1],a=t[o],s=t[i];if("MASSTRANSIT"!==a.pinType||"MASSTRANSIT"!==s.pinType||!a.balloonItems||!s.balloonItems)return{pins:t,isFinished:!0};var u=a.balloonItems[0].initialText===s.balloonItems[0].initialText&&a.balloonItems[0].color===s.balloonItems[0].color;return t[i]=u?(0,ep.Z)(s,(0,r._)({},a,{pinIndex:s.pinIndex,rotated:!1})):(0,ep.Z)(s,{rotated:!1,text:"",balloonItems:[a.balloonItems[0],s.balloonItems[0]]}),{pins:t.filter(function(e){return e.pinIndex!==a.pinIndex}),isFinished:!1}}(t,e):{pins:e,isFinished:!0}}function eS(e){var t=e.findIndex(function(e,t,n){var r=n[t+1];return r&&"MASSTRANSIT"===e.pinType&&"MASSTRANSIT"===r.pinType&&("string"==typeof e.text?e.text===r.text:e.cacheText===r.cacheText)}),n=-1!==t?[e[t],e[t+1]]:[];return 2===n.length&&"MASSTRANSIT"===n[0].pinType&&"MASSTRANSIT"===n[1].pinType?n[0].balloonItems&&1===n[0].balloonItems.length&&n[1].balloonItems&&1===n[1].balloonItems.length&&n[0].balloonItems[0].color!==n[1].balloonItems[0].color?{pins:e,isFinished:!0}:{pins:(0,d._)(e.filter(function(e){return!n.includes(e)})).concat([n[1]]),isFinished:!0}:{pins:e,isFinished:!0}}function eC(e){return{pins:e.map(function(e){return"MASSTRANSIT"!==e.pinType||!e.balloonItems||2===e.balloonItems.length||e.first?e:"MASSTRANSIT"!==e.pinType||1!==e.balloonItems.length||e.first?e:(0,ep.Z)(e,{balloonItems:void 0,dotColor:e.balloonItems&&e.balloonItems[e.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0})}),isFinished:!0}}function ek(e,t){var n=e.map(function(e){return t[e].rotated?1:0}),r=Math.pow(2,n.length)-1,o=parseInt(n.join(""),2);return o<r?((o+1).toString(2).padStart(n.length,"0").split("").map(Number).map(Boolean).forEach(function(n,r){t[e[r]]=(0,ep.Z)(t[e[r]],{rotated:n})}),{pins:t,isFinished:!1}):{pins:t,isFinished:!0}}function eR(e){for(var t=e.map(function(e,t){return{pin:e,index:t}}).filter(function(e){var t=e.pin;return"MASSTRANSIT"===t.pinType&&t.balloonItems&&1===t.balloonItems.length}),n=[],r=1;r<t.length;r++)if(t[r-1].pin.pinIndex===t[r].pin.pinIndex-1){n.push(t[r-1],t[r]);break}return n.length>0?[n[0].index,n[1].index]:null}function ex(e){var t=e.findIndex(function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems&&2===e.balloonItems.length});if(-1===t)return{pins:e,isFinished:!0};var n=e[t];if("MASSTRANSIT"!==n.pinType||!n.balloonItems||2!==n.balloonItems.length)return{pins:e,isFinished:!0};var r={pinIndex:n.pinIndex-1,balloonItems:[n.balloonItems[0]],coordinates:n.balloonItems[0].initialCoordinates,last:!0,pinType:R.MASSTRANSIT,rotated:!1,text:n.balloonItems[0].initialText},o={pinIndex:n.pinIndex,balloonItems:[n.balloonItems[1]],coordinates:n.balloonItems[1].initialCoordinates,first:!0,pinType:R.MASSTRANSIT,rotated:!1,text:n.balloonItems[1].initialText},i=(0,d._)(e);return i.splice(t,1,r,o),{pins:i,isFinished:!1}}function eP(e){return{pins:(0,d._)(e).map(function(e){return(0,ep.Z)(e,{rotated:!1})}),isFinished:!0}}function eM(e){if(e.filter(function(e){return"ROUTEPOINT"===e.pinType&&e.value}).length>1){var t=e.findIndex(function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0!==e.index&&!e.isLast}),n=(0,d._)(e);if(-1!==t)return n[t]=(0,ep.Z)(n[t],{value:""}),{pins:n,isFinished:!1};var r=e.findIndex(function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0===e.index});if(-1!==r)return n[r]=(0,ep.Z)(e[r],{value:""}),{pins:n,isFinished:!0}}return{pins:e,isFinished:!0}}function eI(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return!("SPECIAL"===e.pinType&&"end"===e.position)}),isFinished:!0}}function eT(e){if(e.length<2)return{pins:e,isFinished:!0};var t=e.filter(function(e){return"SPECIAL"!==e.pinType||["RAILWAY_CROSSING","SPEED_BUMP","BORDER_CROSSING"].includes(e.type)}),n=e.filter(function(e){return"SPECIAL"===e.pinType&&"FERRY"===e.type}),r=e.filter(function(e){return"SPECIAL"===e.pinType&&"TOLL_ROAD"===e.type}),o=e.filter(function(e){return"SPECIAL"===e.pinType&&"FORD_CROSSING"===e.type}),i=e.filter(function(e){return"SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type});return n.length&&t.push(n[0]),r.length&&t.push(r[0]),o.length&&t.push(o[0]),i.length&&t.push(i[0]),{pins:t,isFinished:!0}}function eZ(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return!("SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type)}),isFinished:!0}}function eD(e){return function(t){if(t.length<2)return{pins:t,isFinished:!0};var n=t.filter(function(t){return!("SPECIAL"===t.pinType&&t.type===e)});if(!n.length){var r=t.filter(function(e,t){return t%2==0});return{pins:r,isFinished:1===r.length}}return{pins:n,isFinished:!0}}}function eL(e){return 0===e.length?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return"SPECIAL"!==e.pinType}),isFinished:!0}}var eA=n(93522),eN=n(28182),ez=n.n(eN),eF=n(74039),eU=n.n(eF),eO=n(34638),eq={FORD_CROSSING:"Брод",RUGGED_ROAD:"Неровная дорога",TOLL_ROAD:"Платная дорога",FERRY:"Паромная переправа",RAILWAY_CROSSING:"Железнодорожный переезд",SPEED_BUMP:"Лежачий полицейский",BORDER_CROSSING:"Пункт пропуска"},eB={FORD_CROSSING:{ru:{begin:"poi-alerts-ford-crossing-24x27",end:"poi-alerts-ford-crossing-end-24x27"}},RUGGED_ROAD:{ru:{begin:"poi-alerts-road-rugged-24x27",end:"poi-alerts-rugged-end-24x27"}},TOLL_ROAD:{ru:{begin:"poi-alerts-pay-wd-24x27",end:"poi-alerts-pay-wd-end-24x27"}},FERRY:{ru:{begin:"poi-alerts-ship-24x27",end:"poi-alerts-ship-end-24x27"}},RAILWAY_CROSSING:{ru:{single:"poi-alerts-railway-crossing-24x27"}},SPEED_BUMP:{ru:{single:"poi-alerts-speed-bump-24x27"}},BORDER_CROSSING:{ru:{single:"poi-alerts-border-24x27"}}},eH={STAIRS_UP:I(),STAIRS_DOWN:L(),STAIRS_UNKNOWN:F(),STAIRS_RAMP_UNKNOWN:O(),STAIRS_RAMP_DOWN:N(),STAIRS_RAMP_UP:Z(),GATES:B()},ej=(0,p.Z)("route-pins-view"),eW=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updatePins=function(){n.setState({pins:(0,d._)(n._getRoutePointPins()).concat((0,d._)(n._getMasstransitPins()),(0,d._)(n._getConstructionPins()),(0,d._)(n._getSpecialRoadPins()))})},n._getUpdatedWaypointCoordinates=function(e,t){var r=n.props,o=r.routePoints.filter(function(e,t){return!r.viaIndexes.includes(t)})[t];return r.routePoints.map(function(t){return o===t?e:t.coords})},n._onDragStart=function(){n.props.setDragging(!0)},n._onDragMove=function(e,t){var r=n.props,o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!0})},n._onDragEnd=function(e,t){var r=n.props;r.setDragging(!1);var o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!1})},n._getMasstransitPins=function(){var e=n.props;return e.activeRoute&&"paths"in e.activeRoute?e.activeRoute.paths.reduce(function(t,n){var r,o,a;return t.concat((r=n.segments,o=e.config,a=function(e){if(!e)return null;var t,n,r=ed.U2(e,o),a=(null==(t=e.features)?void 0:t.cooled)?eU():(null==(n=e.features)?void 0:n.heated)?ez():void 0;return i.createElement(i.Fragment,null,e.name,e?i.createElement("span",{className:ej("masstransit-feature")},r,a?i.createElement(f.Z,{className:ej("masstransit-feature-icon"),url:a}):null):null)},r.reduce(function(e,t){if(!t.edgePoints||!t.transports)return e;var n,r,i=t.stops&&t.stops[0],s=t.stops&&t.stops[t.stops.length-1];return e.push({balloonItems:[eY(t.transports,t.edgePoints[0],i,o)],pinType:R.MASSTRANSIT,coordinates:t.edgePoints[0],rotated:!1,first:!0,text:a(i),cacheText:null==i?void 0:i.name},{pinType:R.MASSTRANSIT,dotColor:(0,eO.qZ)(eG(t.transports)),coordinates:t.edgePoints[1]}),(null==s?void 0:null==(r=s.exit)?void 0:r.name)&&e.push({pinType:R.MASSTRANSIT,balloonItems:[{iconType:"metro-exit",color:"#666",text:(n=s.exit).name,initialCoordinates:n.coordinates,initialText:n.name,stopId:null==s?void 0:s.id}],coordinates:s.exit.coordinates,rotated:!1,dotSize:"small",text:"Выход"}),e.push({pinType:R.MASSTRANSIT,balloonItems:[eY(t.transports,t.edgePoints[1],s,o)],coordinates:t.edgePoints[1],rotated:!1,last:!0,text:a(s),cacheText:null==s?void 0:s.name}),e},[])))},[]):[]},n._getMapPlacemarkProps=function(e){switch(e.pinType){case"CONSTRUCTION":return{coordinates:e.coordinates,zIndex:H.I.routes};case"MASSTRANSIT":return{coordinates:e.coordinates,zIndex:H.I.routePins.masstransit,blockEvents:!0};case"ROUTEPOINT":var t,r=n.props;if(!e.coords)return null;return{zIndex:0===e.index?H.I.routePins.waypoint+1:e.isLast?H.I.routePins.waypoint+2:H.I.routePins.waypoint,coordinates:e.coords,draggable:r.draggable&&!e.disabled&&(!r.draggableIndexes||(null==(t=r.draggableIndexes)?void 0:t.includes(e.index))),onDragStart:n._onDragStart,onDragEnd:function(t){var r=t.coordinates;return n._onDragEnd(r,e.index)},onDragMove:function(t){var r=t.coordinates;return n._onDragMove(r,e.index)}};case"SPECIAL":return{zIndex:H.I.routes,coordinates:e.coordinates}}},n._getConstructionPins=function(){var e=n.props;return e.activeRoute&&"constructions"in e.activeRoute?e.activeRoute.constructions.map(function(e){return(0,r._)({},e,{pinType:R.CONSTRUCTION})}):[]},n._getSpecialRoadPins=function(){var e=n.props;return e.activeRoute&&"specialRoadPoints"in e.activeRoute&&e.activeRoute.specialRoadPoints?e.activeRoute.specialRoadPoints.map(function(e){return(0,r._)({},e,{pinType:R.SPECIAL})}):[]},n._getRoutePointPins=function(){var e,t,o=n.props,i="taxi"===o.travelMode,a=(e=o.travelMode,t=o.config,e&&(0,ec.M)(e,t)?t.routes.maxB2BCount:t.routes.maxCount),s=o.routePoints.every(function(e){return!e.coords||!!e.input})&&!o.isRoutePointDragging;return o.routePoints.filter(function(e,t){return!o.viaIndexes.includes(t)}).map(function(e,t,n){var o=i&&0!==t&&t!==n.length-1||t>=a-1&&t!==n.length-1;return(0,r._)({},e,{pinType:R.ROUTEPOINT,coordinates:e.coords||[0,0],disabled:o,showText:s,index:t,isLast:t===n.length-1})})},n._getConstructionNode=function(e){var t=e.type?eH[e.type]:null;return t?i.createElement("div",{className:ej("construction",{type:e.type})},i.createElement(f.Z,{url:t})):null},n._getSpecialRoadPinNode=function(e){var t=n.props.config,r=eB[e.type];if(!r)return null;var o=eq[e.type],a=r[t.lang],s=(0,et.XT)(t)?r.ru:r.en,u=r.ru,c=a||s||u;return o?i.createElement(eA.Z,{position:["top"],text:o,size:"s"},function(t){return i.createElement("div",{className:ej("special-road",{type:e.type,position:e.position}),ref:t},i.createElement(W.Z,{name:c[e.position]}))}):i.createElement("div",{className:ej("special-road",{type:e.type,position:e.position})},i.createElement(W.Z,{name:c[e.position]}))},n._getMasstransitPinNode=function(e){var t=n.props,o=!t.activeRoute||"isIntercityRoute"in t.activeRoute&&t.activeRoute.isIntercityRoute||t.isMapEditing?void 0:t.onStopClick;return i.createElement(Q,(0,r._)({},e,{onClick:o}))},n._getWaypointPinNode=function(e){return i.createElement(eu,{text:e.value,hideText:!e.showText,index:e.index,isLast:e.isLast,disabled:e.disabled,searchResult:e.searchResult,serviceType:e.serviceType})},n._getRouteItemPinNode=function(e){switch(e.pinType){case"CONSTRUCTION":return n._getConstructionNode(e);case"MASSTRANSIT":return n._getMasstransitPinNode(e);case"ROUTEPOINT":return n._getWaypointPinNode(e);case"SPECIAL":return n._getSpecialRoadPinNode(e)}},n._getAlgoSteps=function(){var e=[em,ev,eh],t=n.props.activeRoute&&"masstransit"===n.props.activeRoute.type?[eg,eS,eb,e_,eP,eb,eE,eC,ex,eC,eP,ew,eP,ey]:[],r=[eM],o=[eD("SPEED_BUMP"),eD("RAILWAY_CROSSING"),eZ,eD("TOLL_ROAD"),eD("FERRY"),eD("FORD_CROSSING"),eI,eT,eD("BORDER_CROSSING"),eL];return(0,d._)(e).concat((0,d._)(t),(0,d._)(r),(0,d._)(o))},n._filterPinsByZoom=function(e,t){return e.filter(function(e){return!("SPECIAL"===e.pinType&&"SPEED_BUMP"===e.type&&t<12)})},n.state={pins:[]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){(this.props.activeRoute!==e.activeRoute||this.props.routePoints!==e.routePoints)&&this._updatePins()},n.componentDidMount=function(){this._updatePins()},n.render=function(){return i.createElement(i.Fragment,null,i.createElement(P,{unprocessedPins:this.state.pins,getNodeByPin:this._getRouteItemPinNode,getMapPlacemarkProps:this._getMapPlacemarkProps,algoSteps:this._getAlgoSteps(),filterPinsByZoom:this._filterPinsByZoom}),this.state.pins.filter(function(e){return e.pinType===R.ROUTEPOINT}).map(function(e){var t,n=e.uri||(null==(t=e.searchResult)?void 0:t.uri);return n?i.createElement(j.Z,{key:n,uri:n}):null}))},t}(i.Component);function eG(e){var t=el(e);return ed.Sm(t)}function eY(e,t,n,r){var o=el(e);return{iconType:o.type,color:eG(e),transportSystemId:o.transportSystemId,text:"underground"===o.type&&o.shortName?o.shortName:o.contour?o.contour.name:ed.AC(o.type)?ed.TX(o.type,r):o.name,initialCoordinates:t,initialText:null==n?void 0:n.name,stopId:null==n?void 0:n.id}}var eV=(0,a.ZP)(eW),eK=n(91260),eX=n(52193);function eJ(e){return{type:"LineString",coordinates:e.coordinates||[]}}var e$=n(2267),eQ=n(55877),e0=n.n(eQ),e1=n(90585),e2=n(99870),e4=n(43410),e3=(0,e1.Z)(e4.Z,(0,S.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=e0().v4(),t.map.addGroup(n._dataSourceId,n._id,t.style,t.parentGroupId),n}(0,o._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.map.removeGroupAndChildren(this._dataSourceId,this._id)},n.render=function(){return i.createElement(e4.Q,{value:{parentGroupId:this._id}},this.props.children)},(0,e$._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||e2.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent)),e8={main:u.nz.pedestrian.main,underlay:u.nz.pedestrian.underlay,dash:[5,10]},e7=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getStrokeStyleByType=function(e){return{simplifyPalette:!1,width:e8.main,dash:e8.dash,opacity:"undergroundWalk"===e?.5:1,palette:t.props.activeRoute.colorizeInfo.map(function(t){var n=t.type,r=t.count;return{color:n===e?"binding"===n?u.uC:"#6000ff":eX.L,count:r}})}},t._getActiveStyle=function(){return[t._getStrokeStyleByType("undergroundWalk"),t._getStrokeStyleByType("walk"),t._getStrokeStyleByType("binding"),{width:e8.underlay,color:u.Ly.underlay}]},t._getInactiveStyle=function(){return[{width:e8.main,color:"dark"===t.props.config.theme?u.Ly.inactiveDark:u.Ly.inactiveLight},{width:e8.underlay,color:u.Ly.underlay}]},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(e3,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},i.createElement(eK.Z,{key:t.activeRoute.uuid,dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:this._getActiveStyle(),cursor:"default",zIndex:10},geometry:eJ(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?t.inactiveRoutes.map(function(n){return i.createElement(eK.Z,{key:n.uuid,dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:e._getInactiveStyle(),cursor:"pointer"},geometry:eJ(n),onFastClick:function(e,r){return t.onRouteClick(n,r.coordinates)}})}):null)},t}(i.Component),e6=(0,a.ZP)(e7),e5=n(84238),e9=n(63966),te=n.n(e9),tt=n(73449),tn=n.n(tt),tr=n(68170),to=n.n(tr),ti=n(61159),ta=n.n(ti),ts=n(2629),tu=n.n(ts),tc=n(30334),tl=n.n(tc),td=n(85767),tp=n.n(td),tf=n(39990),tm=n.n(tf),tv=n(74721),th=n.n(tv),tg=n(81029),ty=n.n(tg),t_=n(43161),tb=n.n(t_),tw=n(83984),tE=n.n(tw),tS=n(94308),tC=n.n(tS),tk=n(27367),tR=n.n(tk),tx=n(86605),tP=n.n(tx),tM=n(81148),tI=n.n(tM),tT=n(77994),tZ=n.n(tT),tD=n(26093),tL=n.n(tD),tA=n(8872),tN=n.n(tA),tz=n(55583),tF=n.n(tz),tU={start:[te()],middle:["",tn(),to(),ta(),tu(),tl(),tp(),tm(),th(),ty()].concat(Array(40).fill(tF())),finish:["",tb(),tE(),tC(),tR(),tP(),tI(),tZ(),tL(),tN()].concat(Array(40).fill(tN()))},tO=(0,a.ZP)(function(e){var t,n,r,o;return e.cursor?i.createElement(e5.Z,{src:(t=e.cursor,r=(n=(0,G._)(t.split("_"),2))[0],o=n[1],tU[r][Number(o)]),basePoint:[32,44]}):null}),tq={19:{main:8,underlay:12},18:{main:6,underlay:10},12:{main:4,underlay:8}};function tB(e){return tq[e<=12?12:e<=18?18:19]}var tH="#737ce6",tj=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getInactiveDrawingStyle=function(){return{stroke:[{width:u.nz.inactive.main,color:"dark"===t.props.config.theme?u.Ly.inactiveDark:u.Ly.inactiveLight},{width:u.nz.inactive.underlay,color:u.Ly.underlay}],cursor:"pointer"}},t._getBicycleActiveDrawingStyle=function(){var e=t.props.mapLocation.zoom>=17,n={width:tB(t.props.mapLocation.zoom).main,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(t){return{count:t.count,color:["PEDESTRIAN","PEDESTRIAN_UNDERGROUND"].includes(t.type)&&e||"BINDING"===t.type?eX.L:"AUTO"===t.type?tH:"#54b235"}})},r={width:u.nz.bicycle.main,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"BINDING"===e.type?u.uC:eX.L}}),dash:[5,10]},o={width:e?u.nz.bicycle.main:0,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"PEDESTRIAN"===e.type?tH:eX.L}}),dash:[5,10]},i={width:e?u.nz.bicycle.main:0,opacity:.5,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"PEDESTRIAN_UNDERGROUND"===e.type?tH:eX.L}}),dash:[5,10]};return{stroke:[{width:u.nz.bicycle.route,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"BICYCLE"===e.type?"#fff":eX.L}}),dash:[2,4]},n,r,o,i,{width:tB(t.props.mapLocation.zoom).underlay,color:u.Ly.underlay}],cursor:"default",zIndex:10}},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(e3,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:1}},i.createElement(eK.Z,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:this._getBicycleActiveDrawingStyle(),geometry:eJ(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?i.createElement(e3,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},t.inactiveRoutes.map(function(n){return i.createElement(eK.Z,{key:n.uuid,dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:e._getInactiveDrawingStyle(),geometry:eJ(n),onFastClick:function(e,r){return t.onRouteClick(n,r.coordinates)}})})):null)},t}(i.Component),tW=(0,a.ZP)(tj),tG=n(44953),tY=n(22712),tV=n(85087),tK=n(12690),tX=n(39029),tJ=n(35645),t$=(0,p.Z)("mrc-map-icon-view"),tQ=(0,tJ.Z)(function(e){return i.createElement(E.Z,{disableRoundCoordinates:!0,coordinates:e.coordinates,nonInteractive:!e.onClick,zIndex:e.zIndex,onClick:e.onClick},i.createElement("div",{className:t$({type:e.type||"main"}),style:{transform:"rotate("+(e.direction?e.direction:0)+"deg)"},ref:e.forwardedRef?e.forwardedRef:null}))}),t0=n(36887),t1=n(13340),t2=(0,p.Z)("mrc-preview-balloon"),t4={main:20,side:20},t3=function(e){function t(t){var n;return(n=e.call(this,t)||this)._image=i.createRef(),n._onLoad=function(){n.setState({isPreviewLoaded:!0})},n._renderSpinner=function(){var e;return n.state.isPreviewLoaded||(null==(e=n._image.current)?void 0:e.complete)?null:i.createElement("div",{className:t2("placeholder")},i.createElement("div",{className:t2("spinner")},i.createElement(t0.Z,{view:"large"})))},n.state={isPreviewLoaded:!1},n}return(0,o._)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(tG.ZP,{name:"preview_balloon"},i.createElement("div",{ref:e.forwardedRef,className:t2()},i.createElement(t1.Z,{type:"transparent",coordinates:e.coordinates,position:"bottom-right",offset:t4,onClose:function(){},showArrow:!1,isShown:!0},i.createElement("div",{className:t2("balloon")},this._renderSpinner(),i.createElement("img",{ref:this._image,className:t2("image",{loaded:this.state.isPreviewLoaded}),src:e.image.url,onLoad:this._onLoad})))))},t}(i.Component),t8=(0,tJ.Z)(t3),t7=n(28216),t6=n(3705),t5=(0,n(70427).Z)(function(){return n.e("mrc").then(n.bind(n,35766))},{restorePlayerFromRoutes:!0,openPlayer:!0,closePlayer:!0,openSimilar:!0,closeSimilar:!0,changePathIndex:!0,fetchSimilar:!0,enableLayer:!0,disableLayer:!0,play:!0,pause:!0,setGraphType:!0,replaceChunkFeatures:!0,updatePhotoCache:!0}),t9=function(){function e(){this._queue=[],this._isPending=!1}var t=e.prototype;return t._runNext=function(){var e=this;if(!this._isPending){var t=this._queue[this._queue.length-1];t&&(this._isPending=!0,t.runFn().finally(function(){e._isPending=!1,e._queue=e._queue.filter(function(e){return e.runFn!==t.runFn}),e._runNext()}))}},t.add=function(e,t){var n=this,r=!1;return{promise:new Promise(function(o,i){n._queue.push({runFn:function(){return r?Promise.resolve().then(i):e().then(o).catch(i)},meta:t}),n._runNext()}),abort:function(){r=!0}}},t.has=function(e){return!!this._queue.find(function(t){return e(t.meta)})},e}(),ne=new t9,nt=new t9,nn=function(e){var t,n,r,o;return t=(0,a.ZR)(),n=t7.I0(),i.useEffect(function(){var r=e.feature.chunkId;if(!(!r||ne.has(function(e){return e===r}))){var o=ne.add(function(){return t6.CA({chunkId:r},t).catch(function(){return null})},r);return o.promise.then(function(t){if(t)n(t5.replaceChunkFeatures(r,t));else{var o=e.featureCollection.features.filter(function(e){return e.chunkId===r});n(t5.updatePhotoCache(o.map(function(e){return e.photoId}),[]))}}).catch(function(){}),function(){o.abort()}}},[]),r=(0,a.ZR)(),o=t7.I0(),i.useEffect(function(){if(!(e.feature.chunkId||e.feature.photo||nt.has(function(t){return t.includes(e.feature.photoId)}))){var t=function(e,t){for(var n=[],r=0;n.length<200;){var o=e-r,i=e+(r||1),a=t.features[o],s=t.features[i];if(!a||a.photo||a.chunkId||n.push(a.photoId),!s||s.photo||s.chunkId||n.push(s.photoId),o<=0&&i>=t.features.length-1)break;r++}return n}(e.featureCollection.features.findIndex(function(t){return t.photoId===e.feature.photoId}),e.featureCollection),n=nt.add(function(){return t6.n(t,r).then(function(e){return e||[]}).catch(function(){return[]})},t);return n.promise.then(function(e){o(t5.updatePhotoCache(t,e))}),function(){n.abort()}}},[]),null},nr=n(12276),no=function(e){function t(t){var n;return(n=e.call(this,t)||this)._leaveTimer=0,n._getNearestFeature=function(e){var t=n.props,r=(0,tV.Z)(t.featureCollection.features,function(t){var r=nr.Fg(t,n.props.featureCollection);return(0,tK.g)(r,e)});if(!r||r.photoId!==t.selectedFeatureId)return r},n._onClick=function(){var e=n.state.currentFeature;e&&n.props.onClick&&n.props.onClick(e.photoId),n.setState({currentFeature:null})},n._onMouseMove=function(e,t){var r=t.coordinates,o=(0,tX.x)(n.props.featureCollection.features.map(function(e){return nr.Fg(e,n.props.featureCollection)}),r,n.props.lineWidth,n.props.zoom);if(o&&!("point"in o)){var i=n._getNearestFeature(o);n.setState({currentFeature:i||null})}},n._onMouseEnter=function(){window.clearTimeout(n._leaveTimer)},n._onMouseLeave=function(){n._leaveTimer=window.setTimeout(function(){n.setState({currentFeature:null})},200)},n._renderPreview=function(){var e=n.state;if(!e.currentFeature)return null;if(!e.currentFeature.photo)return i.createElement(nn,{key:e.currentFeature.photoId,feature:e.currentFeature,featureCollection:n.props.featureCollection});var t=nr.Fg(e.currentFeature,n.props.featureCollection);return"placemark"===n.props.preview?i.createElement(tQ,{coordinates:t,direction:e.currentFeature.photo.heading,type:"additional"}):i.createElement(t8,{coordinates:t,image:e.currentFeature.photo.imagePreview})},n.state={currentFeature:null},n._onMouseMove=(0,k.Z)(n._onMouseMove,16),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;if(this.props.featureCollection.features!==e.featureCollection.features&&this.state.currentFeature){var n=nr.Fg(this.state.currentFeature,this.props.featureCollection),r=this.props.featureCollection.features.find(function(e){var n;return(null==(n=t.state.currentFeature)?void 0:n.photoId)===e.photoId})||this._getNearestFeature(n)||null;this.setState({currentFeature:r})}},n.componentWillUnmount=function(){window.clearTimeout(this._leaveTimer)},n.render=function(){var e=this.props;return i.createElement(i.Fragment,null,e.children({onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick}),this._renderPreview())},t}(i.Component),ni=n(94960),na={CLOSED:{color:"#333",border:"#000"},UNKNOWN:{color:"#b3b3b3",border:"#8e8e8e"},FREE:{color:"#47ca0b",border:"#2f8109"},LIGHT:{color:"#faff00",border:"#999c03"},HARD:{color:"#ff0003",border:"#9c0304"},VERY_HARD:{color:"#98201f",border:"#791918"}},ns={default:{underlay:8,main:6,border:void 0},colorize:{underlay:12,main:6,border:8}};function nu(e,t){var n,r,o=e.route,i=e.isDefaultColor,a=t.uatraits.isMobile?ns:u.Gz,s=i?a.default:a.colorize;return{mainStyle:(n=o.colorizeInfo||[],i?{width:s.main,color:u.Ly.main}:{width:s.main,palette:n.map(function(e){return{count:e.count,color:na[e.type].color}})}),borderStyle:(r=o.colorizeInfo||[],i?{}:{width:s.border,palette:r.map(function(e){return{count:e.count,color:na[e.type].border}})}),underlayStyle:{width:s.underlay,color:u.Ly.underlay}}}function nc(e,t){var n=e.route,r=e.isActive,o=e.isDefaultColor;if(!r)return{stroke:[{width:u.Gz.default.main,color:"dark"===t.theme?u.Ly.inactiveDark:u.Ly.inactiveLight},{width:u.Gz.default.underlay,color:u.Ly.underlay}],cursor:"pointer"};var i=nu({route:n,isDefaultColor:o},t);return{zIndex:10,stroke:[i.mainStyle,i.borderStyle,i.underlayStyle],cursor:"default"}}var nl=(0,p.Z)("map-routes-auto-view"),nd=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getPoints=function(){var e=n.props;return e.activeRoute.refPointsLineCoordinates.map(function(t,r){return n.state.editingIndex===r?e.routePoints[r].coords:t})},n._getPointsWithVia=function(){return{points:n.props.routePoints.map(function(e){return e.coords}),isViaPoints:n.props.routePoints.map(function(e,t){return n.props.viaIndexes.includes(t)})}},n._getViaIndexesFromRefsWithVia=function(e){return e.map(function(e,t){return e?t:0}).filter(Boolean)},n._removeViaPoint=function(e){if(n.props.onRoutePointsChange){var t=n._getPointsWithVia(),r=t.points,o=t.isViaPoints;r.splice(e,1),o.splice(e,1),n.props.onRoutePointsChange(r,{viaIndexes:n._getViaIndexesFromRefsWithVia(o),isRough:!1})}},n._addViaPoint=function(e,t){if(n.props.onRoutePointsChange){var r=n._getPointsWithVia(),o=r.points,i=r.isViaPoints;o.splice(t,0,e),i.splice(t,0,!0),n.props.setDragging(!0),n.props.onRoutePointsChange(o,{viaIndexes:n._getViaIndexesFromRefsWithVia(i),isRough:!1})}},n._updateViaPoint=function(e,t,r){if(n.props.onRoutePointsChange){var o=n.props.routePoints.slice().map(function(e){return e.coords});o.splice(t,1,e),n.setState({editingIndex:r?t:void 0}),n.props.onRoutePointsChange(o,{viaIndexes:n.props.viaIndexes,isRough:r})}},n._getActiveRouteStrokeStyles=function(){var e=n.props;return nu({route:e.activeRoute,isDefaultColor:e.isDefaultColor},e.config)},n._onPointUpdate=function(e,t,r){n._updateViaPoint(e,t,!r),n.props.setDragging(!r)},n._onMapUpdate=function(){n.setState({mapAzimuth:n.props.map.azimuth})},n._renderPointElement=function(e){return n.props.activeRoute.refPointsLineCoordinates.reduce(function(e,t,r){return n.props.viaIndexes.includes(r)?e:e.concat(r)},[]).includes(e)?null:i.createElement("div",{className:nl("via-point")})},n._renderActiveRoute=function(e){var t=n.props,o=n._getActiveRouteStrokeStyles().underlayStyle.width,a=e?{onLineMouseEnter:e.onMouseEnter,onLineMouseMove:e.onMouseMove,onLineMouseLeave:e.onMouseLeave,onPreviewPointMouseLeave:e.onMouseLeave}:{};return i.createElement(tY.Z,(0,r._)({lineStyle:{stroke:[{width:o,opacity:0}],zIndex:12},polyLineCoordinates:t.activeRoute.coordinates||[],points:n._getPoints(),renderPointElement:n._renderPointElement,previewPointElement:i.createElement("div",{className:nl("via-point",{preview:!0})}),isActive:t.isEditorActive,onPointAdd:n._addViaPoint,onPointUpdate:n._onPointUpdate,onPointRemove:n._removeViaPoint,onPreviewPointClick:function(r,o){o&&n.props.onRouteClick(t.activeRoute,o.coordinates),null==e||e.onClick()}},a))},n._renderActiveMrcFeature=function(){var e=n.props;if(e.isMrcPlayerHidden||e.isLoading||"comparison"===e.travelMode||e.feedback&&"route/edit/better"===e.feedback.type||!e.mrcFeatureCollection||!e.activeMrcIndex&&0!==e.activeMrcIndex||e.isRoutePointDragging||!e.isMrcPlaying&&0===e.activeMrcIndex)return null;var t=e.mrcFeatureCollection.features[e.activeMrcIndex];if(!t.photo)return null;var r=nr.Fg(t,e.mrcFeatureCollection);return i.createElement(i.Fragment,null,i.createElement(tQ,{coordinates:r,direction:t.photo.heading+(0,ni.Z)(n.state.mapAzimuth)}),i.createElement(l.Z,{onUpdate:n._onMapUpdate}))},n.state={mapAzimuth:t.map.azimuth},n}return(0,o._)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=this._getActiveRouteStrokeStyles().underlayStyle.width,o=(null==(e=n.feedback)?void 0:e.type)!=="route/edit/better"&&!n.config.uatraits.isMobile&&"comparison"!==n.travelMode;return i.createElement(i.Fragment,null,o?i.createElement(tG.ZP,{name:"mrc_route_thread",logClick:!0},i.createElement(no,{featureCollection:n.mrcFeatureCollection||nr.qT([],[]),lineWidth:r,zoom:n.zoom,onClick:n.onMrcClick,preview:"balloon"},this._renderActiveRoute)):this._renderActiveRoute(),n.inactiveRoutes?i.createElement(e3,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.8}},n.inactiveRoutes.map(function(e){return i.createElement(eK.Z,{key:e.uuid,dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:nc({route:e,isActive:!1,isDefaultColor:n.isDefaultColor},n.config),geometry:eJ(e),onFastClick:function(n,r){return t.props.onRouteClick(e,r.coordinates)}})})):null,i.createElement(e3,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.7,zIndex:1}},i.createElement(eK.Z,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:nc({route:n.activeRoute,isActive:!0,isDefaultColor:n.isDefaultColor},n.config),geometry:eJ(n.activeRoute)})),n.config.uatraits.isMobile?null:this._renderActiveMrcFeature())},t}(i.Component),np=(0,S.ZP)({shouldWait:!0})((0,a.ZP)(nd)),nf={main:u.nz.masstransit.pedestrian,dash:[5,10]},nm="#9d64fb",nv=(0,p.Z)("map-routes-masstransit-view"),nh=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getInactiveDrawingStyle=function(){return{stroke:[{width:u.nz.inactive.main,color:"dark"===t.props.config.theme?u.Ly.inactiveDark:u.Ly.inactiveLight},{width:u.nz.inactive.underlay,color:u.Ly.underlay}],cursor:"pointer"}},t._getStopPlacemarksData=function(){return t.props.activeRoute.paths.reduce(function(e,t){return e.concat(t.segments.reduce(function(e,t){if(!t.stops)return e;var n=t.stops.reduce(function(e,t){return t.coordinateOnRoute?e.concat([t.coordinateOnRoute]):e},[]);return n.shift(),e.concat({color:t.transports?(0,eO.qZ)(ng(t.transports)):void 0,coordinates:n})},[]))},[])},t._getColorForTransport=function(e){var n=t.props,r=e.type,o=e.segmentIndex;if(["walk","transfer","undergroundWalk","binding"].includes(r))return eX.L;var i=n.activeRoute.paths.reduce(function(e,t){return e.concat(t.segments)},[]);return o&&i[o]&&i[o].transports?ng(i[o].transports):ed.Lq(r)},t._getActiveDrawingStyle=function(){var e=t.props;return{cursor:"default",zIndex:10,stroke:[{simplifyPalette:!1,width:tB(e.mapLocation.zoom).main,palette:e.activeRoute.colorizeInfo.map(function(e){return{color:(0,eO.qZ)(t._getColorForTransport(e)),count:e.count}})},{simplifyPalette:!1,width:nf.main,dash:nf.dash,opacity:.5,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:["undergroundWalk","transfer"].includes(t)?nm:eX.L,count:n}})},{simplifyPalette:!1,width:nf.main,dash:nf.dash,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:"walk"===t?nm:eX.L,count:n}})},{simplifyPalette:!1,width:nf.main,dash:nf.dash,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:"binding"===t?u.uC:eX.L,count:n}})},{width:tB(e.mapLocation.zoom).underlay,opacity:.9,color:u.Ly.underlay}]}},t._renderStopDots=function(){return t.props.mapLocation.zoom<14?null:t._getStopPlacemarksData().map(function(e,t){return e.coordinates.map(function(n,r){return i.createElement(E.Z,{key:t+"_"+r,coordinates:n,zIndex:H.I.default},i.createElement("div",{className:nv("stop-dot"),style:{borderColor:e.color}}))})})},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(i.Fragment,null,i.createElement(e3,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS,style:{opacity:1}},i.createElement(eK.Z,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS,drawingStyle:this._getActiveDrawingStyle(),geometry:eJ(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?i.createElement(e3,{dataSourceId:e2.UZ.DEFAULT_GRAPHICS,style:{opacity:.6}},t.inactiveRoutes.map(function(t){return i.createElement(eK.Z,{key:t.uuid,dataSourceId:e2.UZ.DEFAULT_GRAPHICS,drawingStyle:e._getInactiveDrawingStyle(),geometry:eJ(t),onFastClick:function(n,r){return e.props.onRouteClick(t,r.coordinates)}})})):null),this._renderStopDots())},t}(i.Component);function ng(e){var t=el(e);return ed.Sm(t)}var ny=(0,a.ZP)(nh);function n_(e,t,n){var r=Math.floor(e/86400),o=Math.floor(e/3600%24),i=Math.round(e/60%60);return 60===i&&(i=0,o++),24===o&&(o=0,r++),[r>0?Math.abs(r)+" дн.":"",o>0?Math.abs(o)+" ч":"",i>0&&(!n||0===r)?Math.abs(i)+" мин":""].filter(Boolean).join(" ")||"1 мин"}var nb=n(81194),nw=(0,p.Z)("route-warning-icon-view"),nE={barrier:"snippet-barrier-20",blocked:"snippet-closed-20",ferries:"snippet-ferry-20",ford:"snippet-ford-crossing-20",general:"snippet-all-20","rugged-road":"snippet-bad-road-20",tolls:"snippet-paid-fallback-20",frontier:"snippet-border-20","railway-crossing":"snippet-railway-crossing-20-flip"},nS=function(e){return i.createElement("div",{className:nw("wrapper",{text:!!e.text,type:e.type})},i.createElement(W.Z,{name:nE[e.type],className:nw({type:e.type}),inline:!0}),i.createElement("div",{className:nw("text")},e.text))},nC=n(37830),nk={pedestrian:"pedestrian-24-flip",bicycle:"bikes-24-flip",auto:"car-24",masstransit:"bus-24"},nR=(0,p.Z)("map-widget-routes-content-view"),nx=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n._renderContent=function(){switch(this.props.route.type){case"bicycle":case"pedestrian":case"masstransit":var e=n_(this.props.route.duration,this.props.config);return this._renderContentCommon(e,this.props.route.distance.text);case"auto":return this._renderContentAuto();default:return null}},n._renderRouteWarning=function(e){if("auto"===e.type){if(e.flags.blocked)return i.createElement(nS,{type:"blocked"});if(e.flags.hasTolls)return i.createElement(nS,{type:"tolls"})}return null},n._renderContentCommon=function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:nR("header")},i.createElement(W.Z,{name:nk[this.props.route.type],inline:!0,className:nR("icon")}),e,i.createElement("div",{className:nR("warning")},this._renderRouteWarning(this.props.route))),i.createElement("div",{className:nR("body")},t))},n._renderContentAuto=function(){let e;var t=this.props;if("auto"!==t.route.type)return null;var n=(e={duration:n_(t.route.duration,t.config),distance:t.route.distance.text}).distance+", без пробок: "+e.duration,r=n_(t.route.durationInTraffic,t.config),o=t.route.flags.blocked?"Проезд закрыт":r;return this._renderContentCommon(o,n)},n.render=function(){var e=nC.m(this.props.config);return i.createElement("div",{className:nR()},this._renderContent(),e?null:i.createElement(nb.Z,{view:"secondary-blue",size:"small",url:this.props.url,target:"_blank",isStretched:!0},"Подробнее"))},t}(i.Component),nP=(0,a.ZP)(nx),nM=n(91027),nI=n(93813),nT=n(13688),nZ=n(15462),nD=n(6241),nL=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._lastChangedPointIndex=0,t._checkAndChangeBounds=function(){if((!t.props.routerResponse||0!==t.props.routerResponse.routes.length)&&(null==(e=t.props.config.mapWidget)?void 0:e.activeMode)==="routes"){var e,n,r,o=(null==(n=t.props.routerResponse)?void 0:n.routes[t.props.activeRouteIndex])||(null==(r=t.props.routerResponse)?void 0:r.routes[0]),i=null==o?void 0:o.bounds,a=t.props.routePoints.filter(function(e){return!!e.coords});if(0!==a.length){var s=a?c.o(a.map(function(e){return e.coords})):void 0,u=i||s;u&&t.props.onBoundsChange(u)}}},t._onRoutePointsChange=function(e){var n=t.props.routePoints.findIndex(function(t){return!!t.coords&&!e.includes(t.coords)});-1===n&&(n=e[t._lastChangedPointIndex]?t._lastChangedPointIndex:e.length-1),t._lastChangedPointIndex=n,t.props.updateRoutePoint({coords:e[n],value:""},n)},t._onMapClick=function(e,n){var r={coords:n.coordinates,value:"",input:""};t.props.updateRoutePoint(r,t.props.emptyPointIndex)},t._renderContent=function(){if(!t.props.content||!t.props.routerResponse||t.props.isRoutePointDragging)return null;var e,n,o=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0];if(!o)return null;var a=t.props.content.data.coordinates||(null==(n=o.coordinates)?void 0:n[Math.floor((null==(e=o.coordinates)?void 0:e.length)/2)]);if(!a)return null;var c=s.D({routePoints:t.props.routePoints,viaIndexes:t.props.routerResponse.viaIndexes||[],travelMode:t.props.routerResponse.type,activeRouteIndex:t.props.activeRouteIndex,routerResponse:null,detailedIndex:-1,settings:(0,r._)({},u.Z,{auto:(0,r._)({},u.Z.auto,{ignoreTrafficJams:nZ.a(t.props.config)}),masstransit:(0,r._)({},u.Z.masstransit,{avoidTypes:[]})})},t.props.config),l={l:t.props.isTrafficLayerEnabled?t.props.config.query.l||"trf":void 0},d=(0,nT._)(nI.e(nD.render("",(0,r._)({},c,l,{routes:{avoidTypes:void 0}})),t.props.config));return i.createElement(nM.Z,{coordinates:a,displayType:"balloon",mapLocation:t.props.mapLocation,onClose:t.props.resetContentData,offset:{main:3,side:3},mapSize:t.props.mapSize,key:o.uuid},i.createElement(nP,{route:o,url:d}))},t._renderRouteView=function(){if(!t.props.routerResponse||0===t.props.routerResponse.routes.length)return null;var e=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0],n=t.props.routerResponse.routes.filter(function(t){return t.uuid!==e.uuid});switch(e.type){case"pedestrian":return i.createElement(e6,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick});case"bicycle":return i.createElement(tW,{activeRoute:e,inactiveRoutes:n,mapLocation:t.props.mapLocation,onRouteClick:t.props.onRouteClick});case"auto":return i.createElement(np,{activeRoute:e,inactiveRoutes:n,viaIndexes:t.props.routerResponse.viaIndexes||[],routePoints:t.props.routePoints,zoom:t.props.mapLocation.zoom,feedback:null,isDefaultColor:!!t.props.isTrafficLayerEnabled||(e.colorizeInfo||[]).every(function(e){return"UNKNOWN"===e.type}),isLoading:!1,isEditorActive:!1,setDragging:nA,onRouteClick:t.props.onRouteClick});case"masstransit":return i.createElement(ny,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick,mapLocation:t.props.mapLocation});default:return null}},t._renderRoutePinsView=function(){var e,n,r,o=(null==(e=t.props.routerResponse)?void 0:e.routes[t.props.activeRouteIndex])||(null==(n=t.props.routerResponse)?void 0:n.routes[0])||null;return i.createElement(eV,{activeRoute:o,travelMode:null==o?void 0:o.type,routePoints:t.props.routePoints,viaIndexes:(null==(r=t.props.routerResponse)?void 0:r.viaIndexes)||[],draggable:!0,isRoutePointDragging:t.props.isRoutePointDragging,draggableIndexes:t.props.draggablePointIndexes,setDragging:t.props.setDragging,onRoutePointsChange:t._onRoutePointsChange})},t._renderRouteCursor=function(){return t.props.cursor?i.createElement(tO,{cursor:t.props.cursor}):null},t._renderMapListener=function(){return -1===t.props.emptyPointIndex?null:i.createElement(l.Z,{onClick:t._onMapClick})},t}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._checkAndChangeBounds()},n.componentDidUpdate=function(e){!e.routerResponse&&this.props.routerResponse&&this._checkAndChangeBounds()},n.render=function(){return i.createElement(i.Fragment,null,this._renderRouteView(),this._renderRoutePinsView(),this._renderRouteCursor(),this._renderMapListener(),this._renderContent())},t}(i.Component);function nA(){}var nN=(0,a.ZP)(nL)},41126:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Q});var r=n(18007),o=n(87363),i=n(34788),a=n(11640),s=n(11912);function u(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function c(e,t,n){void 0===n&&(n={});for(var r=0;r<e.length;r++){var o=e[r];if(o.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw Error("First and last Position are not equivalent.")}return u({type:"Polygon",coordinates:e},t,n)}function l(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function d(e,t){var n,r,o,i,a,s,u,c,l,d,p=0,f="FeatureCollection"===e.type,m="Feature"===e.type,v=f?e.features.length:1;for(n=0;n<v;n++){for(o=0,s=f?e.features[n].geometry:m?e.geometry:e,c=f?e.features[n].properties:m?e.properties:{},l=f?e.features[n].bbox:m?e.bbox:void 0,d=f?e.features[n].id:m?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1;o<a;o++){if(null===(i=u?s.geometries[o]:s)){if(!1===t(null,p,c,l,d))return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,c,l,d))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],p,c,l,d))return!1;break;default:throw Error("Unknown Geometry Type")}}p++}}function p(e){var t,n;return t=function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return f(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=f(e.coordinates[t]);return n}return 0}(t)},n=0,d(e,function(e,r,o,i,a){n=t(n,e,r,o,i,a)}),n}function f(e){var t=0;if(e&&e.length>0){t+=Math.abs(m(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(m(e[n]))}return t}function m(e){var t,n,r,o,i,a,s=0,u=e.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,o=u-1,i=0):a===u-1?(r=u-1,o=0,i=1):(r=a,o=a+1,i=a+2),t=e[r],n=e[o],s+=(v(e[i][0])-v(t[0]))*Math.sin(v(n[1]));s=40680631590769*s/2}return s}function v(e){return e*Math.PI/180}var h=n(65510);function g(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,i=t.length-1;o<t.length;i=o++){var a=t[o][0],s=t[o][1],u=t[i][0],c=t[i][1];if(e[1]*(a-u)+s*(u-e[0])+c*(e[0]-a)==0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(c-e[1])<=0)return!n;s>e[1]!=c>e[1]&&e[0]<(u-a)*(e[1]-s)/(c-s)+a&&(r=!r)}return r}function y(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!y(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}var _=function(e,t,n,r,o){this.coord=e,this.param=t,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=o},b=function(e,t,n,r,o,i,a){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=o,this.ringAndEdge1Walkable=i,this.ringAndEdge2Walkable=a};function w(e,t){if(void 0===t&&(t=!0),3!=e.length)throw Error("This function requires an array of three points [x,y]");return(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0])>=0==t}function E(e,t){if(!e||!t||e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!E(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}var S=function(e){var t,n=[];return t=function(e){"Polygon"===e.geometry.type&&function(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}(function(e){if("Feature"!=e.type)throw Error("The input must a geojson object of type Feature");if(void 0===e.geometry||null==e.geometry)throw Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=e.geometry.type)throw Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,n=[],r=0;r<t;r++){var o=e.geometry.coordinates[r];E(o[0],o[o.length-1])||o.push(o[0]),n.push.apply(n,o.slice(0,o.length-1))}if(!function(e){for(var t={},n=1,r=0,o=e.length;r<o;++r){if(Object.prototype.hasOwnProperty.call(t,e[r])){n=0;break}t[e[r]]=1}return n}(n))throw Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var i=n.length,a=function(e,t,n){if("Polygon"!==e.geometry.type)throw Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=e.geometry.coordinates,o=[],i={};if(n){for(var a=[],s=0;s<r.length;s++)for(var u=0;u<r[s].length-1;u++)a.push(v(s,u));var c=h();c.load(a)}for(var l=0;l<r.length;l++)for(var d=0;d<r[l].length-1;d++)if(n)c.search(v(l,d)).forEach(function(e){var t=e.ring,n=e.edge;m(l,d,t,n)});else for(var p=0;p<r.length;p++)for(var f=0;f<r[p].length-1;f++)m(l,d,p,f);return t||(o={type:"Feature",geometry:{type:"MultiPoint",coordinates:o}}),o;function m(e,n,a,s){var u,c,l=r[e][n],d=r[e][n+1],p=r[a][s],f=r[a][s+1],m=function(e,t,n,r){if(y(e,n)||y(e,r)||y(t,n)||y(r,n))return null;var o=e[0],i=e[1],a=t[0],s=t[1],u=n[0],c=n[1],l=r[0],d=r[1],p=(o-a)*(c-d)-(i-s)*(u-l);return 0===p?null:[((o*s-i*a)*(u-l)-(o-a)*(u*d-c*l))/p,((o*s-i*a)*(c-d)-(i-s)*(u*d-c*l))/p]}(l,d,p,f);if(null!==m&&(u=d[0]!==l[0]?(m[0]-l[0])/(d[0]-l[0]):(m[1]-l[1])/(d[1]-l[1]),c=f[0]!==p[0]?(m[0]-p[0])/(f[0]-p[0]):(m[1]-p[1])/(f[1]-p[1]),!(u>=1)&&!(u<=0)&&!(c>=1)&&!(c<=0))){var v=!i[m];v&&(i[m]=!0),t?o.push(t(m,e,n,l,d,u,a,s,p,f,c,v)):o.push(m)}}function v(e,t){var n,o,i,a,s=r[e][t],u=r[e][t+1];return s[0]<u[0]?(n=s[0],o=u[0]):(n=u[0],o=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:o,maxY:a,ring:e,edge:t}}}(e,function(e,t,n,r,o,i,a,s,u,c,l,d){return[e,t,n,r,o,i,a,s,u,c,l,d]}),s=a.length;if(0==s){for(var u=[],r=0;r<t;r++)u.push(c([e.geometry.coordinates[r]],{parent:-1,winding:function(e){for(var t,n,r=0,o=0;o<e.length-1;o++)e[o][0]<e[r][0]&&(r=o);if(w([e[((r-1)%(t=e.length-1)+t)%t],e[r],e[((r+1)%(n=e.length-1)+n)%n]],!0))var i=1;else var i=-1;return i}(e.geometry.coordinates[r])}));var d=l(u);return X(),J(),d}for(var f=[],m=[],r=0;r<t;r++){f.push([]);for(var v,S,C,k=0;k<e.geometry.coordinates[r].length-1;k++)f[r].push([new _(e.geometry.coordinates[r][((k+1)%(v=e.geometry.coordinates[r].length-1)+v)%v],1,[r,k],[r,((k+1)%(S=e.geometry.coordinates[r].length-1)+S)%S],void 0)]),m.push(new b(e.geometry.coordinates[r][k],[r,((k-1)%(C=e.geometry.coordinates[r].length-1)+C)%C],[r,k],void 0,void 0,!1,!0))}for(var r=0;r<s;r++)f[a[r][1]][a[r][2]].push(new _(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&m.push(new b(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));for(var R=m.length,r=0;r<f.length;r++)for(var k=0;k<f[r].length;k++)f[r][k].sort(function(e,t){return e.param<t.param?-1:1});for(var x=[],r=0;r<R;r++)x.push({minX:m[r].coord[0],minY:m[r].coord[1],maxX:m[r].coord[0],maxY:m[r].coord[1],index:r});var P=h();P.load(x);for(var r=0;r<f.length;r++)for(var k=0;k<f[r].length;k++)for(var M=0;M<f[r][k].length;M++){T=M==f[r][k].length-1?f[r][((k+1)%(I=e.geometry.coordinates[r].length-1)+I)%I][0].coord:f[r][k][M+1].coord;var I,T,Z=P.search({minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]})[0];f[r][k][M].nxtIsectAlongEdgeIn=Z.index}for(var r=0;r<f.length;r++)for(var k=0;k<f[r].length;k++)for(var M=0;M<f[r][k].length;M++){var T=f[r][k][M].coord,Z=P.search({minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]})[0],D=Z.index;D<i?m[D].nxtIsectAlongRingAndEdge2=f[r][k][M].nxtIsectAlongEdgeIn:E(m[D].ringAndEdge1,f[r][k][M].ringAndEdgeIn)?m[D].nxtIsectAlongRingAndEdge1=f[r][k][M].nxtIsectAlongEdgeIn:m[D].nxtIsectAlongRingAndEdge2=f[r][k][M].nxtIsectAlongEdgeIn}for(var L=[],r=0,k=0;k<t;k++){for(var A=r,M=0;M<e.geometry.coordinates[k].length-1;M++)m[r].coord[0]<m[A].coord[0]&&(A=r),r++;for(var N=m[A].nxtIsectAlongRingAndEdge2,M=0;M<m.length;M++)if(m[M].nxtIsectAlongRingAndEdge1==A||m[M].nxtIsectAlongRingAndEdge2==A){var z=M;break}var F=w([m[z].coord,m[A].coord,m[N].coord],!0)?1:-1;L.push({isect:A,parent:-1,winding:F})}L.sort(function(e,t){return m[e.isect].coord>m[t.isect].coord?-1:1});for(var u=[];L.length>0;){var U=L.pop(),O=U.isect,q=U.parent,B=U.winding,H=u.length,j=[m[O].coord],W=O;if(m[O].ringAndEdge1Walkable)var G=m[O].ringAndEdge1,Y=m[O].nxtIsectAlongRingAndEdge1;else var G=m[O].ringAndEdge2,Y=m[O].nxtIsectAlongRingAndEdge2;for(;!E(m[O].coord,m[Y].coord);){j.push(m[Y].coord);for(var V=void 0,r=0;r<L.length;r++)if(L[r].isect==Y){V=r;break}if(void 0!=V&&L.splice(V,1),E(G,m[Y].ringAndEdge1)){if(G=m[Y].ringAndEdge2,m[Y].ringAndEdge2Walkable=!1,m[Y].ringAndEdge1Walkable){var K={isect:Y};w([m[W].coord,m[Y].coord,m[m[Y].nxtIsectAlongRingAndEdge2].coord],1==B)?(K.parent=q,K.winding=-B):(K.parent=H,K.winding=B),L.push(K)}W=Y,Y=m[Y].nxtIsectAlongRingAndEdge2}else{if(G=m[Y].ringAndEdge1,m[Y].ringAndEdge1Walkable=!1,m[Y].ringAndEdge2Walkable){var K={isect:Y};w([m[W].coord,m[Y].coord,m[m[Y].nxtIsectAlongRingAndEdge1].coord],1==B)?(K.parent=q,K.winding=-B):(K.parent=H,K.winding=B),L.push(K)}W=Y,Y=m[Y].nxtIsectAlongRingAndEdge1}}j.push(m[Y].coord),u.push(c([j],{index:H,parent:q,winding:B,netWinding:void 0}))}var d=l(u);function X(){for(var e=[],t=0;t<d.features.length;t++)-1==d.features[t].properties.parent&&e.push(t);if(e.length>1)for(var t=0;t<e.length;t++){for(var n=-1,r=1/0,o=0;o<d.features.length;o++)e[t]!=o&&function(e,t,n){if(void 0===n&&(n={}),!e)throw Error("point is required");if(!t)throw Error("polygon is required");var r=function(e){if(!e)throw Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw Error("coord must be GeoJSON Point or an Array of numbers")}(e),o="Feature"===t.type?t.geometry:t,i=o.type,a=t.bbox,s=o.coordinates;if(a&&!1==(a[0]<=r[0]&&a[1]<=r[1]&&a[2]>=r[0]&&a[3]>=r[1]))return!1;"Polygon"===i&&(s=[s]);for(var u=!1,c=0;c<s.length&&!u;c++)if(g(r,s[c][0],n.ignoreBoundary)){for(var l=!1,d=1;d<s[c].length&&!l;)g(r,s[c][d],!n.ignoreBoundary)&&(l=!0),d++;l||(u=!0)}return u}(d.features[e[t]].geometry.coordinates[0][0],d.features[o],{ignoreBoundary:!0})&&p(d.features[o])<r&&(n=o);d.features[e[t]].properties.parent=n}}function J(){for(var e=0;e<d.features.length;e++)if(-1==d.features[e].properties.parent){var t=d.features[e].properties.winding;d.features[e].properties.netWinding=t,function e(t,n){for(var r=0;r<d.features.length;r++)if(d.features[r].properties.parent==t){var o=n+d.features[r].properties.winding;d.features[r].properties.netWinding=o,e(r,o)}}(e,t)}}return X(),J(),d}(e),function(t){n.push(c(t.geometry.coordinates,e.properties))})},d(e,function(e,n,r,o,i){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(!1===t(u(e,r,{bbox:o,id:i}),n,0))return!1;return}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<e.coordinates.length;c++)if(!1===t(u({type:a,coordinates:e.coordinates[c]},r),n,c))return!1}),l(n)},C=n(31336),k=n(41886),R=n(48447),x=n(29657),P=n(41421),M=n(38067),I=n(65569),T=n(96449),Z=n(44748),D=n(97313),L=n(13340),A=n(81194),N=n(93522),z=n(44953),F=n(57636),U=(0,Z.Z)("ruler-balloon"),O={main:10,side:0},q={"delete-points":{title:"Удалить все точки?",description:"Чтобы удалить только одну точку, нажмите на неё дважды.",confirmation:"Удалить все"},close:{title:"Выключить линейку?",description:"Вы уверены, что хотите удалить все точки и выключить линейку?",confirmation:"Выключить"}},B=function(e){function t(t){var n;return(n=e.call(this,t)||this)._clearAndDisableRuler=function(){n.props.deletePoints(),n.props.isEnabled&&(null==n.props.switchRuler||n.props.switchRuler.call(n.props))},n._openPopup=function(e){n.setState({popupType:e})},n._closePopup=function(){n.setState({popupType:null})},n._clearRuler=function(){n.props.deletePoints()},n._renderPopup=function(){var e=n.state.popupType;if(!e)return null;var t=n.props;return o.createElement(L.Z,{coordinates:t.coordinates,position:["top","bottom","left","right"],offset:O,showArrow:!1,isShown:!0},o.createElement(z.ZP,{name:"popup",nodeState:{type:e}},o.createElement("div",{className:U("popup")},o.createElement("div",{className:U("title")},q[e].title),o.createElement("div",{className:U("description")},q[e].description),o.createElement("div",{className:U("buttons")},o.createElement("div",{className:U("confirm")},o.createElement(z.ZP,{name:"confirm",logClick:!0},o.createElement(A.Z,{ariaHidden:!0,view:"primary",size:"small",onClick:"delete-points"===e?n._clearRuler:n._clearAndDisableRuler},q[e].confirmation))),o.createElement("div",{className:U("cancel")},o.createElement(z.ZP,{name:"cancel",logClick:!0},o.createElement(A.Z,{ariaHidden:!0,view:"secondary-blue",size:"small",onClick:n._closePopup},"Отмена")))))))},n._renderTooltip=function(){return o.createElement("div",{className:U("tooltip-wrapper")},o.createElement("div",{className:U("tooltip")},o.createElement("div",{className:U("label")},I.jq(n.props.value,n.props.measure),"quadratic"===n.props.measure?"²":null),n._renderControls()))},n._renderControls=function(){return n.props.showControls?o.createElement(z.ZP,{name:"controls"},o.createElement("div",{className:U("controls")},o.createElement(N.Z,{text:"Удалить точки",position:"bottom",size:"s",isAir:!0},function(e){return o.createElement(z.ZP,{name:"remove_all_points",logClick:!0},o.createElement("div",{className:U("icon",{type:"trash"}),onClick:function(){return n._openPopup("delete-points")},ref:e},o.createElement(F.Z,{name:"trash-12",className:U("icon-icon"),inline:!0})))}),n.props.isEnabled?o.createElement(N.Z,{text:"Удалить точки и закрыть",position:"bottom",size:"s",isAir:!0},function(e){return o.createElement(z.ZP,{name:"turn_off_ruler",logClick:!0},o.createElement("div",{className:U("icon",{type:"close"}),onClick:function(){return n._openPopup("close")},ref:e},o.createElement(F.Z,{name:"cross-small-12",className:U("icon-inner"),inline:!0})))}):null,n.props.isEnabled?o.createElement(N.Z,{text:"Завершить редактирование",position:"bottom",size:"s",isAir:!0},function(e){return o.createElement(z.ZP,{name:"stop_editing",logClick:!0},o.createElement("div",{className:U("icon",{type:"stop-editing"}),onClick:function(){return null==n.props.switchRuler?void 0:n.props.switchRuler.call(n.props)},ref:e},o.createElement(F.Z,{name:"done-12",className:U("icon-inner"),inline:!0})))}):o.createElement(N.Z,{text:"Добавить точки",position:"bottom",size:"s",isAir:!0},function(e){return o.createElement(z.ZP,{name:"start_editing",logClick:!0},o.createElement("div",{className:U("icon",{type:"stop-editing"}),onClick:function(){return null==n.props.switchRuler?void 0:n.props.switchRuler.call(n.props)},ref:e},o.createElement(F.Z,{name:"edit-12",className:U("icon-inner"),inline:!0})))}))):null},n.state={popupType:null},n}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(T.Z,{coordinates:e.coordinates,zIndex:D.I.ruler+1,dataSourceId:e.dataSourceId,blockEvents:!0,draggable:e.draggable,cursor:e.draggable?"grab":void 0,onDragStart:e.onDragStart,onDragMove:e.onDragMove,onDragEnd:e.onDragEnd},o.createElement("div",{className:U()},this.state.popupType?this._renderPopup():this._renderTooltip()))},t}(o.Component),H=n(22712),j=n(99870),W=n(32241),G=n(91260),Y={stroke:[{color:"#666",width:3,opacity:.7},{color:"#fff",width:5,opacity:.7}],fillOpacity:0,simplificationRate:0,cursor:"pointer",zIndex:21},V={stroke:[{color:"#666",width:0,opacity:0}],fill:"#666",fillOpacity:.3,simplificationRate:0,cursor:"grab",zIndex:20},K=(0,Z.Z)("ruler-view"),X=function(e){function t(t){var n;if((n=e.call(this,t)||this)._referencePointPositions=[],n._getGeometryApproximateCenter=function(e){var t=(0,k.o)(e),n=(0,R.t)(t[0],t[1]);return(0,x.S)(t[0],n.startDirection,n.distance/2).endPoint},n._calcGeodesicLine=function(e){var t=(0,a._)(e),r=t[0],o=t.slice(1);return("area"===n.props.type&&r?(0,s._)(o).concat([r]):o).reduce(function(e,t){var n=e.pop();return n?(0,s._)(e).concat((0,s._)((0,P.b)((0,W.g)([n,t])))):e},r?[r]:[])},n._onPointAdd=function(e,t){n._updatePoints(t,e)},n._onPointUpdate=function(e,t){n._updatePoints(t,e,!0)},n._onPointRemove=function(e){n._updatePoints(e,void 0,!0)},n._calcArea=function(e){return e.length>2?function(e){var t={type:"Feature",properties:null,geometry:{type:"Polygon",coordinates:[e]}};try{var n=S(t);return p(n)}catch(r){return p(t)}}(n._calcGeodesicLine(e.map(function(e){return e.coordinates}))):0},n._updatePoints=function(e,t,r){if(n.props.onUpdate){var o=n.props.draggedPoints||n.props.points,a=o.slice(0,e);if(t&&a.push({coordinates:t,value:J(t,a[a.length-1]),showBalloon:o[e]&&o[e].showBalloon}),o.slice(e+(r?1:0)).forEach(function(e){a.push((0,i._)({},e,{value:J(e.coordinates,a[a.length-1])}))}),a.length>1){var s=n._getGeometryApproximateCenter(a.map(function(e){return e.coordinates}));s&&(n._referencePointPositions=a.map(function(e){return(0,R.t)(s,e.coordinates)}))}n.props.onUpdate(a,a)}},n._togglePointBalloon=function(e){if(n.props.onUpdate){var t=n.props.points,r=(0,i._)({},t[e],{showBalloon:!t[e].showBalloon}),o=(0,s._)(t.slice(0,e)).concat([r],(0,s._)(t.slice(e+1)));n.props.onUpdate(o)}},n._applyDragEvent=function(e){var t=n.props;if(t.onUpdate){var r=(t.draggedPoints||t.points).map(function(t,r){return(0,i._)({},t,{coordinates:(0,x.S)(e,n._referencePointPositions[r].startDirection,n._referencePointPositions[r].distance).endPoint})});t.onUpdate(t.points,r)}},n._onBalloonDrag=function(e){var t=n.props,r=t.draggedPoints||t.points,o=(0,R.t)(r[r.length-1].coordinates,e.coordinates),i=n._getGeometryApproximateCenter(r.map(function(e){return e.coordinates})),a=(0,x.S)(i,o.endDirection,o.distance).endPoint;n._applyDragEvent(a)},n._onFeatureDrag=function(e){if(n.props.onUpdate){var t=n._getGeometryApproximateCenter(e.coordinates[0]);t&&n._applyDragEvent(t)}},n._onFeatureDragStart=function(e){n.setState({isDragging:!0}),n._onFeatureDrag(e)},n._onFeatureDragEnd=function(e){n.setState({isDragging:!1}),n._onFeatureDrag(e)},n._renderBalloon=function(e,t){var r=t===n.props.points.length-1,i="area"===n.props.type;if(i&&!r||0===t||!e.showBalloon&&!r)return null;var a=i?n.state.area:e.value;return o.createElement(B,{key:t,coordinates:e.coordinates,value:a,measure:i?"quadratic":"linear",showControls:r,dataSourceId:n.props.isEnabled?j.UZ.EDITOR_MARKERS:void 0,isEnabled:n.props.isEnabled,switchRuler:n.props.switchRuler,deletePoints:n.props.deletePoints,draggable:i&&!!n.props.onUpdate,onDragStart:n._onBalloonDrag,onDragMove:n._onBalloonDrag,onDragEnd:n._onBalloonDrag})},n._renderPoint=function(){return o.createElement("div",{className:K("point")},o.createElement(F.Z,{name:"point-15"}))},n.state={geodesicLine:n._calcGeodesicLine(n.props.points.map(function(e){return e.coordinates})),area:n._calcArea(n.props.points),isDragging:!1},n.props.points.length>1){var r=n._getGeometryApproximateCenter(n.props.points.map(function(e){return e.coordinates}));r&&(n._referencePointPositions=n.props.points.map(function(e){return(0,R.t)(r,e.coordinates)}))}return n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){if(e.points!==this.props.points||e.type!==this.props.type||this.props.draggedPoints!==e.draggedPoints){var t=this.props.draggedPoints||this.props.points;this.setState({geodesicLine:this._calcGeodesicLine(t.map(function(e){return e.coordinates})),area:this._calcArea(t)})}},n.render=function(){var e=this.props.draggedPoints||this.props.points,t="area"===this.props.type;return o.createElement(o.Fragment,null,t?o.createElement(G.Z,{drawingStyle:(0,i._)({},V,{cursor:this.state.isDragging?"grabbing":"grab"}),geometry:{type:"Polygon",coordinates:[this.state.geodesicLine]},draggable:!!this.props.onUpdate,onDragStart:this._onFeatureDragStart,onDragMove:this._onFeatureDrag,onDragEnd:this._onFeatureDragEnd,dataSourceId:this.props.isEnabled?j.UZ.EDITOR_GRAPHICS:j.UZ.RASTER_GRAPHICS}):null,o.createElement(H.Z,{previewPointElement:o.createElement("div",{className:K("preview-point")}),renderPointElement:this._renderPoint,polyLineCoordinates:this.state.geodesicLine,points:e.map(function(e){return e.coordinates}),lineStyle:Y,isActive:!!this.props.onUpdate,onPointAdd:this._onPointAdd,onPointUpdate:this._onPointUpdate,onPointRemove:this._onPointRemove,onPointClick:this._togglePointBalloon,editorLayerOwner:this.props.isEnabled?"ruler":void 0}),e.map(this._renderBalloon))},t}(o.Component);function J(e,t){return t?t.value+(0,M.t)(e,t.coordinates):0}X.displayName="RulerComponent";var $=(0,C.ZP)(X),Q=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement($,{type:e.ruler.type,points:e.ruler.points,isEnabled:e.ruler.isEnabled,onUpdate:function(t){return e.updateRuler({points:t})},deletePoints:function(){return e.updateRuler({points:[]})},switchRuler:function(){return e.updateRuler({isEnabled:!e.ruler.isEnabled})}})},t}(o.Component)},96315:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,v:()=>u});var r=n(87363),o=n(44748),i=n(57636),a=n(81194),s=(0,o.Z)("map-widget-search-control-view"),u=s(),c=function(e){let t;return r.createElement("div",{className:s({checked:e.checked})},r.createElement(a.Z,{size:"small",view:"air-alt",checked:e.checked,icon:r.createElement(i.Z,{name:"search-24",inline:!0,className:s("icon")}),onClick:e.onClick},(t={count:e.resultsCount}).count+" "+(t.count%10==1&&t.count%100!=11?"найден":"найдено")))}},33369:(e,t,n)=>{"use strict";n.d(t,{x:()=>u});var r=n(34788),o=n(87363),i=n(95570),a=n(61111),s=n(22645),u={advert:void 0,brandingId:void 0};t.Z=function(e){var t,n=s.V(e.results.items),c=1===e.results.resultsCount?n[0]:void 0,l=e.results.exactResult||c;return o.createElement(o.Fragment,null,!l||(null==(t=e.hiddenResults)?void 0:t.find(function(e){return e.id===l.id}))?null:o.createElement(o.Fragment,null,o.createElement(i.Z,{key:l.id,result:(0,r._)({},l,u),coordinates:l.coordinates,mode:"subtitle",onClick:e.onPlacemarkClick}),l.uri?o.createElement(a.Z,{uri:l.uri}):null),n.filter(function(t){var n;return t.id!==(null==l?void 0:l.id)&&!(null==(n=e.hiddenResults)?void 0:n.find(function(e){return e.id===t.id}))}).map(function(t){var n=(0,r._)({},t,u);return o.createElement(i.Z,{key:t.id,result:n,coordinates:n.coordinates,mode:"base",onClick:e.onPlacemarkClick})}))}},23840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m,h:()=>f});var r=n(18188),o=n(87363),i=n(44748),a=n(11108),s=n(96315),u=n(43481),c=n(7760),l=(0,i.Z)("map-widget-search-result-list-container"),d={top:10,right:10},p={offset:{main:0,side:8},arrowOffset:110};function f(e){return e.width<=460}var m=function(e){var t=o.useRef(null),i=o.useRef(null),f=(0,r._)(o.useState(!1),2),m=f[0],v=f[1];if(o.useEffect(function(){return e.searchFormMode?n.e("map-widget-rich-client").then(n.bind(n,89948)).then(function(e){return new Promise(function(t,n){var r=0;!function o(){r>100&&n(),r++,i.current=document.querySelector("."+e.mapWidgetSearchFormClassName),i.current?t():setTimeout(o,1e3)}()})}).catch(function(){}).finally(function(){v(!0)}):(t.current=document.querySelector("."+s.v),v(!0)),function(){v(!1)}},[e.searchFormMode]),e.mapSize.width<=460)return o.createElement(o.Fragment,null,o.createElement(u.v7,null,o.createElement("div",{className:l("panel")},o.createElement(c.Z,{offset:d,onClick:e.onClose}),e.children)));var h=(0,r._)(e.searchFormMode?[i,p.offset,p.arrowOffset]:[t,void 0,void 0],3),g=h[0],y=h[1],_=h[2];return m?o.createElement(a.Z,{isShown:!0,getTarget:function(){return g.current},type:"normal",position:["bottom-left","bottom"],offset:y,arrowOffset:_,onClose:e.onClose},o.createElement("div",{className:l("popup"),style:{maxHeight:e.mapSize.height-110}},e.children)):null}},23936:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(87363),o=n(44748),i=n(39705),a=n(93813),s=n(31336),u=n(85672),c=n(57636),l=n(36887),d=n(34788),p=n(24289),f=n(5130),m=n(34989),v=(0,o.Z)("map-widget-search-result-list-item"),h=function(e){var t,n,o,i,a=(0,s.ZR)();return r.createElement("div",{className:v(),onClick:function(){e.onClick(e.item)}},"toponym"===e.item.type?(t=e.item,r.createElement(f.Z,{title:t.title,subtitle:t.description})):(n=e.item,i=p.lR(n,a),r.createElement(r.Fragment,null,r.createElement(f.Z,{title:e.item.title,subtitle:null==(o=n.categories)?void 0:o.slice(0,2).map(function(e){return e.name}).join(", ")}),r.createElement("div",{className:v("data")},r.createElement(m.Z,{result:n,disableLink:!0}),r.createElement("div",{className:v("time-label",(0,d._)({},i.state))},i.text)))))},g=n(22645),y=n(18188);function _(e,t){var n=(0,y._)(t,2),r=n[0],o=n[1];return e.reduce(function(e,t){return"string"!=typeof t?e.push(t):t.split(r).forEach(function(t,n){n>0&&e.push(o),e.push(t)}),e},[])}var b=(0,o.Z)("map-widget-search-result-list-view"),w=function(e){let t,n;var o,d,p,f,m,v=(0,s.ZR)(),y=(null!=(f=null==(d=e.searchResults)?void 0:d.totalResultCount)?f:0)-(null!=(m=null==(p=e.searchResults)?void 0:p.pageCount)?m:0);return r.createElement("div",{className:b()},e.searchDisplayText?r.createElement("div",{className:b("header")},(t={query:e.searchDisplayText,resultsCount:e.searchResultsCount}).resultsCount?t.resultsCount+" "+(t.resultsCount%10==1&&t.resultsCount%100!=11?"найден":"найдено")+" по запросу «"+t.query+"»":"Результаты поиска «"+t.query+"»"):null,r.createElement(u.Z,{width:"dynamic"},e.searchResults?r.createElement("div",null,g.V(e.searchResults.items).map(function(t){return r.createElement(h,{item:t,key:t.id,onClick:e.onListItemClick})})):null,e.isLoading?r.createElement("div",{className:b("spinner-container")},r.createElement(l.Z,{view:"small"})):e.searchResults&&y>0?r.createElement("div",{className:b("more"),onClick:e.onLoadMoreClick},"Показать ещё "+(n={count:Math.min(e.searchResults.requestResults,y)}).count+" "+(n.count%10==1&&n.count%100!=11?"результат":n.count%10>1&&n.count%10<5&&(n.count%100<10||n.count%100>20)?"результата":"результатов")):null,r.createElement("div",{className:b("footer")},r.createElement("div",{className:b("icon")},r.createElement(c.Z,{name:"super-search-24-flip",inline:!0})),r.createElement("span",{className:b("caption")},(o="Не нашли, что искали, — измените масштаб или __refineSearch",Object.entries({__refineSearch:function(){if(!e.searchRequest)return null;var t,n,o,s,u,c,l,d=(t=e.searchRequest.mapLocation,n=e.searchRequest.text,o=null==(l=e.searchRequest.chain)?void 0:l.id,s=e.searchDisplayText,u=e.searchRequest.filters,c=o?"text=chain_id:("+o+")":n?"text="+n:"",s&&c&&(c+="&display-text="+s),u&&(c+="&filter="+encodeURIComponent(u.join(";"))),"ll="+(0,i.s)(t.center)+"&spn="+(0,i.s)(t.span)+"&from=mapframe&"+c),p=a.e("/?"+d,v);return r.createElement("a",{className:b("link"),href:p,target:"_blank"},"уточните запрос")}()}).reduce(_,[o]).filter(function(e){return e}).map(function(e,t){return r.createElement("span",{key:t},e)}))))))}},93798:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(18007),o=n(87363),i=n(80129),a=n(39705),s=n(44748),u=n(31336),c=n(6241),l=n(96976),d=n(93813),p=n(13688),f=n(81194),m=n(59093),v=n(5130),h=(0,s.Z)("map-widget-toponym-content-view"),g=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getUrl=function(){var e,n=l.h(t.props.result,t.props.result.region,{skipPointCheck:!0});n||(n="?"+i.stringify({poi:{uri:null==(e=t.props.result)?void 0:e.uri,point:(0,a.s)(t.props.result.coordinates)}}));var r=(0,p._)(d.e("/"+n,t.props.config));return t.props.isTrafficLayerEnabled&&(r+="&l="+(t.props.config.query.l||"trf")),r},t._getInsideUrl=function(){var e=t.props.result.businesses&&t.props.result.businesses.totalResultCount>0,n=l.h(t.props.result,t.props.result.region,{skipPointCheck:!0},e?{sublanding:"inside"}:{});return(0,p._)(d.e("/"+n,t.props.config))},t._renderContent=function(){return"house"===t.props.result.kind?o.createElement(o.Fragment,null,o.createElement("div",{className:h("nearest-stops")},o.createElement(m.Z,{result:t.props.result})),o.createElement("div",{className:h("button-wrapper")},o.createElement(f.Z,{view:"primary",size:"small",isStretched:!0,url:t._getInsideUrl(),target:"_blank"},"Организации в доме"))):o.createElement("div",{className:h("button-wrapper")},o.createElement(f.Z,{view:"primary",size:"small",isStretched:!0,url:t._getUrl(),target:"_blank"},"Открыть в Картах"))},t._renderFeedbackUrl=function(){if(!t.props.result.uri)return null;var e,n=(e=t.props.result.uri,c.render("/",{feedback:"object/edit",ol:"geo",ouri:e})),r=d.e(n,t.props.config);return o.createElement("div",{className:h("button-wrapper")},o.createElement(f.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:r,target:"_blank"},"Сообщить об ошибке"))},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement("div",{className:h()},o.createElement("div",{className:h("title-wrapper")},o.createElement(v.Z,{title:e.result.title,titleUrl:this._getUrl(),subtitle:this.props.result.description})),this._renderContent(),this._renderFeedbackUrl())},t}(o.Component),y=(0,u.ZP)(g)},4307:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var r=n(18007),o=n(87363),i=n(31336),a=n(91027),s=n(44748),u=n(99802),c=n(59270),l=n(22370),d=(0,s.Z)("traffic-road-event-content-view"),p=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.event;if(!t.position)return null;var n=t.time_start_value||t.time_end_value,r=t.time_start_value&&t.tzOffset&&(0,l.wQ)(new Date(1e3*Number(t.time_start_value)),t.tzOffset)||void 0,i=t.time_end_value&&t.tzOffset&&(0,l.wQ)(new Date(1e3*Number(t.time_end_value)),t.tzOffset)||void 0;return o.createElement("div",{className:d()},o.createElement("div",{className:d("title")},(0,c.t0)(this.props.event)),t.description?o.createElement("div",{className:d("description"),dangerouslySetInnerHTML:{__html:t.description}}):null,n?o.createElement("div",{className:d("time"),dangerouslySetInnerHTML:{__html:r&&i?(0,u.o0)(r,e.config)+" &mdash; "+(0,u.o0)(i,e.config):r?(0,u.o0)(r,e.config):""}}):null,t.author&&t.link?o.createElement("div",{className:d("source")},o.createElement("span",{className:d("source-label")},"Источник"),o.createElement("a",{className:d("source-link"),href:t.link.href,target:"_blank"},t.author.name)):null)},t}(o.Component),f=(0,i.ZP)(p),m=n(52869),v=n(24063),h=n(92830),g=n(22678),y=function(e){function t(t){var n,r,o;return(n=e.call(this,t)||this)._updateVersionFromStaticLayers=function(e){e.trf&&e.trfe&&n.setState({actualVersion:e.trf.version,roadEventsVersion:e.trfe.version})},n.state={actualVersion:null==(r=t.config.layers.trf)?void 0:r.version,roadEventsVersion:null==(o=t.config.layers.trfe)?void 0:o.version},n}(0,r._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),m.Z.cancel(this._loadStaticLayerAction)},n._shouldUpdateLayer=function(e){return e.mapLocation!==this.props.mapLocation},n._updateLayer=function(){e.prototype._updateLayer.call(this),this._updateStaticLayer()},n._onLayerLoad=function(e){var t=h.Z.actual.getLevel(e.timezone.ids,this.props.config);null==this.props.onLayerLoaded||this.props.onLayerLoaded.call(this.props,e),this._loadLevel(t)},n._updateStaticLayer=function(){m.Z.cancel(this._loadStaticLayerAction),this._loadStaticLayerAction=m.Z.create(v.Z.getLayers({layers:["trf","trfe"]},this.props.config),{success:this._updateVersionFromStaticLayers})},n.render=function(){var e=this.state;return this.props.children({actualVersion:e.actualVersion,roadEventsVersion:e.roadEventsVersion})},t}(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._updateTimer=-1,t._onLayerDataLoad=function(e){var n=t.props;if(!e||!e.timezone){n.onTrafficLevelChange(null);return}null==t._onLayerLoad||t._onLayerLoad.call((0,g._)(t),e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._updateLayer(),this._updateTimer=window.setInterval(function(){return e._updateLayer()},12e4)},n.componentDidUpdate=function(e){this._shouldUpdateLayer(e)&&this._updateLayer()},n.componentWillUnmount=function(){window.clearInterval(this._updateTimer),m.Z.cancel(this._loadLayerAction),m.Z.cancel(this._loadLevelAction)},n._loadLevel=function(e){m.Z.cancel(this._loadLevelAction);var t=this.props;this._loadLevelAction=m.Z.create(e,{success:function(e){return t.onTrafficLevelChange(e.level)},fail:function(){return t.onTrafficLevelChange(null)}})},n._updateLayer=function(){m.Z.cancel(this._loadLayerAction),this._loadLayerAction=m.Z.create(v.Z.getLayer({layer:"trf",center:this.props.mapLocation.center,zoom:this.props.mapLocation.zoom},this.props.config),{success:this._onLayerDataLoad})},t}(o.Component)),_=(0,i.ZP)(y),b=n(37048),w=n(90585),E=n(51457),S=n(73911),C=n(76475),k=n(99870),R=n(80129),x=n(4670),P=n(16911),M={getTimings:function(e,t){var n=RegExp("/tiles\\?.*l=("+e.join("|")+")"),r=P.Z.getResourcesTimings(function(e){return n.test(e)}).filter(function(e){var n=R.parse(e.name),r=[[256*Number(n.x),256*Number(n.y)],[(Number(n.x)+1)*256,(Number(n.y)+1)*256]];return(0,x.Y)(t,r)&&e.responseEnd<6e5&&e.responseEnd>0&&e.duration<6e5&&e.duration>=0});if(0!==(r=r.filter(function(e,t){var n=e.name;return r.findIndex(function(e){return e.name===n})===t})).length)return r.sort(function(e,t){return t.responseEnd-e.responseEnd}),{averageDuration:Math.round(r.reduce(function(e,t){return e+t.duration},0)/r.length),minLoadEnd:Math.round(r[r.length-1].responseEnd),medianaLoadEnd:Math.round(r[Math.floor(r.length/2)].responseEnd),maxLoadEnd:Math.round(r[0].responseEnd)}}},I=n(12574),T=n(28216),Z=n(34788),D=n(44953),L=n(42850),A=function(e){return e.ready?o.createElement(L.Z,{type:"timingNode"},o.createElement(D.ZP,{name:e.type,nodeState:(0,Z._)({ready:e.ready},e.extraState)},e.children)):null},N=n(98109),z=T.$j(function(e){return{config:e.config,isSidebarCollapsed:N.X(e)}}),F=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){if("distribution_fullscreen"===this.props.type){this.setState({ready:P.Z.getTimeToNow()});return}if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;("search-result"===e.config.pageMode||e.config.uatraits.isMobile&&"orgpage"===e.config.pageMode)&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":case"distribution_fullscreen":return"home";case"panorama_page":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,e.isSidebarCollapsed||this.setState({ready:P.Z.getTimeToNow()}))}},n.render=function(){var e=this.props.type;if("undefined"==typeof window)return null;var t=window._maps_internal_timingsMarks;return o.createElement(A,{type:e,ready:this.state.ready,extraState:{show:t&&e in t?t[e]:this.state.ready}})},t}(o.PureComponent);F.isTimingLogged=!1;var U=z(F),O=n(42454),q=n(69113),B=n(85172),H=(0,w.Z)(i.ZP,B.ZP)(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._memoizedCreateHotspotFetchFunction=(0,O.Z)(q.R),t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.config,n=t.hosts.roadEventsRenderer,r=n+"1.1/tiles?trf&%n&%l&%c&v=%v";return o.createElement(C.ZP,{layer:"trfe",dataSource:{type:"tile",vector:(0,k.x8)({priority:"medium",tileUrl:(0,k.pr)((n+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&v=%v&format=protobuf").replace("%n","l=trfe"),t.lang,e.roadEventsVersion),imageUrl:n+"icons?id={{id}}&scale={{scale}}",glyphRangeUrl:t.hosts.vectorGlyphs.replace("{{lang}}",t.lang),theme:(0,k.gh)(e.theme)},t),raster:{type:"ground",fetchTile:(0,k.pp)((0,k.pr)(r.replace("%n","l=trfe"),t.lang,e.roadEventsVersion),t),fetchHotspots:this._memoizedCreateHotspotFetchFunction((0,k.pp)((0,k.c1)((0,k.pr)(r.replace("%n","l=trje")+"&format=json",t.lang,e.roadEventsVersion),t),t)),transparent:!0},zoomRange:e.zoomRange},onClick:e.onClick})},t}(o.Component)),j=(0,w.Z)(i.ZP,B.ZP),W=!0,G=j(function(e){function t(t){(n=e.call(this,t)||this)._onTilesReady=function(){if(!n.state.tilesReady){var e=n.props,t=(0,b.n)(e.mapLocation.bounds,e.mapLocation.zoom);if(n.setState({tilesReady:!0}),W){var r=M.getTimings(["trf"],t);r&&n.setState({tilesTimings:r}),W=!1}}},n._countTrafficModeChange=function(){E.ZP.reachGoal({goal:"traffic"})},n._renderLayer=function(){var e=n.props,t=e.config;if(!t.layers.trf)return null;var r=t.layers.trf.zoomRange?{min:t.layers.trf.zoomRange[0],max:t.layers.trf.zoomRange[1]}:void 0;if("traffic#actual"===e.providerKey){var i=t.hosts.traffic+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",a=t.hosts.traffic+"1.1/tiles?trf&%n&%l&%c&tm=%v";return o.createElement(o.Fragment,null,o.createElement(C.ZP,{layer:"trf",dataSource:{type:"tile",vector:(0,k.x8)({priority:"medium",tileUrl:(0,k.pr)(i.replace("%n","l=trf"),t.lang,e.actualVersion),imageUrl:t.hosts.traffic+"icons/{{id}}?scale={{scale}}&id={{id}}",theme:(0,k.gh)(e.theme)},t),raster:{type:"ground",fetchTile:(0,k.pp)((0,k.pr)(a.replace("%n","l=trf"),t.lang,e.actualVersion),t),transparent:!0},zoomRange:r}}),e.showRoadEvents?o.createElement(H,{onClick:e.onClick,zoomRange:r,roadEventsVersion:e.roadEventsVersion}):null)}return"traffic#archive"===e.providerKey?o.createElement(C.ZP,{layer:"trfa",dataSource:{type:"tile",raster:{type:"ground",fetchTile:(0,k.pp)((0,k.pr)(t.hosts.trafficArchive+"tiles?trj&l=trf&%l&%c&tm=%v",t.lang,e.archiveVersion),t),transparent:!0},vector:(0,k.x8)({priority:"medium",tileUrl:(0,k.pr)(t.hosts.trafficArchive+"2.x/tiles?trf&l=trf&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",t.lang,e.archiveVersion),imageUrl:t.hosts.trafficArchive+"icons?id={{id}}&scale={{scale}}",theme:(0,k.gh)(e.theme)},t),zoomRange:r}}):null};var n,r=t.config.query;return W=W&&r.l&&r.l.split(",").includes("trf"),n.state={tilesReady:!1},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._countTrafficModeChange()},n.componentDidUpdate=function(e){var t=this.props;e.providerKey!==t.providerKey&&this._countTrafficModeChange()},n.componentWillUnmount=function(){W=!1},n.render=function(){var e=this.props,t=this.state;return o.createElement(o.Fragment,null,o.createElement(I.Z,{onReady:this._onTilesReady}),this._renderLayer(),o.createElement(S.Z,{name:"traffic_layer",nodeState:{providerKey:e.providerKey}}),o.createElement(A,{type:"traffic_tiles",ready:t.tilesTimings?t.tilesTimings.averageDuration:void 0,extraState:t.tilesTimings}),this.state.tilesReady&&this.props.logTilesReady?o.createElement(U,{type:"traffic_page"}):null)},t}(o.Component)),Y={main:16,side:0},V=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content?o.createElement(a.Z,{displayType:t._getDisplayType(),mapLocation:t.props.mapLocation,coordinates:t.props.content.data.coordinates,onClose:t.props.resetContentData,updateLocationRequest:t.props.updateLocationRequest,offset:Y,mapSize:t.props.mapSize},o.createElement(f,{event:t.props.content.data.event})):null},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(o.Fragment,null,o.createElement(_,{mapLocation:e.mapLocation,onTrafficLevelChange:e.onTrafficLevelChange},function(t){return o.createElement(G,{providerKey:"traffic#actual",mapLocation:e.mapLocation,actualVersion:t.actualVersion,onClick:e.onClick,showRoadEvents:e.showRoadEvents,roadEventsVersion:t.roadEventsVersion})}),this._renderContent())},t}(o.Component),K=(0,i.ZP)(V)},24135:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var r=n(18007),o=n(87363),i=n(44748),a=n(31336),s=n(89318),u=n(33228),c=n(18692),l=n(91260),d=n(80937),p=n(57636),f=(0,i.Z)("user-maps-map-view"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._renderFeature=function(e,t,r){var i=n.props.config,a=(e.zIndex||r.length-t)+(t===n.state.hoveredIndex?r.length:0),d=!1;if("placemark"===e.type){if(e.content){if("text"===e.content.type)m=o.createElement("div",{className:f("text")},e.content.text);else if(null==(v=i.query.cnstr)?void 0:v[e.content.name]){var m,v,h=i.query.cnstr[e.content.name];m=o.createElement(p.Z,{name:h,className:f("icon")})}else{var g=s.y7(e.content.name),y="fallback"===e.content.name;g&&(d=!y,m=o.createElement(u.Z,{className:f("icon",{fallback:y}),url:g}))}}return o.createElement(c.Z,{key:t,coordinates:e.coordinates,zIndex:a,color:e.stroke&&e.stroke.color,onClick:function(){return n.props.onFeatureClick(t,e.coordinates)},onMouseEnter:function(){return n.setState({hoveredIndex:t})},onMouseLeave:function(){return n.setState({hoveredIndex:-1})},comma:e.isComma,caption:e.caption,size:d?"large":"medium",outline:!0},m)}return o.createElement(l.Z,{key:t,geometry:n._moveGeometryToZeroWorld(e.geometry),drawingStyle:{zIndex:a,cursor:n.props.cursor||"pointer",stroke:e.stroke?[e.stroke]:void 0,fill:"polygon"===e.type&&e.fill?e.fill.color:void 0,fillOpacity:"polygon"===e.type&&e.fill?e.fill.opacity:void 0,interactive:!!e.balloonCoordinates},onClick:function(e,r){return n.props.onFeatureClick(t,r.coordinates)}})},n.state={hoveredIndex:-1},n}(0,r._)(t,e);var n=t.prototype;return n._moveGeometryToZeroWorld=function(e){var t=1/0,n=-1/0;(0,d.ZE)(e,function(e){t=e[0]<t?e[0]:t,n=e[0]>n?e[0]:n});var r=-(360*Math.trunc((n+t)/360));return r?(0,d.ZE)(e,function(e){return[e[0]+r,e[1]]}):e},n.render=function(){return this.props.features.map(this._renderFeature)},t}(o.PureComponent),v=(0,a.ZP)(m),h=n(91027),g=(0,i.Z)("user-maps-balloon-content"),y=function(e){return o.createElement(o.Fragment,null,"placemark"===e.feature.type&&e.feature.caption&&e.showTitle?o.createElement("div",{className:g("title"),dangerouslySetInnerHTML:{__html:e.feature.caption}}):null,o.createElement("span",{dangerouslySetInnerHTML:{__html:e.feature.isTextInTitle?e.feature.title:e.feature.subtitle}}))},_=(0,i.Z)("map-widget-user-maps-content-view"),b=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){return this.props.feature.balloonCoordinates?o.createElement("div",{className:_()},o.createElement(y,{showTitle:!1,feature:this.props.feature})):null},t}(o.Component),w=(0,a.ZP)(b),E=n(52869),S=n(53770),C={getMap:function(e,t){return(0,S.Z)("slow/userMaps/getMap",{query:{um:e}},t).catch(function(){})}},k=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._loadUserMap=function(){t.props.userMaps.response||(E.Z.cancel(t._loadUserMapAction),t._loadUserMapAction=E.Z.create(C.getMap(t.props.userMaps.request.um,t.props.config),{success:function(e){e&&t.props.onLoad(e)}}))},t._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content&&(t.props.content.data.feature.isTextInTitle?t.props.content.data.feature.title:t.props.content.data.feature.subtitle)?o.createElement(h.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,displayType:t._getDisplayType(),onClose:t.props.resetContentData,mapSize:t.props.mapSize},o.createElement(w,{feature:t.props.content.data.feature})):null},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadUserMap()},n.componentWillUnmount=function(){E.Z.cancel(this._loadUserMapAction)},n.render=function(){return this.props.userMaps.response?o.createElement(o.Fragment,null,o.createElement(v,{features:this.props.userMaps.response.features,cursor:this.props.cursor,onFeatureClick:this.props.onFeatureClick}),this._renderContent()):null},t}(o.Component),R=(0,a.ZP)(k)},24063:(e,t,n)=>{"use strict";var r,o=n(34788),i=n(20224),a=n(77473),s=n.n(a),u=n(53770),c=n(39705),l={getLayers:function(e,t){var n=(r=r||{}).requests||[],o=n.push({layerIds:e.layers,center:e.center?(0,c.s)(e.center,{fractionDigits:8}):void 0,zoom:e.zoom&&Math.round(e.zoom),span:e.span?(0,c.s)(e.span,{fractionDigits:8}):void 0,locale:t.locale,lang:t.lang})-1,i=r.promise||new Promise(function(e,n){s()(function(){var o=r.requests;r=void 0,(0,u.Z)("layers/info",{query:{requests:o}},t).then(e).catch(n)})});return r={promise:i,requests:n},i.then(function(e){return e[o]})},getLayer:function(e,t){var n=e.layer,r=(0,i._)(e,["layer"]);return r.zoom&&!d(n,r.zoom,t)?Promise.resolve(void 0):l.getLayers((0,o._)({layers:[n]},r),t).then(function(e){return e[n]})},checkStaticZoomRange:d};function d(e,t,n){var r=n.layers[e];if(!r)return!0;var o="zoomRange"in r&&r.zoomRange;return!o||t>=o[0]&&t<=o[1]}t.Z=l},99870:(e,t,n)=>{"use strict";n.d(t,{mt:()=>E,pr:()=>S,c8:()=>x,Hi:()=>f,UZ:()=>d,Il:()=>p,se:()=>T,_I:()=>A,Iw:()=>w,pp:()=>L,x8:()=>D,gh:()=>U,c1:()=>C});var r=n(34788),o=n(18188),i=n(80129),a=n.n(i),s=n(19084),u=n(69113),c=n(72017),l=n(72133),d={DEFAULT_MARKERS:"defaultMarkers",DEFAULT_GRAPHICS:"defaultGraphics",DEFAULT_GRAPHICS_UNDER_BUILDINGS:"defaultGraphicsUnderBuildings",NIGHT_CIVIL_GRAPHICS:"nightCivilGraphics",NIGHT_NAVI_GRAPHICS:"nightNaviGraphics",NIGHT_ASTRO_GRAPHICS:"nightAstroGraphics",NIGHT_GRAPHICS:"nightGraphics",RASTER_GRAPHICS:"rasterGraphics",EDITOR_MARKERS:"editorMarkers",EDITOR_GRAPHICS:"editorGraphics"},p=":__customEventBlockerLayer",f=["map","sat","skl"],m=["map","sat"],v=["map","trf","trfe","trfa","stv","pht","indoor","carparks","mrc","mrcpe","realTimePoi","tile3d"],h=[d.DEFAULT_GRAPHICS,d.DEFAULT_GRAPHICS_UNDER_BUILDINGS],g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",y={map:function(e){var t=e.mapTiles,n=e.mapjTiles;return{url:R(t),hotspotsUrl:R(n)}},sat:function(e){return{url:R(e.satTiles)}},skl:function(e){var t=e.sklTiles,n=e.skljTiles;return{url:R(t),hotspotsUrl:R(n)}},stv:function(e){return{url:e.stvTiles.replace("l=stv","l=stv,sta")}},sta:function(e){return{hotspotsUrl:e.staHotspotTiles}},pht:function(e){var t=e.phtRenderer;return{url:t+"tiles?l=pht&%c&v=%v&%l&format=png",hotspotsUrl:t+"tiles?l=phj&%c&v=%v&%l&format=json"}},mrc:function(e){return{url:e.mrcTiles+"&camera-direction=front",hotspotsUrl:e.mrcHotspotTiles+"&camera-direction=front"}},mrcpe:function(e){return{url:e.mrcpeTiles+"&camera-direction=front",hotspotsUrl:e.mrcpeHotspotTiles+"&camera-direction=front"}},carparks:function(e){return{url:e.carparksTiles}},realTimePoi:function(){return{}}},_=["map:ground","sat:ground","skl:ground","realTimePoi:ground","trf:ground","trfe:ground","trfa:ground","carparks:ground","mrc:ground","mrcpe:ground","stv:ground","indoor:ground",d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,"map:buildings","tile3d:buildings",d.DEFAULT_GRAPHICS,"map:icons","map:labels","realTimePoi:icons","realTimePoi:labels","trfe:icons","trfe:labels","carparks:icons","carparks:labels","indoor:icons","indoor:labels","stv:icons","pht:icons","sta:ground","pht:ground","debugTiles:ground",d.NIGHT_CIVIL_GRAPHICS,d.NIGHT_NAVI_GRAPHICS,d.NIGHT_ASTRO_GRAPHICS,d.NIGHT_GRAPHICS,d.RASTER_GRAPHICS,d.DEFAULT_MARKERS,p,d.EDITOR_GRAPHICS,d.EDITOR_MARKERS],b=["map","realTimePoi","indoor"],w=["map","sat"];function E(e){var t,o,i,a,s,c,l=e.config,p=e.theme,v=e.modeFutureSelected,_=e.discoveryHomeIntentSlug,b=Object.keys(y).reduce(function(e,t){var o=l.layers["sta"===t?"stv":t],i=o&&o.zoomRange;return e[t]={type:"tile",raster:M(function(e,t,n,r,o){var i=y[e];if(!t||!i)return{type:"ground",fetchTile:g};var a=i(n.hosts),s=function(e){return z(F(S(e,n.locale,t.version),o.discoveryHomeIntentSlug?"&discovery_mode_intent="+o.discoveryHomeIntentSlug:""),n)},c=["map","skl","carparks","stv","sta","mrc","mrcpe"].includes(e)?"&"+Z(n):"",l=["map","stv","sta","pht","mrc","mrcpe","carparks"].includes(e)&&"dark"===r?"&theme=dark":"",d=a.url?F(s(a.url),c+l):g;return{type:"ground",fetchTile:"map"===e?N(d,n):d,fetchHotspots:a.hotspotsUrl?(0,u.R)(s(a.hotspotsUrl)+c):void 0,transparent:!m.includes(e),hotspotPadding:n.uatraits.isMobile?12:0}}(t,o,l,p,{discoveryHomeIntentSlug:_}),{alias:t,config:l,modeFutureSelected:v}),vector:M(function(e,t,o,i,a){if(t){var s=o.locale,c=o.hosts,l=o.experiments,d=o.uatraits,p=o.experiments.ui,f=p.vectorVmap3,m=p.vectorNoRichModels,v=p.vectorHdModeEnabled,h=p.vectorMapType,g=p.vectorTileCacheSize,y=d.isMobile;if("realTimePoi"===e){var _=a.discoveryHomeIntentSlug?"&discovery_mode_intent="+a.discoveryHomeIntentSlug:"",b=c.realTimePoi+"tiles?l=personalized_poi_ads&%l&v=%v&x={{x}}&y={{y}}&z={{z}}&zmin={{zmin}}&zmax={{zmax}}&service="+(y?"touch-maps":"desktop-maps")+_,w=""+c.realTimePoi+"icons?id={{id}}&scale={{scale}}",E=f?{mapType:h,tileFormat:"vmap3",tileUrl:C(""+b+"&pbversion=3&experimental_pp_over_dj=prod",o),imageUrl:C(w,o),glyphRangeUrl:c.vectorVmap3Glyphs.replace("{{lang}}",s),fontObjectUrl:c.vectorFontObjects,fontListUrl:c.vectorFontList,styleUrl:c.vectorVmap3Styles}:{tileFormat:"vmap2",tileUrl:b,imageUrl:C(w,o),glyphRangeUrl:C(c.realTimePoi+"glyphs?lang="+s+"&font_id={{fontId}}&range={{range}}",o)};return D((0,r._)({priority:"high",collisionPriority:"low",requestTileSize:"X4",tileBeltSize:0,lowPrecisionBeltTiles:!1,cameraIdleThrottling:void 0!==l.ui.directPoiThrottling?Number(l.ui.directPoiThrottling):void 0,theme:U(i),tileRequestWithCredentials:!0},E,{tileUrl:O(S(E.tileUrl,s,t.version),o,N,C,z)}),o)}if("carparks"===e){var R,x=(null==(R=o.mocks)?void 0:R.version)?"":"&v=%v",P=O(S(c.carparksTileRenderer+"tiles?version="+(f?"3":"2")+"&l=carparks&%l"+x+"&x={{x}}&y={{y}}&z={{z}}",s,t.version),o,C,z),M=""+c.carparksTileRenderer+"icons?id={{id}}&scale={{scale}}",T=f?{mapType:h,tileFormat:"vmap3",tileUrl:P,imageUrl:M,glyphRangeUrl:c.vectorVmap3Glyphs.replace("{{lang}}",s),fontObjectUrl:c.vectorFontObjects,fontListUrl:c.vectorFontList,styleUrl:c.vectorVmap3Styles}:{tileFormat:"vmap2",tileUrl:P,imageUrl:M,glyphRangeUrl:""+c.carparksTileRenderer+"glyphs?font_id={{fontId}}&range={{range}}"};return D((0,r._)({priority:"medium",theme:U(i)},T),o)}if("stv"===e)return D({priority:"medium",tileUrl:z(S(""+c.stvTileRenderer+"tiles?l=sta,stv&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",s,t.version),o),imageUrl:""+c.stvTileRenderer+"icons?id={{id}}&scale={{scale}}",theme:U(i)},o);if("pht"===e)return D({priority:"medium",tileUrl:z(S(""+c.phtRenderer+"tiles?l=pht&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",s,t.version),o),imageUrl:""+c.phtRenderer+"icons?id={{id}}&scale={{scale}}",theme:U(i),iconsOnlyTiles:!0,lowPrecisionBeltTiles:!1,tileBeltSize:0,tileCacheSize:100},o);if("mrc"===e||"mrcpe"===e){var Z="mrc"===e?c.mrcTiles:c.mrcpeTiles,L="mrc"===e?c.mrcHotspotTiles:c.mrcpeHotspotTiles;return D({priority:"medium",tileUrl:z(Z.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front&format=protobuf",o),hotspots:{ground:(0,u.R)(L.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front")},theme:U(i)},o)}if("map"===e){var A=f?{tileFormat:"vmap3",tileUrl:c.vectorVmap3Tiles,imageUrl:c.vectorVmap3Images,meshUrl:c.vectorVmap3Meshes,glyphRangeUrl:c.vectorVmap3Glyphs,richModelUrl:c.vectorVmap3RichModels,fontObjectUrl:c.vectorFontObjects,fontListUrl:c.vectorFontList,styleUrl:c.vectorVmap3Styles,indoorPlanUrl:c.vectorVmap3IndoorPlans,hdModeEnabled:!!v,mapType:h}:{tileFormat:"vmap2",tileUrl:c.vectorTiles,imageUrl:C(c.vectorImages,o),meshUrl:c.vectorMeshes,glyphRangeUrl:c.vectorGlyphs,richModelUrl:c.vectorRichModels},F=A.tileUrl.replace("{{lang}}",s).replace("v={{version}}",t.version?"v="+t.version:""),q=A.glyphRangeUrl.replace("{{lang}}",s),B=I(o);return D((0,r._)({collisionPriority:"low",priority:"high",tileBeltSize:1,tileCacheSize:void 0!==g?Number(g):void 0,requestTileSize:y?"X1":"X4",richModelEnabled:!function(e){if(void 0===e)return!1;if("string"==typeof e){var t=e.toLowerCase();return t.length>0&&"false"!==t&&"no"!==t&&"0"!==t}return e}(m),richPointEnabled:!y,richModelDecoderWorkerUrl:"undefined"!=typeof window?o.baseUrl+new URL(n(1367),n.b).pathname:void 0,hotspots:{buildings:{minZoom:16.5}},theme:U(i)},A,B,{tileUrl:O(F,o,N,C,k,z),glyphRangeUrl:q}),o)}}}(t,o,l,p,{discoveryHomeIntentSlug:_}),{alias:t,config:l,modeFutureSelected:v}),clampMapZoom:f.includes(t),zoomRange:i?{min:i[0],max:i[1]}:void 0},e},{});return b.indoor=(i=(o=(t={config:l,theme:p,modeFutureSelected:v}).config).hosts,a=o.locale,s=o.uatraits.isMobile,c=I(o),{type:"tile",vector:M(D((0,r._)({collisionPriority:"low",priority:"low",requestTileSize:s?"X1":"X4",glyphRangeUrl:i.vectorIndoorGlyphs.replace("{{lang}}",a),imageUrl:C(i.vectorIndoorImages,o),meshUrl:i.vectorIndoorMeshes,tileUrl:O(i.vectorIndoorTiles.replace("{{lang}}",a),o,N,C),indoorPlanUrl:i.vectorIndoorPlans},c,{theme:U(t.theme)}),o),{alias:"indoor",config:o,modeFutureSelected:t.modeFutureSelected}),zoomRange:{min:16.5,max:21}}),Object.keys(d).forEach(function(e){b[d[e]]={type:"geojson",dynamic:!h.includes(d[e])}}),b}function S(e,t,n){return e.replace("%l","lang="+t).replace(/(v|tm)=%v/,n?"$1="+n:"").replace(/%d\|\d+/,function(e){return"{{"+e+"}}"}).replace(/%d/,"{{d|4}}").replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}")}function C(e,t){var n;return e+((null==(n=t.mocks)?void 0:n.version)?"&mocks%5Bversion%5D="+t.mocks.version:"")}function k(e,t){return t.experiments.ui.poiVectorAuthExperimentalData?e+"&experimental_data_poi="+t.experiments.ui.poiVectorAuthExperimentalData:e}function R(e){return e.replace("%c","v=%v&%c")}function x(e,t,n,r){for(var i=e.filter(function(e,t,n){return n.indexOf(e)===t}).sort(function(t,n){var r=_.indexOf(t)-_.indexOf(n);return 0===r?e.indexOf(t)-e.indexOf(n):r}).reverse(),a=[],s=i.length-1;s>=0;s--){var u=i[s],c=(0,o._)(u.split(":"),2),l=c[0],f=c[1],m=n(void 0===f?l:f);if((null==m?void 0:m.type)==="geojson"&&(null==m?void 0:m.dynamic)===!1||v.includes(l))a.push(u),i.splice(s,1);else break}return i.reverse(),{topRasterLayers:P(i,r).map(function(e){return e===p?{id:p,type:"custom",implementation:function(e){return"raster"===e.effectiveMode&&t}}:e===d.DEFAULT_MARKERS||e===d.EDITOR_MARKERS?{id:e,type:"markers",source:e}:e}),mainLayers:P(a,r)}}function P(e,t){var n,o,i,a={"map:buildings":{vector:{modelsAppearingAnimation:{duration:250}}},"tile3d:buildings":{vector:{parentLayerId:"map:buildings",modelsAppearingAnimation:{duration:250}}},"map:icons":i={vector:{iconsInteractiveArea:t&&(n=t.uatraits.isMobile,o=t.experiments.ui.vectorExtendTaps,n&&o?{field:10,minSize:40}:void 0)}},"indoor:icons":i,"trfe:icons":i,"stv:icons":i,"pht:icons":{vector:(0,r._)({},i.vector,{isolateObjectsColliding:!0})},"carparks:icons":i,"realTimePoi:icons":i};return e.map(function(e){return e in a?(0,c.F7)(e,a[e]):e})}function M(e,t){var n=t.config.experiments.ui.mapModeFuture,o=t.config.bunker.webviewFutureMap&&(0,l.W)(t.config);return e&&b.includes(t.alias)&&(n||o)&&t.modeFutureSelected?"fetchTile"in e?"map"!==t.alias?e:(0,r._)({},e,{fetchTile:""+e.fetchTile+"&maptype=future_map"}):(0,r._)({},e,{tileUrl:""+e.tileUrl+"&maptype=future_map"}):e}function I(e){return e.query.host_crowdtest_tiles?{tileRequestWithCredentials:!0,imageRequestWithCredentials:!0,meshRequestWithCredentials:!0,glyphRequestWithCredentials:!0,richModelRequestWithCredentials:!0,indoorPlanRequestWithCredentials:!0,styleRequestWithCredentials:!0,fontListRequestWithCredentials:!0,fontObjectRequestWithCredentials:!0}:{}}function T(e){return _.filter(function(t){return t.startsWith(""+e+":")})}function Z(e){var t=(0,r._)({experimental_use_metapoi:1,experimental_metapoi_combined_tiles:1},e.experiments.rendererParams||{});return Object.keys(e.query).forEach(function(n){n.startsWith("renderer_")&&(t[n.replace(/^renderer_/,"")]=e.query[n])}),a().stringify(t,{indices:!1})}function D(e,t){return(0,r._)({},e,{imageUrl:L(e.imageUrl,t),tileUrl:L(e.tileUrl,t),meshUrl:L(e.meshUrl,t),richModelUrl:L(e.richModelUrl,t),indoorPlanUrl:L(e.indoorPlanUrl,t),glyphRangeUrl:L(e.glyphRangeUrl,t),fontObjectUrl:L(e.fontObjectUrl,t),fontListUrl:L(e.fontListUrl,t),styleUrl:L(e.styleUrl,t)})}function L(e,t){if(!e)return e;var n=Z(t),r=e.includes("?")?"&":"?";return e+r+n}function A(e,t){var n,r,i,u,c,l,d=(0,s.wo)(e);return d.raster&&"string"==typeof d.raster.fetchTile&&(d.raster.fetchTile=(n=d.raster.fetchTile,r=t.raster,u=(i=(0,o._)(n.split("?"),2))[0],c=i[1],l=a().parse(c),u.includes(";base64")?u:(r?l.style=r:delete l.style,Object.values(l).length>0?[u,a().stringify(l,{encode:!1})].join("?"):u))),d.vector&&(d.vector.customization=t.vector),d}function N(e,t){return F(e,t.bunker.disableAdsMapTiles?"":"&ads=enabled")}function z(e,t){return F(e,"&client_id="+(t.isYango?"yango-web-maps":"yandex-web-maps"))}function F(e,t){return e.includes(";base64")?e:e+t}function U(e){return"dark"===e?"dark":void 0}function O(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return r.reduce(function(e,n){return n(e,t)},e)}},71682:(e,t,n)=>{"use strict";n.d(t,{zR:()=>g,M3:()=>y,p_:()=>f});var r,o=n(34788),i=n(3782),a=function(e,t,n){var r,o,a;return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=(0,i.Z)(n))==n?n:0),void 0!==t&&(t=(t=(0,i.Z)(t))==t?t:0),r=(0,i.Z)(e),o=t,a=n,r==r&&(void 0!==a&&(r=r<=a?r:a),void 0!==o&&(r=r>=o?r:o)),r},s=n(52869),u={linear:function(e){return e},easeOutCubic:function(e){return 1-Math.pow(1-e,3)},easeOutQuart:function(e){return 1-Math.pow(1-e,4)},easeInOutQuad:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},c=50*Math.PI/180;function l(e,t,n){void 0===n&&(n=1e-6);var r=e-t;return-n<r&&r<n}var d=function(e){return a(17.5+(e.size.y-800)*.0017857142857142857,17.5,18)},p=function(e,t,n,o,i,a){if(void 0===i&&(i=u.linear),!r){var c,l,d,p,f,m,v,h,g,y,_,b=(void 0===(c=i)&&(c=u.linear),f=e.worldCenter,m=e.zoom,v=e.tilt,h=e.azimuth,g=null!=(l=n.zoom)?l:e.zoom,y=null!=(d=n.tilt)?d:e.tilt,_=null!=(p=n.azimuth)?p:e.azimuth,e.animateForDuration(o,function(e,t){var r,o,i,a,s,u=c(t);return{worldCenter:n.worldCenter?(r=u,o=f,i=n.worldCenter,{x:(a=o.x)+(i.x-a)*r,y:(s=o.y)+(i.y-s)*r}):e.worldCenter,zoom:void 0!==n.zoom?m+(g-m)*u:e.zoom,tilt:void 0!==n.tilt?v+(y-v)*u:e.tilt,azimuth:void 0!==n.azimuth?h+(_-h)*u:e.azimuth}})),w=s.Z.create(b.complete,{success:function(){r=void 0,null==a||a()},fail:function(){r=void 0}});r={name:t,stop:function(){null==a||a(),b.stop(),w.cancel()}}}},f=function(e){e&&e!==(null==r?void 0:r.name)||(null==r||r.stop(),r=void 0)},m=function(e,t){var n=null==t?void 0:t.worldCenter;return!!n&&!(l(e.worldCenter.x,n.x)&&l(e.worldCenter.y,n.y)&&l(e.zoom,d(e))&&l(e.tilt,c))},v=function(e,t,n){void 0===t&&(t=!0);var r=t?6e4:59500;p(e,"flyover",{azimuth:e.azimuth+2*Math.PI*r/6e4},r,u.linear,n)},h=function(e,t,n,r){var o,i,a=u[n||"easeOutCubic"];p(e,"positioning",{worldCenter:t.worldCenter,zoom:null!=(o=null==t?void 0:t.zoom)?o:d(e),tilt:null!=(i=null==t?void 0:t.tilt)?i:c,azimuth:null==t?void 0:t.azimuth},500,a,r)},g=function(e,t,n){if(r&&f(),m(e,t)){var i=e.azimuth+2*Math.PI*500/6e4;h(e,(0,o._)({},t,{azimuth:i}),"linear",function(){v(e,!1,n)})}else v(e,!0,n)},y=function(e,t,n){r&&f(),h(e,t,"easeOutCubic",n)}},69113:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(34788),o=n(18188),i=n(2467);function a(e){var t=function(t,n,a,s){var u=e.replace("{{x}}",String(t)).replace("{{y}}",String(n)).replace("{{z}}",String(a)).replace("{{scale}}","1").replace(/\{\{d\|(\d+)\}\}/,function(e,r){return String((t+n+a)%Number(r)+1)});return(0,i.Z)({url:u,signal:s}).then(function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return[]}return!e||e.error&&404===e.error.code?[]:e.data.features.map(function(e){var t,n,i,a=e.properties.HotspotMetaData.RenderedGeometry;return{type:"rendered",feature:(n=e.properties.URIMetaData,{type:"Feature",id:(i=null==(t=e.properties.HotspotMetaData)?void 0:t.id)?String(i):"",geometry:e.geometry,properties:(0,r._)({},e.properties,{uri:(n&&n.URIs[0]||{}).uri})}),geometry:"Polygon"===a.type?{type:"Polygon",coordinates:a.coordinates.map(function(e){return e.map(function(e){var t=(0,o._)(e,2);return{x:t[0],y:t[1]}})})}:{type:"MultiPolygon",coordinates:a.coordinates.map(function(e){return e.map(function(e){return e.map(function(e){var t=(0,o._)(e,2);return{x:t[0],y:t[1]}})})})}}})})};return t.template=e,t}},49297:(e,t,n)=>{"use strict";n.d(t,{F0:()=>m,LY:()=>y,Ny:()=>h,$Y:()=>p,cx:()=>f,CM:()=>E,Oc:()=>v,gC:()=>b});var r=n(18188),o=n(11640),i=n(44330),a=n(37806),s=n(60309);function u(e,t){return[(0,s.W)(e[0],t),(0,s.W)(e[1],t)]}var c=n(15900),l=n(37048),d=n(48860);function p(e,t,n,r,o){void 0===r&&(r=!0);var s=e.center,u=e.zoom,c=e.span,l=e.bounds,d=b(n,t);if(!u){var p,f,y,_,w,E,S,C,k,R=l||(f=(p={center:s,span:c}).center,y=p.span,_=Math.min(Math.max(f[1]*Math.PI/180,-Math.PI/2+a.Qs),Math.PI/2-a.Qs),w=Math.max(Math.min(y[1],180),0),C=(Math.atan((-(S=((E=Math.exp(a.d3*Math.log(Math.tan(_/2+Math.PI/4))*2/a.d3))+1)*Math.tan(Math.min(Math.max(w*Math.PI/180/2,-Math.PI/2+a.Qs),Math.PI/2-a.Qs)))+Math.sqrt(Math.max(S*S- -(4*E),0)))/2*1)-Math.PI/4)*360/Math.PI,k=y[0]/2,[[(0,i.u)(f[0]-k),C],[(0,i.u)(f[0]+k),C+w]]);u=v(R,d,r,o),s=h(R)}return c=g(l=m(s,u,d)),{center:s,zoom:u,span:c,bounds:l}}function f(e){var t=[e.center[0],e.center[1]],n=e.size,r=b({width:n.x,height:n.y},e.margin),o=m(t,e.zoom,r),i=g(o);return{center:t,zoom:e.zoom,span:i,bounds:o}}function m(e,t,n){var o=(0,r._)((0,c.f)(e,t),2),i=o[0],a=o[1],u=[[i-n.width/2,a+n.height/2],[i+n.width/2,a-n.height/2]];return[(0,s.W)(u[0],t),(0,s.W)(u[1],t,!1)]}function v(e,t,n,r){void 0===r&&(r=0);var o=(0,l.n)(e,0),i=Math.max(Math.abs(o[1][0]-o[0][0]),1e-10),a=Math.max(Math.abs(o[1][1]-o[0][1]),1e-10),s=Math.min(Math.max(0,Math.min(_(t.width/i),_(t.height/a))),23);return n?Math.floor(s+r+1e-10):Math.round(100*s)/100}function h(e){var t,n,o,i,a,u,c,d;return t=[0,0,0,0],n=(0,r._)((0,l.n)(e,23),2),i=(o=(0,r._)(n[0],2))[0],a=o[1],c=(u=(0,r._)(n[1],2))[0],d=u[1],(0,s.W)([(i+c-0)/2,(a+d-0)/2],23)}function g(e){var t=(0,r._)(e,2),n=(0,r._)(t[0],2),o=n[0],i=n[1],a=(0,r._)(t[1],2),s=a[0],u=a[1];return[Math.abs(s-o),(0,d.d)(u,i,i+360)-i]}function y(e,t){var n=(0,l.n)(e,23),r=(0,l.n)(t,23);return u([[Math.min(n[0][0],r[0][0]),Math.min(n[0][1],r[0][1])],[Math.max(n[1][0],r[1][0]),Math.max(n[1][1],r[1][1])]],23)}function _(e){return Math.log(e)*Math.LOG2E}function b(e,t){return{width:Math.max(e.width-(t?t[1]+t[3]:0),1),height:Math.max(e.height-(t?t[0]+t[2]:0),1)}}function w(e){var t=(0,o._)(e),n=t[0];return t.slice(1).reduce(function(e,t){var n,r;return n=(0,l.n)(e,23),r=(0,c.f)(t,23),u([[Math.min(n[0][0],r[0]),Math.min(n[0][1],r[1])],[Math.max(n[1][0],r[0]),Math.max(n[1][1],r[1])]],23)},[n,n])}function E(e){var t,n,r;return"MultiPolygon"===e.geometry.type?e.geometry.coordinates.map(function(e){var t=(0,o._)(e),n=t[0];return t.slice(1).reduce(function(e,t){return y(e,w(t))},w(n))}).reduce(y):(t=e.geometry.coordinates,r=(n=(0,o._)(t))[0],n.slice(1).reduce(function(e,t){return y(e,w(t))},w(r)))}},78597:(e,t,n)=>{"use strict";n.d(t,{Ib:()=>a,Sx:()=>s});var r=n(34788),o=n(87363),i=o.createContext({});i.displayName="mapContext";var a=i.Provider;function s(){return o.useContext(i)}t.ZP=function(e){return void 0===e&&(e={}),function(t){var n=function(n){return o.createElement(i.Consumer,null,function(i){var a=i.map,s=i.ymaps3;return e.shouldWait&&!a?null:o.createElement(t,(0,r._)({},n,{map:a,ymaps3:s}))})};return n.displayName="mapContext("+t.displayName+")",n}}},67677:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=n(11640),o=n(45731);function i(e){return e.split("~").reduce(function(e,t){var n=(0,r._)(t.split(",")),i=n[0],a=n[1],s=n[2],u=n.slice(3),c=(0,o.P)(i+","+a);return a&&!(u.length>0)&&c&&e.push({coordinates:c,color:s}),e},[])}},18898:(e,t,n)=>{"use strict";n.d(t,{fL:()=>d,AK:()=>p,lp:()=>f,Cm:()=>m,Hm:()=>c,zn:()=>s});var r=n(75766),o=n(34788),i=n(48860),a=n(94408),s=400,u=(0,a.u)("ease-in-out"),c=7;function l(e,t,n,i){void 0===i&&(i={});var a=i.cb,c=i.duration,l=e[n];if(l!==t){var d=t-l;e.animateForDuration(null!=c?c:s,function(e,t){return(0,o._)({},e,(0,r._)({},n,l+d*u(t)))}).complete.then(a,a)}}function d(e,t){var n,r=t.cb,o=t.duration;n=0===e.azimuth?-Math.PI/4:e.azimuth<Math.PI?0:2*Math.PI,l(e,n,"azimuth",{cb:r,duration:o})}function p(e,t){void 0===t&&(t={});var n=t.cb,r=t.duration,o=e.tilt===e.tiltRange.min?e.tiltRange.max:e.tiltRange.min;l(e,o,"tilt",{cb:n,duration:r})}function f(e,t,n){void 0===n&&(n={});var r=n.duration,o=n.cb,i=Math.max(e.tiltRange.min,Math.min(t,e.tiltRange.max));l(e,i,"tilt",{duration:r,cb:o})}function m(e,t,n){void 0===n&&(n={});var r=n.duration,o=n.cb,a=(0,i.d)(t,0,2*Math.PI);l(e,a<Math.PI?a:-2*Math.PI+a,"azimuth",{duration:r,cb:o})}},32241:(e,t,n)=>{"use strict";function r(e){if(0===e.length)return[];for(var t=[e[0]],n=0,r=e[0],o=1;o<e.length;o++){var i=e[o],a=i[0]+n-r[0];if(a>360||a<-360){var s=360*Math.floor(a/360);n-=s,a-=s}a>180?n-=360:a<-180&&(n+=360);var u=[i[0]+n,i[1]];t.push(u),r=u}return t}n.d(t,{g:()=>r})},13340:(e,t,n)=>{"use strict";var r=n(34788),o=n(18007),i=n(20224),a=n(87363),s=n(96449),u=n(12574),c=n(11108),l=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._ref=a.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,o=(0,i._)(t,["coordinates"]);return a.createElement(a.Fragment,null,a.createElement(s.Z,{coordinates:n,nonInteractive:!0},a.createElement("div",{ref:this._ref}),a.createElement(c.Z,(0,r._)({type:"balloon"},o,{getTarget:function(){return e._ref.current}}),o.children)),a.createElement(u.Z,{onUpdate:o.isShown?this._onMapUpdate:void 0}))},t}(a.PureComponent);t.Z=l},18692:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(20224),o=n(87363),i=n(44748),a=n(96449),s=n(33228),u=n(69085),c=n.n(u),l=n(90870),d=n.n(l),p=(0,i.Z)("map-circle-placemark"),f=function(e){var t=e.color,n=e.size,i=e.comma,u=e.caption,l=e.outline,f=(0,r._)(e,["color","size","comma","caption","outline"]);return o.createElement(a.Z,f,o.createElement("div",{className:p({comma:i,size:void 0===n?"medium":n,outline:l}),style:{color:t}},o.createElement(s.Z,{className:p("placemark"),url:i?d():c()}),o.createElement("div",{className:p("content")},e.children),u?o.createElement("div",{className:p("caption")},u):null))}},57031:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(55877),a=n.n(i),s=n(78597),u=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._uuid=a().v4(),t._getCollidingPrimitiveId=function(e){return t._uuid+":"+e.id},t._getCollidingPrimitives=function(e){var n=new Map;return e.forEach(function(e){n.set(t._getCollidingPrimitiveId(e),{anchor:e.anchor,rect:{minX:e.pixelSize[0][0],minY:e.pixelSize[1][1],maxX:e.pixelSize[1][0],maxY:e.pixelSize[0][1]}})}),n},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._getCollidingPrimitives(e.placemarks);e.map.addInvisibleCollidingPrimitives(t)},n.shouldComponentUpdate=function(){return!this.props.preventUpdates},n.componentDidUpdate=function(){var e=this,t=this.props,n=t.map.getInvisibleCollidingPrimitives(),r=[],o=this._getCollidingPrimitives(t.placemarks);n.forEach(function(t,n){n.startsWith(e._uuid+":")&&r.push(n)}),t.map.removeInvisibleCollidingPrimitives(r),t.map.addInvisibleCollidingPrimitives(o)},n.componentWillUnmount=function(){var e=this.props;e.map.removeInvisibleCollidingPrimitives(e.placemarks.map(this._getCollidingPrimitiveId))},n.render=function(){return null},t}(o.Component);t.Z=(0,s.ZP)({shouldWait:!0})(u)},83243:(e,t,n)=>{"use strict";var r=n(18007);n(8664);var o=n(87363),i=n(44748),a=n(90585),s=n(31336),u=n(78597),c=n(32721),l=n(37830),d=n(44953),p=n(12574),f=n(81966),m=n(88599),v=n(980),h=(0,m.Z)((0,f.Z)({resolved:{},chunkName:function(){return"lang-switcher"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("lang-switcher").then(n.bind(n,39611))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 39611}}),function(e){return e.config.availableLangs.length>1}),g=(0,f.Z)({resolved:{},chunkName:function(){return"scale-line"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.resolve().then(n.bind(n,70692))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 70692}}),y=(0,f.Z)({resolved:{},chunkName:function(){return"logo-view"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("logo-view").then(n.bind(n,88931))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 88931}}),_=(0,a.Z)(s.ZP,(0,u.ZP)({shouldWait:!0})),b=(0,i.Z)("map-copyrights"),w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._update=function(){n.setState({maxWidth:n.props.map.container.offsetWidth-n._getRightOffset(),copyrights:(0,c.h)(n.props.map)})},n._getRightOffset=function(){return n.props.right-12},n._getPrivacyItem=function(){var e=n.props.config;return e.isYango?{type:"privacy",text:"Конфиденциальность",href:e.confidentialPolicyUrl+"?lang="+e.lang}:null},n._getTermsItem=function(e){var t=n.props.config;return{type:e?"terms_short":"terms",text:e?"Условия":"Условия использования",href:t.agreementUrl+"?lang="+t.lang}},n._getCopyrightsItem=function(){return{type:"copyrights",text:n.state.copyrights,shrink:!0}},n._getRightHoldersItem=function(){var e=n.props.config;return{type:"right_holders",text:"Правообладатели",href:e.rightHoldersUrl+"?lang="+e.lang}},n._getSupportItem=function(){var e=n.props.config;return(0,l.m)(e)?null:{type:"support",text:"Справка",href:e.feedback.helpUrl+"?lang="+e.lang}},n._getLocalizationItem=function(){return 1===n.props.config.availableLangs.length?null:{type:"lang",text:o.createElement(h,null)}},n._renderBlock=function(e,t){var n=t.filter(function(e){return!!e});return o.createElement("div",{className:b("block",{type:e})},n.map(function(e){var t=e.href?"a":"div";return o.createElement(d.ZP,{name:e.type,logClick:!!e.href,key:e.type},o.createElement(t,{className:b("item",{shrink:e.shrink,noprint:e.noprint,type:e.type}),href:e.href,target:"_blank"},e.text))}))},n._renderBlocks=function(){var e=n.props;return(e.config,e.copyrightOnly)?n._renderBlock("copyrights-only",[n._getCopyrightsItem(),n._getTermsItem(),n._getPrivacyItem()]):o.createElement(o.Fragment,null,n._renderBlock("copyrights",[n._getCopyrightsItem(),n._getRightHoldersItem()]),n._renderBlock("links",[{type:"service",text:"© Яндекс"},n._getLocalizationItem(),n._getSupportItem(),n._getTermsItem(),n._getTermsItem(!0),n._getPrivacyItem()]))},n.state={maxWidth:0,copyrights:(0,c.h)(n.props.map)},n}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.copyrightOnly?"copyrights-only":"map"===e.layer?"scheme":"satellite";return o.createElement("footer",null,o.createElement(d.ZP,{name:"map_copyrights"},o.createElement("div",{className:b({type:t}),style:(0,v.cq)(e.config,{maxWidth:this.state.maxWidth,right:this._getRightOffset()})},this._renderBlocks(),o.createElement(p.Z,{onResize:this._update,onCopyrightsChange:this._update}))),e.copyrightOnly?null:o.createElement("div",{className:b("logo-layout")},o.createElement(y,{view:"map",isNegative:"map"!==e.config.mapType})),!e.copyrightOnly&&e.location?o.createElement("div",{className:b("scale-line")},o.createElement(g,{center:e.location.center,zoom:e.location.zoom})):null)},t}(o.PureComponent);t.Z=_(w)},84238:(e,t,n)=>{"use strict";var r=n(18007),o=n(87363),i=n(78597),a=n(31336),s=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._key="",t._applyCursor=function(){var e,n=t._getCursor();!t.props.src&&n&&n.startsWith("url(")||(t.props.map.container.style.cursor=(e=t.props).src&&e.basePoint?'url("'+e.src+'") '+e.basePoint.join(" ")+', url("'+e.src+'"), auto':e.cursor||"default",t._key=t._getCursor())},t._getCursor=function(){return t.props.map.container.style.cursor||""},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._applyCursor()},n.componentDidUpdate=function(){this._applyCursor()},n.componentWillUnmount=function(){this._getCursor()===this._key&&(this.props.map.container.style.cursor="")},n.render=function(){return null},t}(o.Component);t.Z=(0,i.ZP)({shouldWait:!0})((0,a.ZP)(s))},96313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(18007),o=n(87363),i=n(94960),a=n(39705),s=n(57636),u=n(44748),c=n(78597),l=n(12574),d=n(96449),p=n(44953),f=n(97313),m=n(57031),v=n(31336),h=n(90585),g=n(85172),y=(0,u.Z)("map-entrances-view"),_=(0,h.Z)(v.ZP,(0,c.ZP)({shouldWait:!0}),g.ZP),b=[[-5,-5],[5,5]];function w(e){return e>=18?"large":e>=17?"normal":e>=16?"small":void 0}var E=_(function(e){function t(t){var n;return(n=e.call(this,t)||this)._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._onMapUpdate=function(){var e=n.props,t=n.state,r=e.map.zoom,o=e.map.azimuth;(r!==t.mapZoom||o!==t.mapAzimuth)&&n.setState({mapZoom:r,mapAzimuth:o})},n._renderEntrance=function(e,t){var r=n.props,u=n.state,c=w(u.mapZoom),l=((e.azimuth||0)+(0,i.Z)(u.mapAzimuth))%360,m=r.isMetro?16:0;return o.createElement(p.ZP,{key:t,name:"entrance",nodeState:{name:e.name,coords:(0,a.s)(e.coordinates)}},o.createElement(d.Z,{coordinates:e.coordinates,nonInteractive:!r.onEntranceClick,onClick:function(){return null==r.onEntranceClick?void 0:r.onEntranceClick.call(r,e)},zIndex:f.I.search.base},o.createElement("div",{className:y({size:c,animated:r.animated})},o.createElement("div",{style:{transform:"rotate("+l+"deg)",paddingTop:m}},void 0!==e.azimuth&&"small"!==c?o.createElement("div",{className:y("arrow-container")},o.createElement(s.Z,{name:"large"===c?"entrance-arrow-red-13x22":"entrance-arrow-red-10x15",theme:r.theme,className:y("arrow",{large:"large"===c}),inline:!0})):void 0,r.isMetro?null:o.createElement("div",{className:y("dot")})),u.isVector&&e.name&&u.mapZoom>=18.5?o.createElement("div",{className:y("title",{position:l>45&&l<135?"left":"right"})},e.name):null)))},n._renderEntrances=function(){var e=n.props,t=n.state,r=w(t.mapZoom);return e.result.entrances&&r?o.createElement(o.Fragment,null,e.result.entrances.map(n._renderEntrance),t.mapZoom>=18.5&&!e.isMetro?o.createElement(m.Z,{placemarks:e.result.entrances.map(function(e){return{anchor:e.coordinates,id:e.coordinates.join(","),pixelSize:b}})}):null):null},n.state={mapZoom:t.map.zoom,mapAzimuth:t.map.azimuth,isVector:"vector"===t.map.getEffectiveMode()},n}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderEntrances(),o.createElement(l.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.PureComponent))},43410:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=(0,n(84641).Z)("mapFeatureGroup",{}),o=r.connect,i=r.Provider;t.Z=o},91260:(e,t,n)=>{"use strict";var r=n(2267),o=n(18007),i=n(87363),a=n(55877),s=n.n(a),u=n(78597),c=n(111),l=n(50576),d=n(99870),p=n(43410),f=n(90585),m=n(80937),v={onClick:"click",onFastClick:"fastclick",onTouchEnd:"touchend",onDoubleClick:"dblclick",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseMove:"mousemove"},h=(0,f.Z)(p.Z,(0,u.ZP)({shouldWait:!0})),g=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n._getFeature=function(){return{type:"Feature",id:n._id,geometry:n.props.geometry,draggable:n.props.draggable}},n._addHandler=function(e,t,r){n._handlers[e]=function(e,t,o){(null==e?void 0:e.type)==="feature"&&e.feature.id===n._id&&r(o,t)},n.props.map.events.on(v[e],t,n._handlers[e])},n._removeHandler=function(e,t){n.props.map.events.off(v[e],t,n._handlers[e]),delete n._handlers[e]},n._dragStart=function(e){var t=e.object,r=e.newGeometry;if("Feature"===t.type&&t.id===n._id){var o=(0,m.ZE)(r,function(e){return n.props.map.projection.fromWorldCoordinates(e)});o.coordinates&&(null==n.props.onDragStart||n.props.onDragStart.call(n.props,{coordinates:o.coordinates}))}},n._dragMove=function(e){var t=e.object,r=e.newGeometry;if(n.props.onDragMove&&"Feature"===t.type&&t.id===n._id){var o=(0,m.ZE)(r,function(e){return n.props.map.projection.fromWorldCoordinates(e)});return o.coordinates&&(null==n.props.onDragMove||n.props.onDragMove.call(n.props,{coordinates:o.coordinates})),!1}},n._dragEnd=function(e){var t=e.newGeometry,r=e.object;if(n._dragMoveThrottled.cancel(),"Feature"===r.type&&r.id===n._id){var o=(0,m.ZE)(t,function(e){return n.props.map.projection.fromWorldCoordinates(e)});return o.coordinates&&(null==n.props.onDragEnd||n.props.onDragEnd.call(n.props,{coordinates:o.coordinates})),!1}},n._id=t.id||s().v4(),n._dragMoveThrottled=(0,c.Z)(n._dragMove,50),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props;t.map.addFeature(this._dataSourceId,this._getFeature(),t.drawingStyle,t.parentGroupId),Object.keys(v).forEach(function(n){t[n]&&e._addHandler(n,e._dataSourceId,t[n])}),t.draggable&&(t.map.dragger.on("dragStart",this._dragStart),t.map.dragger.on("dragMove",this._dragMoveThrottled),t.map.dragger.on("dragEnd",this._dragEnd))},n.componentDidUpdate=function(e){var t=this,n=this.props,r=e.dataSourceId?e.dataSourceId:d.UZ.DEFAULT_GRAPHICS;r!==this._dataSourceId?(n.map.removeFeatureById(r,this._id),n.map.addFeature(this._dataSourceId,this._getFeature(),n.drawingStyle,n.parentGroupId)):((0,l.Z)(e.drawingStyle,n.drawingStyle)&&(0,l.Z)(e.geometry,n.geometry)&&e.draggable===n.draggable||n.map.updateFeature(this._dataSourceId,this._getFeature(),n.drawingStyle),e.parentGroupId!==n.parentGroupId&&n.map.moveFeatureToGroup(this._dataSourceId,this._getFeature().id,n.parentGroupId)),Object.keys(v).forEach(function(o){(n[o]!==e[o]||r!==t._dataSourceId)&&(e[o]&&t._removeHandler(o,r),n[o]&&t._addHandler(o,t._dataSourceId,n[o]))}),!e.draggable&&n.draggable?(n.map.dragger.on("dragStart",this._dragStart),n.map.dragger.on("dragMove",this._dragMoveThrottled),n.map.dragger.on("dragEnd",this._dragEnd)):e.draggable&&!n.draggable&&(n.map.dragger.offSingle("dragStart",this._dragStart),n.map.dragger.offSingle("dragMove",this._dragMoveThrottled),n.map.dragger.offSingle("dragEnd",this._dragEnd))},n.componentWillUnmount=function(){var e=this;this.props.map.dragger.offSingle("dragStart",this._dragStart),this.props.map.dragger.offSingle("dragMove",this._dragMoveThrottled),this.props.map.dragger.offSingle("dragEnd",this._dragEnd),Object.keys(this._handlers).forEach(function(t){return e._removeHandler(t,e._dataSourceId)}),this.props.map.removeFeatureById(this._dataSourceId,this._id)},n.render=function(){return null},(0,r._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||d.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent);t.Z=h(g)},9322:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(34788),o=n(18007),i=n(87363),a=n(31336),s=n(78597),u=n(84238),c=n(99870),l=n(12574);function d(e,t){var n;return!!(null==(n=e.properties.tags)?void 0:n.includes(t))}var p={color:{r:1,g:68/255,b:.2,a:1}},f={lightness:-.1,saturation:1},m={lightness:-.1,saturation:0},v=n(16145).Z.getLogger("map-objects"),h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n.state={isHover:!1},Object.keys(l.h).forEach(function(e){return n._handlers[e]=n._getHandler(e)}),n}(0,o._)(t,e);var n=t.prototype;return n._getHandler=function(e){var t=this;return function(n,r){var o=t.props,i=n.feature;"onMouseEnter"===e&&v(i.id,n);var a=!o.config.uatraits.isTouch&&!o.disableHighlight;(o.shouldHover?o.shouldHover(i):!!o.onClick)&&("onMouseEnter"===e&&(a&&o.map.setObjectHighlight(function(e){var t,n,r,o,i;if(r=(null==(n=e.properties.vectorMetadata)?void 0:n.get("_vector_richModel"))==="model",o=d(e,"major_landmark")&&d(e,"building"),!r&&!o)return(null==(t=e.properties.vectorMetadata)?void 0:t.get("_vector_layerName"))==="tile3d"?{object:e,color:m}:{object:e,color:2===((null==(i=e.properties.tags)?void 0:i.length)||0)&&d(e,"building")&&d(e,"structure")?f:p}}(i)),t.setState({isHover:!0})),"onMouseLeave"===e&&(a&&o.map.setObjectHighlight(void 0),t.setState({isHover:!1})));var s=o[e];s&&s(i,r)}},n.render=function(){var e=this,t=(0,c.se)(this.props.layer);return i.createElement(i.Fragment,null,this.state.isHover?i.createElement(u.Z,{cursor:"pointer"}):null,t.map(function(t){return i.createElement(l.Z,(0,r._)({key:t,layer:t},e._handlers))}))},t}(i.Component),g=(0,a.ZP)((0,s.ZP)({shouldWait:!0})(h))},76475:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>f});var r=n(18007),o=n(11912),i=n(87363),a=n(31336),s=n(78597),u=n(99870),c=n(9322),l=n(66808),d=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?(0,l.Z)(e,t,void 0,n):!!r},p=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._updateLayer=function(e,n){var r=t.props.map;if(!r.destroyed){var i=n&&r.getDataSource(n.layer);n&&n.dataSource&&(i?e&&r.updateTileDataSource(n.layer,n.dataSource):r.addDataSource(n.layer,n.dataSource));var a=r.getLayers(),s=a.topRasterLayers,c=a.mainLayers,l=(0,o._)(c).concat((0,o._)(s));if(e){var d=(0,u.se)(e.layer);l=l.filter(function(e){return!d.includes(e)})}if(n){var p,f=(0,u.se)(n.layer);(p=l).push.apply(p,(0,o._)(f))}r.setLayers((0,u.c8)(l,t.props.ymaps3.EventBlockerLayer,function(e){return r.getDataSource(e)},t.props.config)),e&&e.dataSource&&(!n||!n.dataSource)&&r.removeDataSource(e.layer)}},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateLayer(void 0,this.props)},n.componentDidUpdate=function(e){this.props.layer===e.layer&&this._enhancedIsEqual(e.dataSource,this.props.dataSource)||this._updateLayer(e,this.props)},n.componentWillUnmount=function(){this._updateLayer(this.props)},n._enhancedIsEqual=function(e,t){return d(e,t,function(e,t){if("function"==typeof e&&"function"==typeof t)return e.toString()===t.toString()})},n.render=function(){return i.createElement(c.Z,this.props)},t}(i.Component),f=(0,a.ZP)((0,s.ZP)({shouldWait:!0})(p))},22712:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r,o=n(18007),i=n(11912),a=n(87363),s=n(78597),u=n(31336),c=n(91260),l=n(96449),d=n(39029),p=n(36897),f=n(44748),m=n(97313),v=n(99870),h=(0,f.Z)("map-line-editor"),g=m.I.editing-3,y=m.I.editing-1,_=m.I.editing-2,b=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setLayers=function(e){var t=n.props.map,o=t.getLayers(),a=o.topRasterLayers,s=o.mainLayers,u=(0,i._)(a).concat((0,i._)(s)),c=n.props.config.uatraits.isMobile?"click":"fastclick";n.props.editorLayerOwner?(u.push(v.Il),r=n.props.editorLayerOwner,t.events.on(c,v.Il,n._onEditorLayerClick)):e&&(e.editorLayerOwner===r&&(u=u.filter(function(e){return e!==v.Il}),r=void 0),t.events.off(c,v.Il,n._onEditorLayerClick)),t.setLayers((0,v.c8)(u,n.props.ymaps3.EventBlockerLayer,function(e){return t.getDataSource(e)},n.props.config))},n._onEditorLayerClick=function(e,t){n.props.onPointAdd(t.coordinates,n.props.points.length)},n._updatePoint=function(e,t,r){n.props.onPointUpdate&&void 0!==t&&n.props.onPointUpdate(e,t,!!r)},n._onMouseMove=function(e){var t,r=n.props.map.convertScreenToWorldCoordinates(e).coordinates;if(n.props.onLineMouseMove&&n.props.onLineMouseMove(e,{coordinates:r}),n.props.polyLineCoordinates&&n.props.isActive&&void 0===n.state.draggingPoint){var o=(t=Math).max.apply(t,(0,i._)(n.props.lineStyle.stroke.map(function(e){return e.width||0}))),a=(0,d.x)(n.props.polyLineCoordinates,r,o,n.props.map.zoom,!0);a&&"point"in a&&n.setState({previewPoint:a})}},n._onNewPointDragStart=function(){var e=n.state,t=n.props;if(e.previewPoint){var r=function(e,t,n){for(var r=0,o=0;o<e.length-1;o++){var i=t[r];if(i&&(0,p.J)(i,e[o],15e-7)&&(r+=1),o===n)break}return r}(t.polyLineCoordinates,t.points,e.previewPoint.segmentIndex)||void 0;void 0!==r&&e.previewPoint.point&&(n.setState({draggingPoint:{index:r,point:e.previewPoint.point}}),t.onPointAdd(e.previewPoint.point,r))}},n._onExistingPointDragStart=function(e){n.props.points[e]&&n.setState({draggingPoint:{index:e,point:n.props.points[e]}})},n._onDragMove=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:{index:r.draggingPoint.index,point:t}}),n._updatePoint(t,r.draggingPoint.index))},n._onDragEnd=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:void 0,previewPoint:void 0}),n._updatePoint(t,r.draggingPoint.index,!0))},n._onPointDoubleClick=function(e){n.props.isActive&&n.props.onPointRemove&&n.props.onPointRemove(e)},n._onPointClick=function(e){n.props.onPointClick&&n.props.onPointClick(e)},n._renderDraggingOrPreviewPoint=function(){var e=n.state,t=n.props,r=e.draggingPoint||e.previewPoint;if(!r||!t.isActive||t.config.uatraits.isMobile)return null;var o="segmentIndex"in r;return a.createElement(l.Z,{coordinates:r.point,onDragStart:n._onNewPointDragStart,onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onMouseMove:n._onMouseMove,onMouseLeave:t.onPreviewPointMouseLeave,onClick:t.onPreviewPointClick,zIndex:o?g:y,draggable:t.isActive,dataSourceId:v.UZ[t.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0},o?a.createElement("div",{className:h("preview-point")},t.previewPointElement):n.props.renderPointElement("index"in r&&r.index||0))},n._renderPoints=function(){return n.props.points.map(function(e,t){return a.createElement(l.Z,{key:t,onDragStart:function(){return n._onExistingPointDragStart(t)},onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onDoubleClick:function(){return n._onPointDoubleClick(t)},onClick:function(){return n._onPointClick(t)},coordinates:e,draggable:n.props.isActive,zIndex:_,dataSourceId:v.UZ[n.props.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0,nonInteractive:!n.props.isActive},n.state.draggingPoint&&n.state.draggingPoint.index===t?null:n.props.renderPointElement(t))})},n.state={},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._setLayers()},n.componentDidUpdate=function(e){e.editorLayerOwner!==this.props.editorLayerOwner&&this._setLayers(e)},n.render=function(){var e=this.props.editorLayerOwner?"EDITOR_GRAPHICS":"RASTER_GRAPHICS";return a.createElement(a.Fragment,null,this._renderDraggingOrPreviewPoint(),this._renderPoints(),a.createElement(c.Z,{drawingStyle:this.props.lineStyle,geometry:{type:"LineString",coordinates:this.props.polyLineCoordinates},onMouseMove:this._onMouseMove,onMouseEnter:this.props.onLineMouseEnter,onMouseLeave:this.props.onLineMouseLeave,dataSourceId:v.UZ[e],onClick:this.props.onPreviewPointClick}))},t}(a.Component),w=(0,s.ZP)({shouldWait:!0})((0,u.ZP)(b))},12574:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var r=n(18007),o=n(87363),i=n(78597),a={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onFastClick:"fastclick",onTouchCancel:"touchcancel",onPointerDown:"pointerdown",onPointerMove:"pointermove",onPointerUp:"pointerup",onPointerCancel:"pointercancel",onClick:"click",onDoubleClick:"dblclick",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove"},s={onUpdate:"update",onCopyrightsChange:"copyrightsChange",onResize:"resize",onZoomRangeChange:"zoomRangeChange",onReady:"ready",onTile3dChanged:"tile3dChanged",onTile3dVisibilityChange:"tile3dVisibilityChange",onVisibleObjectsChanged:"visibleObjectsChanged",onIndoorPlansChanged:"indoorPlansChanged",onVectorError:"vectorError",onVectorStart:"vectorStart",onZoomRoundingChanged:"zoomRoundingChanged",onMainEngineChanged:"mainEngineChanged"},u=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._applyMapHandlers=function(e,t,n){Object.keys(s).forEach(function(r){(!n||!t||n[r]!==t[r])&&(n&&n[r]&&e.offSingle(s[r],n[r]),t&&t[r]&&e.on(s[r],t[r]))})},t._applyDomHandlers=function(e,t,n){Object.keys(a).forEach(function(r){(!n||!t||n[r]!==t[r]||n.layer!==t.layer)&&(n&&n[r]&&e.events.off(a[r],n.layer||"none",n[r]),t&&t[r]&&e.events.on(a[r],t.layer||"none",t[r]))})},t._onInertiaStart=function(e){t.props.onInertiaStart&&t.props.onInertiaStart(t.props.map.calculateCenter(e.targetPositionWcs))},t._onDragStart=function(){t.props.onDragStart&&t.props.onDragStart()},t._onDragEnd=function(){t.props.onDragEnd&&t.props.onDragEnd()},t._onContainerTouchMove=function(e){t.props.onContainerTouchMove&&t.props.onContainerTouchMove(c(e))},t._onContainerPointerMove=function(e){t.props.onContainerPointerMove&&t.props.onContainerPointerMove(c(e))},t._onActionStart=function(e){t.props.onActionStart&&t.props.onActionStart(e)},t._onActionEnd=function(e){t.props.onActionEnd&&t.props.onActionEnd(e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.map;this._applyMapHandlers(e,this.props),this._applyDomHandlers(e,this.props),e.behaviors.on("actionStart",this._onActionStart),e.behaviors.on("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.on("inertiaStart",this._onInertiaStart),e.behaviors.drag.on("dragStart",this._onDragStart),e.behaviors.drag.on("dragEnd",this._onDragEnd)),e.container.addEventListener("touchmove",this._onContainerTouchMove),e.container.addEventListener("pointermove",this._onContainerPointerMove)},n.componentDidUpdate=function(e){this._applyMapHandlers(this.props.map,this.props,e),this._applyDomHandlers(this.props.map,this.props,e)},n.componentWillUnmount=function(){var e=this.props.map;this._applyMapHandlers(e,void 0,this.props),this._applyDomHandlers(e,void 0,this.props),e.behaviors.offSingle("actionStart",this._onActionStart),e.behaviors.offSingle("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.offSingle("inertiaStart",this._onInertiaStart),e.behaviors.drag.offSingle("dragStart",this._onDragStart),e.behaviors.drag.offSingle("dragEnd",this._onDragEnd)),e.container.removeEventListener("touchmove",this._onContainerTouchMove),e.container.removeEventListener("pointermove",this._onContainerPointerMove)},n.render=function(){return null},t}(o.PureComponent);function c(e){if("touches"in e){var t=e.touches[0]||e.changedTouches[0];return[t.clientX,t.clientY]}return[e.clientX,e.clientY]}t.Z=(0,i.ZP)({shouldWait:!0})(u)},96449:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(2267),o=n(34788),i=n(18007),a=n(87363),s=n(61533),u=n(55877),c=n.n(u),l=n(44748),d=n(78597),p=n(97313),f=n(99870),m=n(32858),v=n(31336),h=(0,l.Z)("map-placemark"),g=function(){},y=function(e){function t(t){var n;return(n=e.call(this,t)||this)._container=document.createElement("div"),n._onDragStart=function(){n.setState({isDragging:!0}),n._fireInteractionEvent()},n._fireInteractionEvent=function(){m.N(window,"map-placemark-interaction")},n._updateCursor=function(){var e=n.state.isDragging?"grabbing":n.props.cursor?n.props.cursor:n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default";n._container.style.cursor=e},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach(function(e){t[e]&&n._mapEventHandlers.on(e,function(r){var o=r.object,i=r.newGeometry;if(o&&"Feature"===o.type&&o.id===n._marker.feature.id){var a=n.props.map.projection.fromWorldCoordinates(i.coordinates);t[e]({coordinates:a})}})})},n._onDragEnd=function(e){var t=e.object,r=e.newGeometry;n.setState({isDragging:!1}),t&&"Feature"===t.type&&t.id===n._marker.feature.id&&(n._marker.feature.geometry.coordinates=n.props.map.projection.fromWorldCoordinates(r.coordinates))},n._onClick=function(e){e.stopPropagation(),n._fireInteractionEvent();var t=n.props,r=t.onClick||g,o=t.onFastClick||g,i=t.onDoubleClick||g;n._clickTimer?(i(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(o(),n._clickTimer=window.setTimeout(function(){r(),n._clickTimer=void 0},300))},n.state={isDragging:!1},n._container.className=h(),n._marker={feature:{type:"Feature",id:c().v4(),draggable:t.draggable,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents,geometry:{type:"Point",coordinates:t.coordinates}},style:{zIndex:t.zIndex||p.I.default,element:n._container}},n._mapEventHandlers=n.props.map.dragger.group(),n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._updateCursor(),this._addMapEventHandlers(e),e.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style),this._mapEventHandlers.on("dragStart",this._onDragStart),this._mapEventHandlers.on("dragEnd",this._onDragEnd)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeFeatureById(this._dataSourceId,this._marker.feature.id)),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e,t){var n=e.dataSourceId?e.dataSourceId:f.UZ.DEFAULT_MARKERS;n!==this._dataSourceId&&(this.props.map.removeFeatureById(n,this._marker.feature.id),this.props.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style));var r=this.props,i=!1;r.coordinates!==e.coordinates&&(i=!0,this._marker.feature.geometry.coordinates=r.coordinates),e.draggable!==r.draggable&&(i=!0,this._marker.feature.draggable=r.draggable),e.zIndex!==r.zIndex&&(i=!0,this._marker.style.zIndex=r.zIndex||p.I.default),e.disableRoundCoordinates!==r.disableRoundCoordinates&&(i=!0,this._marker.feature.disableRoundCoordinates=r.disableRoundCoordinates||!1),i&&this.props.map.upsertFeature(this._dataSourceId,(0,o._)({},this._marker.feature),(0,o._)({},this._marker.style)),(r.onDragStart!==e.onDragStart||r.onDragMove!==e.onDragMove||r.onDragEnd!==e.onDragEnd)&&(this._mapEventHandlers.offAll(),this._addMapEventHandlers(r)),(e.draggable!==r.draggable||e.cursor!==r.cursor||e.onClick!==r.onClick||t.isDragging!==this.state.isDragging)&&this._updateCursor()},n.render=function(){var e=this.props;return s.createPortal(a.createElement("div",{dir:e.config.isRtl?"rtl":"ltr","aria-hidden":!0,className:h("wrapper",{"non-interactive":e.nonInteractive}),onClick:this._onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseMove:e.onMouseMove},e.children),this._container)},(0,r._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||f.UZ.DEFAULT_MARKERS}}]),t}(a.PureComponent),_=(0,v.ZP)((0,d.ZP)({shouldWait:!0})(y))},44054:(e,t,n)=>{"use strict";var r=n(18007),o=n(11640),i=n(11912),a=n(87363),s=n(37806),u=n(29657),c=n(41421),l=n(38067),d=n(15900),p=n(12690),f=n(60309),m=n(36897),v=n(91260),h=n(32241),g=(s.d3,Math.PI,function(e){function t(t){var n;return(n=e.call(this,t)||this)._getGeodesicGeometry=function(){for(var e=n.props,t=[],r=0;r<=2*Math.PI;r+=Math.PI/40){var a=(0,u.S)(e.center,[Math.cos(r),Math.sin(r)],e.radius).endPoint;t.push(a)}var s=(0,o._)(t),d=s[0],p=s.slice(1),f=(0,i._)(p).concat([d]).reduce(function(e,t){return(0,i._)(e).concat((0,i._)((0,c.b)([e.pop(),t])))},[d]),m=f.reduce(function(e,t){var n=t[0]>90||t[0]<-90?Math.round(t[0]/360):0;return e[n]++,e},{"-1":0,0:0,1:0}),v=0;m["-1"]>m[0]&&(v=360),m[1]>m[0]&&(v=-360),v&&(f=f.map(function(e){return[e[0]+v,e[1]]}));var h=[f[0][0],e.center[1]>0?90:-90];return(0,l.t)(h,e.center)<=e.radius&&(f.unshift(h),f.push(h)),f},n._getPixelGeometry=function(){for(var e=n.props,t=(0,d.f)(e.center,2),r=(0,u.S)(e.center,[-1,0],e.radius).endPoint,o=(0,p.g)((0,d.f)(r,2),t),i=[],a=0;a<=2*Math.PI;a+=Math.PI/40){var s=[t[0]+Math.cos(a)*o,t[1]+Math.sin(a)*o];i.push((0,f.W)(s,2))}return i},n._getGeometry=function(){var e=n.props;e.radius;var t=e.geodesic?n._getGeodesicGeometry():n._getPixelGeometry();return{type:"Polygon",coordinates:[(0,h.g)(t)]}},n.state={geometry:n._getGeometry()},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props;(0,m.J)(t.center,e.center)&&t.radius===e.radius||this.setState({geometry:this._getGeometry()})},n.render=function(){return a.createElement(v.Z,{geometry:this.state.geometry,drawingStyle:this.props.drawingStyle,dataSourceId:this.props.dataSourceId})},t}(a.PureComponent));t.Z=g},70692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(18007);n(59773);var o=n(87363),i=n(44748),a=n(31336),s=n(18188),u=n(15900),c=n(60309),l=n(38067),d=n(65569),p=n(35645),f=(0,i.Z)("map-scale-line"),m=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e,t,n,r,i,a,p,m,v,h,g=this.props,y=g.config.uatraits.isMobile,_=y?80:75,b=(e={center:g.center,zoom:g.zoom,dimension:y?"height":"width",maxSize:_},n=(t=(0,s._)((0,u.f)(e.center,e.zoom),2))[0],r=t[1],i="width"===e.dimension?1:0,a="height"===e.dimension?1:0,p=(0,c.W)([n-i*e.maxSize/2,r-a*e.maxSize/2],e.zoom),m=(0,c.W)([n+i*e.maxSize/2,r+a*e.maxSize/2],e.zoom),v=(0,l.t)(p,m),h=d.Lr(v,1),{size:Math.abs(v)>1e-7?Math.round(h*e.maxSize/v):e.maxSize,distance:h}),w=b.size,E=b.distance,S={};return y?S.height=_+"px":S.width=w+"px",o.createElement("div",{ref:this.props.forwardedRef,className:f(),style:S,"aria-hidden":!0},o.createElement("div",{className:f("label")},d.Bb(E)),o.createElement("div",{className:f("line")}))},t}(o.PureComponent),v=(0,p.Z)((0,a.ZP)(m))},13109:(e,t,n)=>{"use strict";var r=n(87363),o=n(18692),i={pmbl:"#177ee6",pmrd:"#f43",pmgn:"#3bb300"},a=i.pmbl;t.Z=function(e){return e.points?r.createElement(r.Fragment,null,e.points.map(function(e,t){var n=e.coordinates,s=e.color;return r.createElement(o.Z,{key:t+"_"+n.join(),coordinates:n,color:s&&s in i?i[s]:a,nonInteractive:!0,comma:!0})})):null}},14185:(e,t,n)=>{"use strict";var r=n(18007);n(23144);var o=n(87363),i=n(94960),a=n(99111),s=n(44748),u=n(81966),c=n(12574),l=n(78597),d=n(99870),p=n(93522),f=n(18898),m=n(44953),v=n(31336),h=n(71682),g=(0,u.Z)({resolved:{},chunkName:function(){return"tooltip"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("tooltip").then(n.bind(n,11866))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 11866}}),y=(0,s.Z)("map-tilt-rotate-control"),_=function(e){function t(t){var n;return(n=e.call(this,t)||this)._controlRef=o.createRef(),n._tooltipTargetRef=o.createRef(),n._analyticsCompassRef=o.createRef(),n._analyticsTiltRef=o.createRef(),n._isClick=!1,n._startAzimuth=0,n._isMovementEnabled=!0,n._prevTilt=0,n._recalculateCenter=function(){if(n._controlRef.current){var e=n._controlRef.current.getBoundingClientRect(),t=e.x,r=e.y,o=e.height,i=e.width;n._controlCenterPosition={x:t+i/2,y:r+o/2}}},n._onMapTilt=function(){var e=n.props.map.tilt;e!==n._prevTilt&&(n._prevTilt=e,n.setState({showTooltip:!0}))},n._onMapUpdate=function(){if(n._onMapTiltDebounced(),!n._isClick&&(n.props.map.tilt!==n.state.tilt||n.props.map.azimuth!==n.state.azimuth)){var e;null==(e=n._tooltipTargetRef.current)||e.click()}var t=n._prevZoom,r=n.props.map.zoom,o=n.state.tilt;r<f.Hm&&t&&t>=f.Hm&&o!==n.props.map.tiltRange.min&&(0,f.AK)(n.props.map),n._prevZoom=n.props.map.zoom,n.setState({azimuth:n.props.map.azimuth,tilt:n.props.map.tilt,isTiltDisabled:n.props.map.zoom<f.Hm})},n._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._addRotateEventListeners=function(){window.addEventListener("mousemove",n._onRotateMove),window.addEventListener("mouseup",n._onRotateEnd)},n._removeRotateEventListeners=function(){window.removeEventListener("mousemove",n._onRotateMove),window.removeEventListener("mouseup",n._onRotateEnd)},n._addTiltEventListeners=function(){window.addEventListener("mousemove",n._onTiltMove),window.addEventListener("mouseup",n._onTiltEnd)},n._removeTiltEventListeners=function(){window.removeEventListener("mousemove",n._onTiltMove),window.removeEventListener("mouseup",n._onTiltEnd)},n._onRotateStart=function(e){if(0===e.button&&n._isMovementEnabled){n._isClick=!0,n.setState({isMove:!0});var t=n._controlRef.current.getBoundingClientRect(),r=t.x,o=t.y,i=t.height,a=t.width;n._controlCenterPosition={x:r+a/2,y:o+i/2},n._startMovePosition={x:e.clientX,y:e.clientY},n._startAzimuth=n.state.azimuth,n._recalculateCenter(),n._addRotateEventListeners()}},n._onRotateMove=function(e){var t=n._controlCenterPosition,r=t.x,o=t.y,i=n._startMovePosition,a=Math.atan2(e.pageY-o,e.pageX-r)-Math.atan2(i.y-o,i.x-r);n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n._startAzimuth+a,tilt:n.props.map.tilt})},n._onRotateEnd=function(){if(n.setState({showTooltip:!0,isMove:!1}),n._removeRotateEventListeners(),!n._isClick){var e;null==(e=n._analyticsCompassRef.current)||e.changeState({action_type:"drag",rotation_angle_state:(0,i.Z)(n.props.map.azimuth),rotation_angle_diff:(0,i.Z)(n.props.map.azimuth-n._startAzimuth)})}},n._toggleMapRotate=function(){n._isClick&&n._isMovementEnabled&&(h.p_(),n._isMovementEnabled=!1,(0,f.fL)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null==(e=n._analyticsCompassRef.current)||e.changeState({action_type:"click",rotation_angle_state:(0,i.Z)(n.props.map.azimuth),rotation_angle_diff:(0,i.Z)(n.props.map.azimuth-n._startAzimuth)})}}))},n._onTiltStart=function(e){0===e.button&&n._isMovementEnabled&&(n._isClick=!0,n.setState({isMove:!0}),n._startMovePosition={x:e.clientX,y:e.clientY},n._startTilt=n.props.map.tilt,n._addTiltEventListeners())},n._onTiltMove=function(e){var t=n._startMovePosition.y-e.clientY;if(!(3>Math.abs(t))){var r=Math.PI*t/n.props.map.size.y;n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n.props.map.azimuth,tilt:n._startTilt+r})}},n._onTiltEnd=function(){if(n.setState({showTooltip:!0,isMove:!1}),n._removeTiltEventListeners(),!n._isClick){var e;null==(e=n._analyticsTiltRef.current)||e.changeState({action_type:"drag",rotation_angle_state:(0,i.Z)(n.props.map.tilt),rotation_angle_diff:(0,i.Z)(n.props.map.tilt-n._startTilt)})}},n._toggleMapTilt=function(e){void 0===e&&(e=!1),(e||n._isClick&&n._isMovementEnabled)&&(n._isMovementEnabled=!1,(0,f.AK)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null==(e=n._analyticsTiltRef.current)||e.changeState({action_type:"click",rotation_angle_state:(0,i.Z)(n.props.map.tilt),rotation_angle_diff:(0,i.Z)(n.props.map.tilt-n._startTilt)})}}))},n._toggleMapTiltClickHandler=function(e){n.state.isTiltDisabled||n._toggleMapTilt("key"in e&&"Enter"===e.key)},n._isTiltRotateAllowed=function(){var e=n.state.isVector,t=n.props.map.getLayers().topRasterLayers;return e&&t.every(function(e){return!d.Iw.includes(e.split(":")[0])})},n._renderTooltip=function(){return n.state.showTooltip?o.createElement(g,{id:"tilt-rotate",targetRef:n._tooltipTargetRef,title:"Наклон карты",text:"Нажмите 2D, чтобы изменить угол обзора",showArrow:!0,position:"left",offset:{main:10,side:0},hideForeverOnTargetClick:!0,ignoreCloseButtonClick:!0,closeOnOutsideClick:!0,renderControls:function(e){return o.createElement("div",{"aria-hidden":!0,className:y("tooltip-button"),onClick:e},"Понятно")},checkTargetVisibility:!1}):null},n.state={azimuth:t.map.azimuth,tilt:t.map.tilt,isMove:!1,showTooltip:!1,isTiltDisabled:t.map.zoom<f.Hm,isVector:"vector"===t.map.getEffectiveMode()},n._startTilt=t.map.tiltRange.min,n._onMapTiltDebounced=(0,a.Z)(n._onMapTilt,f.zn),n}(0,r._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._removeRotateEventListeners(),this._removeTiltEventListeners(),this._onMapTiltDebounced.cancel()},n.render=function(){var e,t=this,n=this.state,r=this._isTiltRotateAllowed(),i=n.azimuth,a=n.tilt,s=n.isMove,u=n.isTiltDisabled,l=this.props.map.tiltRange.min;return e=u?"Увеличьте масштаб, чтобы наклонить карту":a!==l?"Убрать наклон карты":"Наклонить карту",o.createElement(o.Fragment,null,r?o.createElement(o.Fragment,null,o.createElement("div",{className:y({"in-action":s}),ref:this._controlRef},o.createElement(m.ZP,{name:"compass",nodeRef:this._analyticsCompassRef},o.createElement(p.Z,{text:0!==i?"Вернуть север сверху":"Повернуть карту",position:"left",isAir:!0,delay:500,isDisabled:s},function(e){return o.createElement("div",null,o.createElement("div",{"aria-hidden":!0,className:y("ring"),style:{transform:"rotate("+i+"rad)"},onClick:t._toggleMapRotate,onMouseDown:t._onRotateStart,ref:e}))})),o.createElement(m.ZP,{name:"tilt_control",nodeRef:this._analyticsTiltRef},o.createElement(p.Z,{text:e,position:"left",isAir:!0,delay:500,isDisabled:s,offset:{main:12,side:0}},function(e){return o.createElement("div",{className:y("tilt-wrapper"),ref:t._tooltipTargetRef},o.createElement("button",{"aria-label":"Наклон карты",type:"button","aria-description":"Переводит карту в режимы отображения 2D и 3D",className:y("tilt",{tilted:a!==l,disabled:u}),style:{transform:"rotateX("+a+"rad)"},onClick:t._toggleMapTiltClickHandler,onMouseDown:u?void 0:t._onTiltStart,onKeyDown:t._toggleMapTiltClickHandler,ref:e},a===l?"3D":"2D"))}))),this._renderTooltip()):null,o.createElement(c.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.Component);t.Z=(0,l.ZP)({shouldWait:!0})((0,v.ZP)(_))},61111:(e,t,n)=>{"use strict";var r,o=n(18007),i=n(87363),a=n(78597),s=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;r||(r=new(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._uris=[],t}(0,o._)(t,e);var n=t.prototype;return n.test=function(e){var t=e.metadata,n=t&&t.get("uri");return!n||!this._uris.includes(n)},n.add=function(e){this._uris.push(e),this._emit("update")},n.remove=function(e){this._uris=this._uris.filter(function(t){return t!==e}),this._emit("update")},t}(e.ymaps3.eventify().with())),e.map.addObjectFilter(r)),r.add(this.props.uri)},n.componentDidUpdate=function(e){this.props.uri!==e.uri&&(r.remove(e.uri),r.add(this.props.uri))},n.componentWillUnmount=function(){r.remove(this.props.uri)},n.render=function(){return null},t}(i.Component);t.Z=(0,a.ZP)({shouldWait:!0})(s)},32584:(e,t,n)=>{"use strict";n.d(t,{V:()=>r,x:()=>o});var r={bus:{normal:"bus-16"},minibus:{normal:"minibus-16"},tramway:{normal:"tram-16"},trolleybus:{normal:"trolley-16"},rapid_tram:{normal:"tram-16"},water:{normal:"ship-16"},underground:{normal:"subway-icon-fallback-16"},cable:{normal:"cableway-16-flip"},aero:{normal:"aero-16-flip"},aeroexpress:{normal:"aeroexpress-16"},funicular:{normal:"funicular-16-flip"},train:{normal:"train-16"},suburban:{normal:"train-16"},suburban_express:{normal:"train-16"},railway:{normal:"train-16"},fallback:{normal:"unknown-16-flip"}},o={fallback:{small:"subway-fallback-16",normal:"subway-fallback-24"},adana_metro:{small:"subway-adana-16",normal:"subway-adana-24"},almaty_metro:{small:"subway-almaty-16",normal:"subway-almaty-24"},amsterdam_metro:{},ankara_metro:{small:"subway-ankara-16",normal:"subway-ankara-24"},ankaray:{small:"subway-ankaray-16",normal:"subway-ankaray-24"},athens_metro:{small:"subway-athens-16",normal:"subway-athens-24"},baku_metro:{small:"subway-baku-16",normal:"subway-baku-24"},barcelona_fgc:{small:"subway-barcelona-16",normal:"subway-barcelona-24"},barcelona_tmb:{small:"subway-barcelona-16",normal:"subway-barcelona-24"},beijing_metro:{},berlin_ubahn:{small:"subway-berlin-16",normal:"subway-de-ubahn-24"},brussels_metro:{},bucharest_metro:{small:"subway-bucharest-16",normal:"subway-bucharest-24"},budapest_metro:{small:"subway-budapest-16",normal:"subway-budapest-24"},buenos_aires_metro:{},bursaray:{small:"subway-bursa-16",normal:"subway-bursa-24"},cairo_metro:{},copenhagen_metro:{small:"subway-copenhagen-metro-16",normal:"subway-copenhagen-24"},dnipro_metro:{small:"subway-dnepropetrovsk-16",normal:"subway-dnepropetrovsk-24"},dubai_metro:{small:"uae-subway-16",normal:"uae-subway-24"},dubai_monorail:{small:"uae-monorail-16",normal:"uae-monorail-24"},dubai_tram:{small:"uae-tram-16",normal:"uae-tram-24"},ekaterinburg_metro:{small:"subway-ekb-16",normal:"subway-ekb-24"},genoa_metro:{},glasgow_subway:{},hamburg_ubahn:{},harbin_metro:{},helsinki_metro:{small:"subway-helsinki-16",normal:"subway-helsinki-24"},hong_kong_mtr:{},istanbul_funicular:{},istanbul_marmaray:{small:"subway-istanbul-marmaray-16",normal:"subway-istanbul-marmaray-24"},istanbul_metro:{small:"subway-istanbul-16",normal:"subway-istanbul-24"},istanbul_metrobus:{small:"subway-bus-istanbul-16",normal:"subway-bus-istanbul-24"},izmir_metro:{small:"subway-izmir-16",normal:"subway-izmir-24"},kazan_metro:{small:"subway-kazan-16",normal:"subway-kazan-24"},kharkiv_metro:{small:"subway-kharkov-16",normal:"subway-kharkov-24"},kiev_metro:{small:"subway-kiev-16",normal:"subway-kiev-24"},kryvyirih_metrotram:{},lille_metro:{},lisbon_metro:{small:"subway-lisboa-16",normal:"subway-lisboa-24"},london_dlr:{small:"subway-london-16",normal:"subway-london-underground-24"},london_underground:{small:"subway-london-16",normal:"subway-london-underground-24"},lyon_metro:{},madrid_metro:{small:"subway-madrid-16",normal:"subway-madrid-24"},mexico_city_metro:{},milan_metro:{},minsk_metro:{small:"subway-minsk-16",normal:"subway-minsk-24"},moscow_mcd:{small:"subway-msk-16",normal:"subway-msk-24"},moscow_metro:{small:"subway-msk-16",normal:"subway-msk-24"},munich_ubahn:{},naples_metro:{},newathos_metro:{},nizhnynovgorod_metro:{small:"subway-nn-16x17",normal:"subway-nn-24"},novosibirsk_metro:{small:"subway-nsk-16",normal:"subway-nsk-24"},nuremberg_ubahn:{},oslo_metro:{small:"subway-oslo-16",normal:"subway-oslo-24"},paris_metro:{small:"subway-paris-16",normal:"subway-paris-metro-24"},paris_rer:{small:"subway-paris-rer-16",normal:"subway-paris-rer-24"},paris_tramway:{small:"subway-paris-tramway-16",normal:"subway-paris-tramway-24"},prague_metro:{small:"subway-prague-metro-16",normal:"subway-prague-24"},pyongyang_metro:{},rome_metro:{small:"subway-roma-16",normal:"subway-roma-24"},sanfrancisco_metro:{small:"subway-san-francisco-metro-16",normal:"subway-san-francisco-metro-24"},samara_metro:{small:"subway-samara-16",normal:"subway-samara-24"},seville_metro:{},singapore_mrt:{},sofia_metro:{small:"subway-sofia-metro-16",normal:"subway-sofia-metro-24"},spb_metro:{small:"subway-spb-16",normal:"subway-spb-24"},stockholm_metro:{small:"subway-stockholm-16",normal:"subway-stockholm-24"},tashkent_metro:{small:"subway-tashkent-16",normal:"subway-tashkent-24"},tbilisi_metro:{small:"subway-tbilisi-16",normal:"subway-tbilisi-24"},toulouse_metro:{},turin_metro:{},vienna_ubahn:{small:"subway-wein-16",normal:"subway-wein-24"},volgograd_metrotram:{small:"subway-tram-volgograd-16",normal:"subway-volgograd-tram-24"},warsaw_metro:{small:"subway-warsaw-metro-16",normal:"subway-warsaw-24"},washington_metro:{},yerevan_metro:{small:"subway-erevan-16",normal:"subway-erevan-24"}}},9662:(e,t,n)=>{"use strict";n.d(t,{lX:()=>c,Lq:()=>v,TX:()=>m,U2:()=>b,Od:()=>f,Sm:()=>h,hU:()=>y,AC:()=>_});var r=n(34788),o=n(11912),i=n(34638),a={bus:(0,i.wd)("--color-transit-bus"),minibus:(0,i.wd)("--color-transit-minibus"),tramway:(0,i.wd)("--color-transit-tram"),trolleybus:(0,i.wd)("--color-transit-trolley"),suburban:(0,i.wd)("--color-transit-fallback"),aeroexpress:(0,i.wd)("--color-transit-aeroexpress"),cable:(0,i.wd)("--color-transit-fallback"),aero:(0,i.wd)("--color-transit-fallback"),funicular:(0,i.wd)("--color-transit-fallback"),underground:(0,i.wd)("--color-transit-fallback"),railway:(0,i.wd)("--color-transit-fallback"),suburban_express:(0,i.wd)("--color-transit-suburban-express"),water:(0,i.wd)("--color-transit-ship"),train:(0,i.wd)("--color-transit-train")};(0,i.wd)("--color-transit-map-green-dark"),(0,i.wd)("--color-transit-map-magenta-dark"),(0,i.wd)("--color-transit-map-red-dark"),(0,i.wd)("--color-transit-trolley"),(0,i.wd)("--color-transit-fallback"),(0,i.wd)("--color-transit-map-red-dark"),(0,i.wd)("--color-transit-fallback"),(0,i.wd)("--color-transit-fallback"),(0,i.wd)("--color-transit-fallback"),(0,i.wd)("--color-transit-fallback"),(0,i.wd)("--color-transit-fallback"),(0,i.wd)("--color-transit-suburban-express"),(0,i.wd)("--color-transit-ship"),(0,i.wd)("--color-transit-map-red");var s=["aero","bus","cable","funicular","minibus","tramway","trolleybus","underground","railway","water","train"],u=["aeroexpress","suburban_express","suburban","rapid_tram"],c={bus:"buses",trolleybus:"trolleybuses",minibus:"minibuses",tramway:"trams",water:"water"},l=(0,r._)({},{aero:function(e,t){return e.count%10==1&&e.count%100!=11?"Самолёт":"Самолёты"},bus:function(e,t){return e.count%10==1&&e.count%100!=11?"Автобус":"Автобусы"},cable:function(e,t){return e.count%10==1&&e.count%100!=11?"Канатная дорога":"Канатная дороги"},funicular:function(e,t){return e.count%10==1&&e.count%100!=11?"Фуникулер":"Фуникулеры"},minibus:function(e,t){return e.count%10==1&&e.count%100!=11?"Маршрутка":"Маршрутки"},railway:function(e,t){return e.count%10==1&&e.count%100!=11?"Поезд":"Поезда"},rapid_tram:function(e,t){return e.count%10==1&&e.count%100!=11?"Трамвай":"Трамваи"},train:function(e,t){return e.count%10==1&&e.count%100!=11?"Поезд":"Поезда"},tramway:function(e,t){return e.count%10==1&&e.count%100!=11?"Трамвай":"Трамваи"},trolleybus:function(e,t){return e.count%10==1&&e.count%100!=11?"Троллейбус":"Троллейбусы"},underground:function(e,t){return"Метро"},water:function(e,t){return"Водный транспорт"},suburban:function(e,t){return e.count%10==1&&e.count%100!=11?"Электричка":"Электрички"},suburban_express:function(e,t){return e.count%10==1&&e.count%100!=11?"Экспресс":"Экспрессы"},aeroexpress:function(e,t){return e.count%10==1&&e.count%100!=11?"Аэроэкспресс":"Аэроэкспрессы"}},{water:function(e,t){return"Маршрут"}}),d="#666";function p(e){return(0,o._)(u).concat((0,o._)(s)).find(function(t){return e.Types.includes(t)})||e.type}function f(e){var t=e.transports[0]?{type:e.transports[0].type,Types:e.transports.map(function(e){return e.Types}).reduce(function(e,t){return(0,o._)(e).concat((0,o._)(t))},[])}:void 0;return"railway"===e.type&&e.transports.every(function(e){return"aeroexpress"===p(e)})?"aeroexpress":t?p(t):void 0}function m(e,t){var n,r;return n={},(r=l[e])?r({count:n.isPlural?2:1},t):"Общественный транспорт"}function v(e){return e&&a[e]||d}function h(e){var t;return(null==(t=e.contour)?void 0:t.color)||e.color||e.type&&a[e.type]||d}var g={bus:!0,minibus:!0,tramway:!0,trolleybus:!0,water:!0};function y(e){return"string"==typeof e&&e in g}function _(e){return["underground","suburban","railway","suburban_express","aeroexpress"].includes(e)}function b(e,t){var n,r;return(null==(n=e.features)?void 0:n.cooled)?"Есть кондиционер":(null==(r=e.features)?void 0:r.heated)?"Отапливается":null}(0,r._)({},g,{aero:!0,cable:!0,funicular:!0,underground:!0,railway:!0,suburban:!0,suburban_express:!0,rapid_tram:!0,aeroexpress:!0,train:!0})},3705:(e,t,n)=>{"use strict";n.d(t,{Yu:()=>s,xP:()=>u,sN:()=>c,CA:()=>l,n:()=>d});var r=n(34788),o=n(53770),i=n(39705),a={cameraDirection:"front"};function s(e,t){var n=e.type,i=e.featureId,s=e.graphType,u=(0,r._)({featureId:i,types:[n],graphType:s},a);return(0,o.Z)("mrc",{query:u},t)}function u(e,t){return(0,o.Z)("mrc/near",{query:{ll:(0,i.s)(e.ll),z:e.z,graphType:e.graphType}},t)}function c(e,t){var n=e.ll,s=e.dir,u=e.graphType;return(0,o.Z)("mrc/directions",{query:(0,r._)({},a,{ll:(0,i.s)(n),dir:s,graphType:u})},t).catch(function(){return null})}function l(e,t){return(0,o.Z)("mrc/track/chunk",{body:{chunkId:e.chunkId}},t)}function d(e,t){return(0,o.Z)("mrc/photo/batch",{body:{ids:e}},t).catch(function(){return null})}},12276:(e,t,n)=>{"use strict";n.d(t,{TO:()=>s,qT:()=>i,Fg:()=>a});var r=n(55877),o=n.n(r);function i(e,t){return{uuid:o()(),type:"FeatureCollection",features:e,polyline:t}}function a(e,t){var n,r,o,i;return o=(n=t.polyline)[(r=e.polylinePosition).segmentIndex],i=n[r.segmentIndex+1],(o&&i?[o[0]*(1-r.segmentPosition)+i[0]*r.segmentPosition,o[1]*(1-r.segmentPosition)+i[1]*r.segmentPosition]:null)||t.polyline[t.polyline.length-1]||[0,0]}var s=null},33418:(e,t,n)=>{"use strict";n.d(t,{Kc:()=>s});var r=n(75766),o=n(34862),i=n(35501),a={};function s(e,t,n){var r,i,a;return e.uri&&e.coords?(r=e.uri,i=e.coords,c(r,t,n).then(function(e){return!e&&i?u(i,t,n):e})):e.uri?c(e.uri,t,n):e.value&&!e.coords?l(a=e.value,function(){return o.Z.fetch({type:["geo"],text:a,count:1,origin:n},t)}):e.coords?u(e.coords,t,n):Promise.resolve(void 0)}function u(e,t,n){return l(e.join(","),function(){return o.Z.fetch({mode:"reverse",type:["geo"],center:e,count:1,origin:n},t)})}function c(e,t,n){return l(e,function(){return o.Z.fetch({uri:e,count:1,origin:n},t)})}function l(e,t){return a[e]?Promise.resolve(a[e]):t().then(function(e){return i.Y(null==e?void 0:e.items)}).then(function(t){return t&&(a[e]=t,Object.keys(a).length>100&&(a=(0,r._)({},e,a[e]))),t})}},17316:(e,t,n)=>{"use strict";n.d(t,{rK:()=>o,Z:()=>l,jk:()=>r,cz:()=>i,Gz:()=>a,Ly:()=>s,uC:()=>u,nz:()=>c});var r={auto:"auto",masstransit:"mt",pedestrian:"pd",bicycle:"bc",scooter:"sc",taxi:"taxi",comparison:"comparison"},o={auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle",sc:"scooter",taxi:"taxi",comparison:"comparison"},i=["bus","tramway","trolleybus","underground","minibus","railway"],a={default:{underlay:8,main:4,border:void 0},colorize:{underlay:10,main:4,border:6}},s={underlay:"#fff",inactiveLight:"#666666",inactiveDark:"#b3b3b3",main:"#6000ff"},u="#b3b3b3",c={inactive:{main:4,underlay:8},pedestrian:{main:4,underlay:8},bicycle:{main:4,underlay:8,route:1.5},masstransit:{pedestrian:4}},l={auto:{avoid:[],ignoreTrafficJams:!1,timeDependent:{type:"departure"}},masstransit:{avoidTypes:i,timeDependent:{type:"departure"}},pedestrian:{avoid:[]},scooter:{avoid:[]},bicycle:{avoid:[]}}},88237:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function o(e){return e.routes.forEach(function(e){e.coordinates=e.encodedCoordinates?function(e){for(var t=function(e){for(var t=[],n=(e=e.replace(/[^A-Za-z0-9\-\+_\=]/g,"")).length,o=0;o<n;){var i=r.indexOf(e.charAt(o++)),a=r.indexOf(e.charAt(o++)),s=r.indexOf(e.charAt(o++)),u=r.indexOf(e.charAt(o++)),c=i<<2|a>>4,l=(15&a)<<4|s>>2,d=(3&s)<<6|u;t.push(String.fromCharCode(c)),64!==s&&t.push(String.fromCharCode(l)),64!==u&&t.push(String.fromCharCode(d))}return t.join("")}(e),n=t.length,o=0,i=[0,0],a=[];o<n;){for(var s=0,u=0,c=0,l=t.substr(o,8);c<4;)s|=l.charCodeAt(c)<<8*c,u|=l.charCodeAt(c+4)<<8*c,c++;var d=[s/1e6,u/1e6],p=[d[0]+i[0],d[1]+i[1]];i=p,a.push(p),o+=8}return a}(e.encodedCoordinates):[]}),e}},13183:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(73754);function o(){return[(0,r.Y)(),(0,r.Y)()]}},86946:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(55877),o=n.n(r),i=n(17316),a=n(13183);function s(e){var t=e.routes;return{uuid:o().v4(),travelMode:(null==t?void 0:t.defaults.travelMode)||"auto",activeField:0,isFocused:!0,isLoading:!1,optimizingStatus:void 0,activeRouteIndex:0,skipApplyBounds:!1,showMapForm:!1,detailedIndex:-1,moreSnippetsShown:!1,activePoint:null,routePoints:(0,a.V)(),viaIndexes:[],routerResponse:null,mrcFeatureCollection:null,activeMrcIndex:null,geolocationError:null,editingCargoPresetId:void 0,activeCargoPresetId:(null==t?void 0:t.defaults.cargo.activeId)||null,cargoPresets:(null==t?void 0:t.defaults.cargo.presets)||[],settings:i.Z}}},73754:(e,t,n)=>{"use strict";function r(){return{input:"",value:"",coords:null}}n.d(t,{Y:()=>r})},56590:(e,t,n)=>{"use strict";function r(e,t){return 0===e?"start":t&&e!==t.length-1?"middle":"finish"}n.d(t,{B:()=>r})},64675:(e,t,n)=>{"use strict";function r(e,t){var n,r;switch(t){case"auto":return n={tolls:"tolls",unpaved:"unpaved",poor_condition:"poor_condition"},e.filter(function(e){return e in n});case"bicycle":case"scooter":case"pedestrian":return r={steep:"steep",stairs:"stairs"},e.filter(function(e){return e in r});default:return[]}}n.d(t,{w:()=>r})},29287:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var r=n(34788);function o(e){var t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");return e.getFullYear()+"-"+t+"-"+n+"T"+r+":"+o+":00"}var i=n(17316),a=n(64675);function s(e,t,n){switch(e){case"auto":var s,u=t[e].timeDependent,c=(0,a.w)((null==(s=t[e])?void 0:s.avoid)||[],e);return{avoid:(null==c?void 0:c.length)?c.join():void 0,timeDependent:{time:u.time?o(new Date(u.time)):void 0},cargo:n&&0!==Object.keys(n).length?n:void 0};case"masstransit":var l=t[e].timeDependent,d=t[e].avoidTypes;return{avoidTypes:0===d.length||d.length===i.cz.length?void 0:d.join(),timeDependent:(0,r._)({},l,{time:l.time?o(new Date(l.time)):void 0})};case"pedestrian":case"scooter":case"bicycle":var p,f=(0,a.w)((null==(p=t[e])?void 0:p.avoid)||[],e);return{avoid:(null==f?void 0:f.length)?f.join():void 0};default:return}}},28361:(e,t,n)=>{"use strict";n.d(t,{D:()=>c});var r=n(34788),o=n(36897),i=n(39705),a=n(37358),s=n(29287),u=n(17316);function c(e,t){var n,c=e.routePoints,l=e.viaIndexes,d=e.travelMode,p=e.activeRouteIndex,f=e.detailedIndex,m=e.settings,v=e.routerResponse,h=e.ignoreTravelModes,g=e.startNavigationInApp,y=e.cargo,_=c[0],b=c.reduce(function(e,n,r){var s=n.coords,u=n.searchResult,l=u&&u.uri&&s&&("toponym"!==u.type||(0,o.J)(u.coordinates,u.displayCoordinates)||u.uri&&a.mI(u.uri))&&(r<t.routes.maxCount-1||r===c.length-1)?u.uri:"";l=a.Jm(l)&&r>0&&r<c.length-1?"":l;var d=s&&(0,i.s)(s,{reverse:!0});return d?{pointCoords:e.pointCoords.concat([d]),pointUris:e.pointUris.concat([a.vz(l)?l:""])}:e},{pointCoords:[],pointUris:[]}),w=b.pointCoords,E=b.pointUris;1===w.length&&_&&!(_.coords||_.value)&&(w.unshift(""),E.unshift(""));var S=m&&(0,s.F)(d,m,y),C=v&&v.routes[p],k="masstransit"===d&&m&&m.masstransit.avoidTypes.length!==u.cz.length?m.masstransit.avoidTypes.join():void 0;return{rtext:w.join("~"),ruri:E.length>0?E.join("~"):void 0,via:l.length>0?l.join("~"):void 0,rtt:u.jk[d],rtn:p>0?p:void 0,rtm:["auto","taxi"].includes(d)&&(null==m?void 0:m.auto.ignoreTrafficJams)?"atm":void 0,rtd:f>-1?f:void 0,routes:(0,r._)({},S,{avoidTypes:k,cargo:(null==(n=t.debug)?void 0:n.params.includes("save-cargo-to-url"))?null==S?void 0:S.cargo:void 0,activeComparisonMode:"comparison"===d&&C&&"taxi"!==C.type?C.type:void 0,timeDependent:S&&S.timeDependent&&("departure"!==S.timeDependent.type||S.timeDependent.time)?S.timeDependent:void 0,ignoreTravelModes:"comparison"===d?h:void 0}),start_navigation:g?"true":void 0}}},51898:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(38614);function o(e,t){var n;return"auto"===e&&!(n=t).uatraits.isMobile&&n.enableRoutesB2B&&r.Z.get("routes_b2b_agreement")||!1}},5835:(e,t,n)=>{"use strict";n.d(t,{n:()=>o,y:()=>i});var r=n(25441);function o(e){return!!(("house"===e.kind||"entrance"===e.kind)&&e.businesses&&e.businesses.totalResultCount>0)}function i(e,t){var n,o,i=(0,r.HA)(e);return t.ui.cardBkoRedesignWithHotels&&i?!!(null==(o=e.advert)?void 0:o.isBko):!!(t.ui.cardBkoRedesign&&!i&&(null==(n=e.advert)?void 0:n.isBko))}},62042:(e,t,n)=>{"use strict";n.d(t,{Z6:()=>u,IP:()=>p,KA:()=>d,M:()=>f,ZI:()=>m,mV:()=>h,eI:()=>l,EX:()=>v});var r=n(4046),o=["overview","timetable","reviews","gallery"],i=["stops","timetable"],a=n(5835),s=n(35501);function u(e){if("services"!==e&&"attractions"!==e)return r.F$.includes(e||"")?e:void 0}function c(e){return r.is.includes(e||"")}function l(e,t){var n,r=(null==t?void 0:null==(n=t.toponymDiscovery)?void 0:n.categories.map(function(e){return e.seoname||e.id}))||[];return c(e)||r.includes(e||"")?e:void 0}function d(e){return o.includes(e||"")?e:void 0}function p(e){return i.includes(e||"")?e:void 0}function f(e){if("overview"!==e)return e}function m(e){return e&&"panorama"!==e&&"feed"!==e?e:"overview"}function v(e){if(e&&"overview"!==e)return e&&e.startsWith(r.dM)?e.replace(r.dM,""):e}function h(e,t){if(!e||"panorama"===e||"gallery"===e)return"overview";var n=s.Y(null==t?void 0:t.items);return"inside"===e&&n&&!(0,a.n)(n)?"overview":c(e)?e:""+r.dM+e}},87708:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(18007),o=n(87363),i=n(31336),a=n(91260),s=n(97313),u=n(44054),c=n(44953),l=n(52869),d=(n(34788),n(53770)),p=(n(2467),n(65807),n(50770),{fetchServiceZone:function(e,t){return(0,d.Z)("business/fetchServiceZone",{query:{businessId:e,lang:t.lang,locale:t.locale,ugc_params:t.query.ugc_params}},t)}}),f={fill:"#3cb300",fillOpacity:.15,stroke:[{color:"#3cb300",opacity:1,width:2}],interactive:!1,zIndex:s.I.minimum,simplificationRate:0},m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadGeometry=function(){n.setState({geometry:void 0});var e=n.props.result.onlineProperties;if(e&&e.toponymIds&&!e.serviceGeometry){null==(t=n._loadAction)||t.cancel();var t,r=n.props;n._loadAction=l.Z.create(p.fetchServiceZone(r.result.id,r.config),{success:function(e){n.setState({geometry:e})}})}},n._renderPolygon=function(e,t){return o.createElement(a.Z,{key:t,geometry:{type:"Polygon",coordinates:e},drawingStyle:f})},n._renderRadius=function(e){var t=n.props.result.coordinates;return o.createElement(c.ZP,{name:"zone"},o.createElement(u.Z,{center:t,radius:e,drawingStyle:f}))},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadGeometry()},n.componentDidUpdate=function(e){e.result.id!==this.props.result.id&&this._loadGeometry()},n.render=function(){var e=this.props.result.onlineProperties||{},t=e.serviceGeometry,n=e.radius,r=this.state.geometry||t;return n?this._renderRadius(1e3*n):r&&r.length>0?r.map(this._renderPolygon):null},t}(o.Component),v=(0,i.ZP)(m)},34862:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(34788),o=n(20224),i=n(11912),a=n(47855),s=n(79651),u=n(50585),c=n(56009),l=n(77226),d=function(e,t,n){if(!(0,l.Z)(n))return!1;var r=typeof t;return("number"==r?!!((0,u.Z)(n)&&(0,c.Z)(t,n.length)):"string"==r&&t in n)&&(0,s.Z)(n[t],e)},p=n(99651),f=Math.ceil,m=Math.max,v=function(e,t,n){t=(n?d(e,t,n):void 0===t)?1:m((0,p.Z)(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,s=Array(f(r/t));o<r;)s[i++]=(0,a.Z)(e,o,o+=t);return s},h=n(57619),g=n(73841),y=n(94960),_=n(39705),b=n(38024),w=n(53770),E=n(18188),S=n(22645),C=n(35501),k=n(24934),R=n(94430),x="",P={fetch:function(e,t,n){void 0===n&&(n={});var r=n.useSlowHandler?"slow/search":"search",o=I(e,t);return(0,w.Z)(r,{query:o},t).then(function(e){x=e.requestId;var t=(0,R.W)();return t&&t.createChild("search_response",{origin:o.origin,reqid:e.requestId,serpid:e.requestSerpId,suggest_reqid:e.suggestRequestId}).attach().detach(),e})},batchFetch:function(e,t){return v(e,15).reduce(function(e,n){return e.then(function(e){var r={requestQueries:n.map(function(e){return I(e,t)})};return(0,w.Z)("search/batch",{body:r},t).then(function(e){var t,n=null==(t=e.find(function(e){return!!e}))?void 0:t.requestId;return n&&(x=n),e}).catch(function(){return n.map(function(){return null})}).then(function(t){return(0,i._)(e).concat([t])})})},Promise.resolve([])).then(function(e){return(0,h.Z)(e)})},fetchSearchResult:function(e,t,n){if("poi"===e.from){if(e.uri)return P.loadPoiByUri(e.uri,t,(0,r._)({},n||{},{origin:e.origin})).then(function(t){return(0,r._)({},t,{items:S.V(t.items).map(function(t,n){return(0,r._)({},t,{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===n?e.coordinates:t.displayCoordinates})})})});if(e.coordinates)return P.loadPoiByCoordinates(e.coordinates,t,(0,r._)({},n||{},{origin:e.origin})).then(function(t){var n=C.Y(t.items);if(k.b(e.hotspotProperties)&&n){var r={title:"Парковка",description:n.address,hotspotProperties:e.hotspotProperties,id:n.id,type:n.type,kind:n.kind,requestId:n.requestId,analyticsId:n.analyticsId,address:n.address,coordinates:n.coordinates,displayCoordinates:n.displayCoordinates,encodedCoordinates:n.encodedCoordinates,stops:n.stops,panorama:n.panorama,photos:n.photos,uri:n.uri,index:0};t.items=[r]}return t})}if("whatshere"===e.from)return P.loadWhatshere(e,t);var o=(0,r._)({},e,{count:1,searchType:"TEXT"});return o.uri&&(o.mode="uri"),P.fetch(o,t)},prepareChainSearchRequest:function(e,t){return P.fetch({count:1,kind:"locality",text:(0,_.s)(e.center,{reverse:!0}),origin:"chain-city"},t).then(function(t){var n={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},r=t.bounds;if(r){var o,i,a,s,u=(o=r[0][1],i=[r[1][0]-r[0][0],r[1][1]-o],a=Math.tan((0,g.I)(o+90)/2),s=Math.tan((0,g.I)(i[1])/2),{center:[(r[0][0]+r[1][0])/2,(0,y.Z)(2*(Math.atan(Math.exp(.5*Math.log(Math.max((-a*a-a*s)/(a*s-1),0))))-.25*Math.PI))],span:i});n.center=u.center,n.span=u.span}return n})},loadPoiByCoordinates:function(e,t,n){return P.fetch({text:(0,_.s)(e,{reverse:!0}),count:1,origin:n.origin,clientId:n.clientId,snippets:M(t)},t)},loadPoiByUri:function(e,t,n){return P.fetch({mode:"uri",uri:e,count:1,origin:n.origin,clientId:n.clientId,snippets:M(t)},t)},loadWhatshere:function(e,t){var n=e.origin,r=(0,o._)(e,["origin"]);return P.fetch({pin:!0,text:(0,_.s)(r.coordinates,{reverse:!0}),zoom:r.zoom,span:[.001,.001],count:1,origin:n||"whatshere",addBuildingGeometry:e.addGeometry},t).then(function(e){var r,o=C.Y(e.items);return o?("poi"!==n||t.uatraits.isMobile||(o.displayCoordinates=o.coordinates),t.uatraits.isMobile&&(null==(r=e.exactResult)?void 0:r.kind)==="house"&&(o.displayCoordinates=e.exactResult.coordinates),e):null}).catch(function(){return null})}};function M(e){return e.search.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e})}function I(e,t){var n,o,i,a=e.clientId||(t.uatraits.isMobile?"maps-m":"maps"),s=e.origin?a+"-"+e.origin:a,u={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:s,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,business_empty_filter:e.emptyFilters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch,menuParams:t.experiments.menuParams,advert_page_id:e.advert_page_id,pron:e.pron};return e.addBuildingGeometry&&(u.search_geometry="2"),e.sortOrigin&&(u.sort_origin=(0,_.s)(e.sortOrigin)),e.center&&(u.ll=(0,_.s)(e.center)),e.span&&(u.spn=(0,_.s)(e.span)),e.bbox&&(u.bbox=e.bbox.join("~")),e.snippets?u.snippets=e.snippets:u.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(u.snippets=u.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(u.snippets=u.snippets.concat("pin_priority/1.x")),t.experiments.ui.showRelatedPlacesAdvertOnMap&&(u.snippets=u.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e}),u.snippets=u.snippets.concat("related_places/1.x")),u.snippets=u.snippets.join(),e.direct&&(u=(0,r._)({},u,t.advert.direct.searchParams)),e.pin&&(u.geocoder_pin=1),e.type&&(u.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some(function(t){return(0,b.V)(e.bounds,t)})&&(u.business_rll=e.routeCoordinates.map(function(e){return(0,_.s)(e,{fractionDigits:5})}).join("~")),e.clientUsecase&&(u.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(u.suggest_reqid=e.suggestReqid),e.serpId&&(u.serpid=e.serpId),(e.parentReqId||x||t.searchPreloadedResults)&&(u.parent_reqid=e.parentReqId||x||t.searchPreloadedResults.requestId),e.geoWhere&&(u.geowhere=(0,_.s)(e.geoWhere,{reverse:!0})),e.businessMode&&(u.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(u.business_show_closed=e.businessShowClosed?1:0),e.ull&&(u.ull=(0,_.s)(e.ull)),t.experiments.ui.a11ySearchFilters&&(u.a11ySearchFilters=1),(0,r._)({},u,e.rawParams,(n=t.query,o=t.experiments,i=(0,r._)({},o.geoSearchParams),o.boxes&&(i["test-buckets"]=o.boxes),i.internal_pron=o.ui,Object.entries(n).reduce(function(e,t){var n=(0,E._)(t,2),r=n[0],o=n[1];return r.startsWith("search_")&&(e[r]=o),e},i)))}var T=P},14245:(e,t,n)=>{"use strict";function r(e){return"enum"===e.type&&"alternate_vertical"===e.id}n.d(t,{S:()=>r})},99209:(e,t,n)=>{"use strict";var r,o,i=n(18007),a=n(87363),s=n(61533),u=n(31336),c={offsetWidth:0,offsetHeight:0},l=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=a.createRef(),n._calcSizes=function(e){return new Promise(function(t){n.setState({render:e},function(){var e,r,o,i=null!=(o=null==(r=n._ref.current)?void 0:null==(e=r.children)?void 0:e[0])?o:c;t({width:i.offsetWidth,height:i.offsetHeight})})})},n.state={render:function(){return null}},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.setCalcSizes(this._calcSizes)},n.render=function(){return a.createElement("div",{ref:this._ref},this.state.render())},t}(a.PureComponent);t.Z=function(e,t){var n=function(){var n,r;return o||((n=window.document.createElement("div")).setAttribute("style","position: absolute; top: -1000px; left: -1000px"),window.document.body.appendChild(n),r=(0,s.createRoot)(n),o=new Promise(function(e){r.render(a.createElement(u.iV,{value:t},a.createElement(l,{setCalcSizes:e})))})),o.then(function(t){return t(e)})};return r=r?r.then(n):n()}},38648:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(5835);function o(e,t){return"business"===e.type?e.direct?"geodirect":t&&(0,r.y)(e,t)?"bko":e.advert?"yabs":"bizfinder":"toponym"===e.type?"geocoder":"direct"===e.type?"geodirect":"collection"===e.type?"collection":"query-suggestions"===e.type?"query-suggestions":void 0}},35501:(e,t,n)=>{"use strict";function r(e){if(e){var t=e.at(0);return t&&"group"===t.type?t.items.at(0):t}}n.d(t,{Y:()=>r})},22645:(e,t,n)=>{"use strict";function r(e){return void 0===e&&(e=[]),e.reduce(function(e,t){return"group"===t.type?t.items.forEach(function(t){return e.push(t)}):e.push(t),e},[])}n.d(t,{V:()=>r})},24773:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(24934);function o(e){if(e){if("categories"in e&&e.categories){var t;return null==(t=e.categories[0])?void 0:t.class}if("toponym"===e.type)return(0,r.b)(e.hotspotProperties)?"car park":"country"===e.kind?"country_fallback":e.kind}}},3558:(e,t,n)=>{"use strict";function r(e){return"similar"===e.type?e.isAdvert:!!("business"===e.type&&e.advert&&e.advert.highlighted)}n.d(t,{x:()=>r})},27760:(e,t,n)=>{"use strict";function r(e){return"business"===e.type}n.d(t,{z:()=>r})},24934:(e,t,n)=>{"use strict";function r(e){return null!=e&&!!e.vectorMetadata&&"carparks"===e.vectorMetadata.get("_vector_layerName")}n.d(t,{b:()=>r})},37358:(e,t,n)=>{"use strict";n.d(t,{fS:()=>E,BW:()=>y,Uu:()=>d,QT:()=>m,p1:()=>w,AW:()=>b,Jm:()=>h,mI:()=>v,vz:()=>g,lB:()=>f,k8:()=>l,l4:()=>p,A:()=>S});var r=n(18188),o=n(80129),i=n(45731),a=n(39705),s="ymapsbm1://pin",u="ymapsbm1://transit/stop",c=/ymapsbm1:\/\/route\/(\w+)/;function l(e){return!!e&&e.startsWith("ymapsbm1://org")}function d(e){return e&&l(e)?_(e).oid:void 0}function p(e){return e.startsWith(s)}function f(e){return!!e&&e.startsWith(u)}function m(e){return e&&f(e)?_(e).id:void 0}function v(e){return l(e)||p(e)||f(e)}function h(e){return e.startsWith("ymapsbm1://geo")}function g(e){return l(e)||p(e)||f(e)||h(e)}function y(e){return(0,i.P)(_(e).ll)}function _(e){return o.parse(e.split("?")[1])}function b(e){return s+o.stringify({ll:(0,a.s)(e)},{addQueryPrefix:!0})}function w(e){return u+o.stringify({id:e},{addQueryPrefix:!0})}function E(e){return"direct"===e.type?"direct-"+(e.direct.url||e.coordinates):"collection"===e.type?"collection-"+e.alias+"-"+e.analyticsId:e.uri}function S(e){return!function(e){if(e)return({pedestrian:"pedestrian",transit:"masstransit",bicycle:"bicycle",scooter:"scooter",driving:"auto"})[(0,r._)(e.match(c)||[],2)[1]]}(e)?void 0:e}},24289:(e,t,n)=>{"use strict";n.d(t,{bL:()=>k,lR:()=>C});var r=n(11912),o=n(22967),i=n(64381),a=n(22370),s=n(99802);function u(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,p=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,f=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function v(e){return e&&parseFloat(e.replace(",","."))||0}var h=[31,null,31,30,31,30,31,31,30,31,30,31];function g(e){return e%400==0||e%4==0&&e%100!=0}var y=n(71002);function _(e){u(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,y.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}var b={};function w(e,t){u(1,arguments);var n,r,o,i,a,s,l,d,p=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:b.weekStartsOn)&&void 0!==r?r:null===(l=b.locale)||void 0===l?void 0:null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=_(e),m=f.getDay();return f.setDate(f.getDate()-((m<p?7:0)+m-p)),f.setHours(0,0,0,0),f}function E(e,t){u(1,arguments);var n=_(e);return Math.round((w(n,t).getTime()-(function(e,t){u(1,arguments);var n,r,o,i,a,s,l,d,p=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:b.firstWeekContainsDate)&&void 0!==r?r:null===(l=b.locale)||void 0===l?void 0:null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1),f=function(e,t){u(1,arguments);var n,r,o,i,a,s,l,d,p=_(e),f=p.getFullYear(),m=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:b.firstWeekContainsDate)&&void 0!==r?r:null===(l=b.locale)||void 0===l?void 0:null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1);if(!(m>=1&&m<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setFullYear(f+1,0,m),v.setHours(0,0,0,0);var h=w(v,t),g=new Date(0);g.setFullYear(f,0,m),g.setHours(0,0,0,0);var y=w(g,t);return p.getTime()>=h.getTime()?f+1:p.getTime()>=y.getTime()?f:f-1}(e,t),m=new Date(0);return m.setFullYear(f,0,p),m.setHours(0,0,0,0),w(m,t)})(n,t).getTime())/6048e5)+1}var S=["break","opening_soon","closing_soon"];function C(e,t,n){void 0===n&&(n={});var r,o=e.status,i=e.currentWorkingStatus,a=n.short?null==i?void 0:i.shortText:null==i?void 0:i.text;return{text:n.showMoved&&(null==(r=e.businessProperties)?void 0:r.moved_to)?"Организация переехала":"open"===o?null!=a?a:"График работы не указан":({"possible-closed":"Возможно, больше не работает","temporary-closed":"Временно не работает","permanent-closed":"Больше не работает"})[o],state:{closed:"open"!==o||!!(i&&!i.isOpenNow),"changing-soon":!!i&&!!i.tag&&i.tag.some(function(e){return S.includes(e)}),"no-data":!a}}}function k(e,t){if(e.workingTime){var n=a.x2(a.$_(t)).getDay(),y=function(e,t){if(!e)return{};var n=[];e.unusual_hours&&(n=n.concat(e.unusual_hours)),e.valid_schedule&&(n=n.concat(e.valid_schedule));var r=a.x2(a.$_(t));return n.reduce(function(e,n){var o=function(e,t){u(1,arguments);var n,r,o,i=c(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==i&&1!==i&&0!==i)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var a=function(e){var t,n={},r=e.split(l.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],l.timeZoneDelimiter.test(n.date)&&(n.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=l.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}(e);if(a.date){var s=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?o:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,i);r=function(e,t){if(null===t)return new Date(NaN);var n,r,o=e.match(d);if(!o)return new Date(NaN);var i=!!o[4],a=m(o[1]),s=m(o[2])-1,u=m(o[3]),c=m(o[4]),l=m(o[5])-1;if(i)return c>=1&&c<=53&&l>=0&&l<=6?((n=new Date(0)).setUTCFullYear(t,0,4),r=n.getUTCDay()||7,n.setUTCDate(n.getUTCDate()+((c-1)*7+l+1-r)),n):new Date(NaN);var p=new Date(0);return s>=0&&s<=11&&u>=1&&u<=(h[s]||(g(t)?29:28))&&a>=1&&a<=(g(t)?366:365)?(p.setUTCFullYear(t,s,Math.max(a,u)),p):new Date(NaN)}(s.restDateString,s.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var y=r.getTime(),_=0;if(a.time&&isNaN(_=function(e){var t=e.match(p);if(!t)return NaN;var n=v(t[1]),r=v(t[2]),o=v(t[3]);return(24===n?0===r&&0===o:o>=0&&o<60&&r>=0&&r<60&&n>=0&&n<25)?36e5*n+6e4*r+1e3*o:NaN}(a.time)))return new Date(NaN);if(a.timezone){if(isNaN(o=function(e){if("Z"===e)return 0;var t=e.match(f);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return o>=0&&o<=59?n*(36e5*r+6e4*o):NaN}(a.timezone)))return new Date(NaN)}else{var b=new Date(y+_),w=new Date(0);return w.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),w.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),w}return new Date(y+_+o)}(n),i=function(e){return u(1,arguments),_(e).getDay()}(o),a=E(o,{weekStartsOn:1})===E(r,{weekStartsOn:1});return!e[i]&&a&&(e[i]=(0,s.p6)(o,t)),e},{})}(e.businessProperties,t);return(0,r._)(e.workingTime.slice(1)).concat([e.workingTime[0]]).map(function(e,r){var s,u=(r+1)%7,c=(0,o.Z)(i.sb[u].slice(0,2));return e?1===e.length&&0===a.Hg(e[0].to,e[0].from)?(s="Круглосуточно",c+=" 00:00-23:59"):(s=e.map(function(e){var t=e.from,n=e.to;return a.BB(t)+" – "+a.BB(n)}),c+=" "+e.map(function(e){var t=e.from,n=e.to;return a.BB(t)+"-"+a.BB(n)}).join(",")):(s="Выходной",c=""),{dayName:(0,i.G7)(t,i.sb[u]),text:s,isWeekend:!e,isToday:n===u,changedDate:y[u],meta:c}})}}},18469:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(18007),o=n(11912),i=n(87363),a=n(31336),s=n(28342),u=n(91260),c=n(37048),l=n(41886),d=n(78597),p=n(35501),f={Polygon:.165,MultiLineString:.05},m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._timestamp=0,n._intensityRaf=-1,n._calculateIntensity=function(){if(n._stopAnimateIntensity(),n._getGeometry()){var e=n._getTargetIntensity();n.state.intensity!==e&&(n._stopAnimateIntensity(),n._startAnimateIntensity())}},n._startAnimateIntensity=function(){n._intensityRaf=window.requestAnimationFrame(n._animateIntensity)},n._stopAnimateIntensity=function(){window.cancelAnimationFrame(n._intensityRaf),n._timestamp=0},n._animateIntensity=function(){var e=n._getGeometry();if(e){var t=n._timestamp?(n.props.getToday().getTime()-n._timestamp)/33.333333333333336:1,r=f[e.type]*t,o=n._getTargetIntensity(),i=n.state.intensity,a=i<o?Math.min(o,i+r):Math.max(o,i-r);n.props.config.query["no-animation"]&&(a=o),n.setState({intensity:a}),a!==o?(n._timestamp=n.props.getToday().getTime(),n._startAnimateIntensity()):n._timestamp=0}},n._getTargetIntensity=function(){var e,t,r,i,a,s,u=n._getGeometry();if(!u)return 0;var d=p.Y(n.props.searchResults.items),f="MultiLineString"===u.type&&d&&h(d);return("Polygon"===u.type||f)&&(e=(0,l.o)((s=[]).concat.apply(s,(0,o._)(u.coordinates))),t=n.props.mapLocation.bounds,r=n.props.mapLocation.zoom,i=(0,c.n)(e,r),a=(0,c.n)(t,r),i[0][0]<=a[0][0]&&i[0][1]<=a[0][1]&&i[1][0]>=a[1][0]&&i[1][1]>=a[1][1])?0:1},n._getDrawingStyle=function(e,t){var r=n.state.intensity;switch(e.type){case"MultiLineString":if(h(t))return{stroke:[{color:"#a3a8a8",opacity:r,width:3}],interactive:!1};return{stroke:[{color:"#000000",opacity:.18,width:6}],interactive:!1};case"Polygon":return{fill:g(t)?"#00ff00":"#ff4141",fillOpacity:.05*r,stroke:[{color:g(t)?"#359400":"#d54747",opacity:.7*r,width:2}],interactive:!1};default:return}},n._getGeometry=function(){var e,t=n.props.searchResults,r=t.requestDisplayGeometry;if(!r){var i=p.Y(t.items);i&&"displayGeometry"in i&&(r=i.displayGeometry)}return(null==(e=r)?void 0:e.type)==="MultiLineString"?{type:"MultiLineString",coordinates:e.coordinates}:(null==e?void 0:e.type)==="GeometryCollection"?{type:"Polygon",coordinates:e.geometries.reduce(function(e,t){return(0,o._)(e).concat((0,o._)(t.coordinates))},[])}:void 0},n.state={intensity:0},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calculateIntensity()},n.componentDidUpdate=function(e){var t=this.props;(e.mapLocation!==t.mapLocation||e.searchResults!==t.searchResults)&&this._calculateIntensity()},n.componentWillUnmount=function(){this._stopAnimateIntensity()},n.render=function(){var e=p.Y(this.props.searchResults.items);if(!e)return null;var t=this._getGeometry();if(!t)return null;var n=this._getDrawingStyle(t,e);return i.createElement(u.Z,{geometry:t,drawingStyle:n})},t}(i.PureComponent),v=["rezervation","forest","park","garden","grass"];function h(e){return"toponym"===e.type&&"route"===e.kind}function g(e){switch(e.type){case"toponym":return"vegetation"===e.kind;case"business":return(e.categories||[]).some(function(e){return v.includes(e.class||"")});default:return!1}}var y=(0,s.ZP)((0,a.ZP)((0,d.ZP)({shouldWait:!0})(m)))},8932:(e,t,n)=>{"use strict";var r=n(18007);n(41988);var o=n(87363),i=n(44748),a=n(81966),s=n(44953),u=n(24773),c=n(38648),l=n(37358),d=n(96449),p=n(96313),f=n(67105),m=n(980),v=n(31336),h=n(54499),g=(0,a.Z)({resolved:{},chunkName:function(){return"stories-preview"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("stories-preview").then(n.bind(n,97776))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 97776}}),y=(0,i.Z)("search-placemark-view"),_=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(){t.props.onClick&&t.props.onClick(t.props.result)},t._getPlacemarkData=function(){var e=t.props;return{icon:e.icon,mode:e.mode,result:e.result}},t._onMouseEnter=function(){null==t.props.onMouseEnter||t.props.onMouseEnter.call(t.props,t._getPlacemarkData())},t._onMouseLeave=function(){null==t.props.onMouseLeave||t.props.onMouseLeave.call(t.props,t._getPlacemarkData())},t._renderCounter=function(){var e,n=t.props,r="advert"in n.result&&(null==(e=n.result.advert)?void 0:e.directPixelShowUrl);return r&&n.mode&&"dot"!==n.mode?o.createElement(h.Z,{url:r}):null},t._renderEntrances=function(){var e=t.props;return e.active?o.createElement(p.Z,{result:e.result,analyticsName:"entrances",animated:!0}):null},t._renderEntranceStory=function(){var e=t.props,n=e.result;return e.active&&"business"===n.type&&n.lastMileStory?o.createElement(g,{result:n}):null},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.result,n=e.icon,r=e.title,i=!e.badgeText&&r&&r.position||"right",a=null;if(r){var p=null;e.badgeText&&(p=o.createElement("div",{className:y("badge")},e.badgeText));var f="bottom"!==i?n.centerY:void 0;a=o.createElement("div",{className:y("title"),style:{marginTop:f}},r.element,p)}var v=u.Y(t),h="brandingId"in t&&t.brandingId||"advert"in t&&t.advert&&t.advert.pinBranding?"branding":v?"rubric":"default",g={marginTop:-n.baseY,marginLeft:"left"===i?n.baseX:"right"===i?-n.baseX:void 0};return o.createElement(s.ZP,{name:e.analyticsName||"placemark",nodeState:{type:c.D(t,e.config.experiments),gml_id:t.analyticsId,pinPriority:"business"===t.type?t.pinPriority:void 0,logId:t.logId,permalink:"id"in t?t.id:void 0,uri:l.fS(t),reqid:t.requestId,suggest_reqid:t.suggestRequestId,branding:"brandingId"in t?t.brandingId:void 0,active:e.active,lowRelevance:"lowRelevance"in t&&t.lowRelevance,relatedAdvertType:"relatedAdvertType"in t&&t.relatedAdvertType||void 0,mode:e.mode,iconType:h},logClick:!0},o.createElement(d.Z,{coordinates:e.coordinates,zIndex:e.zIndex,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},o.createElement("div",{className:y({position:i}),"data-object":"search-placemark","data-id":e.result.id,"data-log-id":e.result.logId,"data-mode":e.mode,"data-coordinates":e.coordinates.join(","),"data-icon-type":h,style:(0,m.cq)(e.config,g)},o.createElement("div",{className:y("icon"),style:{width:n.width,height:n.height}},n.element),a)),e.isLayerInitialized?null:this._renderEntrances(),this._renderEntranceStory(),this._renderCounter())},t}(o.PureComponent);t.Z=(0,f.ZP)((0,v.ZP)(_))},95570:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ei});var r=n(22678),o=n(34788),i=n(18007),a=n(87363),s=n(18188),u=n(24773),c=n(3558),l=n(44748),d=n(31336),p=n(57636),f=n(21469),m=(0,l.Z)("user-icon-view"),v=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._plusWrapper=function(e){return t.props.havePlus?a.createElement("div",{className:m("plus-wrapper",{serp:t.props.serp})},a.createElement("div",{className:m("plus-wrapper-background",{serp:t.props.serp,black:t.props.blackPlusBackground})},e)):e},t._renderIcon=function(){var e=t.props,n=e.size;if("backgroundImage"in e)return a.createElement("div",{className:m("icon"),style:{backgroundImage:"url("+e.backgroundImage+")"}});if(e.seed){var r=e.char?e.char.toUpperCase():null;return a.createElement("div",{className:m("icon",{id:e.seed.toString().split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%7+1,size:void 0===n?"m":n})},r)}return a.createElement(p.Z,{name:"profile-24",className:m("icon",{empty:!0}),inline:!0})},t}return(0,i._)(t,e),t.prototype.render=function(){return this._plusWrapper(this._renderIcon())},t}(a.Component),h=(0,l.Z)("search-placemark-title-modular-hint-view"),g=function(e){var t=(0,d.ZR)(),n=function(){if("RATING"!==e.hint.type||!e.hint.text)return null;var n=Number.parseFloat(e.hint.text);return Number.isNaN(n)?null:a.createElement("span",{className:h()},a.createElement(p.Z,{name:"star-12",className:h("rating-image"),inline:!0}),a.createElement("span",{className:h("rating")},f.D$(n,t.lang,{min:1,max:1})))}()||function(){if("WORKING_HOURS"!==e.hint.type)return null;var t,n,r,o,i=(null==(n=e.hint.properties)?void 0:null==(t=n.workingHours)?void 0:t.shortText)||e.hint.text;if(!i)return null;var s=(null==(o=e.hint.properties)?void 0:null==(r=o.workingHours)?void 0:r.isOpen)===!1;return a.createElement("span",{className:h({red:s})},i)}()||function(){var t,n,r,o=e.hint.text;if("SOCIAL"!==e.hint.type||!o)return null;var i=(null==(r=e.hint.properties)?void 0:null==(n=r.social)?void 0:null==(t=n.avatarLink)?void 0:t.filter(Boolean))||[];return a.createElement("span",{className:h({social:!0})},i.length>0?a.createElement("div",{className:h("social-avatars")},i.map(function(e,t,n){return a.createElement("div",{key:e||t,className:h("social-avatar"),style:{zIndex:n.length-t}},a.createElement(v,{size:"s",backgroundImage:e.replace("{size}","islands-68")}))})):null,a.createElement("span",{className:h("text")},o))}()||(e.hint.text?a.createElement("span",{className:h()},e.hint.text):null);return n?a.createElement(a.Fragment,null,e.children(n)):null},y=(0,l.Z)("search-placemark-title"),_=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderTitleRating=function(){var e,n=null==(e=t.props.subtitleHints)?void 0:e.find(function(e){return"RATING"===e.type});return n?a.createElement(g,{hint:n},function(e){return a.createElement("div",{className:y("title-rating")},e)}):null},t._renderTitle=function(){return a.createElement("div",{className:y("title")},a.createElement("div",{className:y("title-text")},t.props.title),t._renderTitleRating())},t._renderSubtitleHint=function(e,t){return"RATING"===e.type?null:a.createElement(g,{key:t,hint:e},function(e){return a.createElement("span",{className:y("subtitle-item")},e)})},t._renderSubtitle=function(){return t.props.subtitleHints&&t.props.showSubtitle?a.createElement("div",{className:y("subtitle")},t.props.subtitleHints.map(t._renderSubtitleHint)):null},t._renderMultilineSubtitle=function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:y("multiline-subtitle-width")},t._renderSubtitle()),a.createElement("div",{className:y("multiline-subtitle")},t._renderSubtitle()))},t}return(0,i._)(t,e),t.prototype.render=function(){var e=this.props;return a.createElement("div",{className:y({background:e.background,"low-relevance":e.isLowRelevance,position:e.position,"no-truncate":e.disableTruncate})},this._renderTitle(),e.multilineSubtitle?this._renderMultilineSubtitle():this._renderSubtitle())},t}(a.PureComponent),b=(0,d.ZP)(_),w=n(59410),E=(0,l.Z)("poi-placemark-title"),S=function(e){var t=(0,w.Z)(e.title,{length:40}),n=e.hover?void 0:{color:e.color,WebkitTextFillColor:e.color};return a.createElement("div",{className:E({hover:e.hover}),style:n},t.split(" ").map(function(e,t){return a.createElement("span",{key:t,className:E("word")},e)}))},C=n(24289),k=function(e){function t(t){var n;return(n=e.call(this,t)||this)._fetchIcon=function(){n.props.icon.promise.then(function(e){n.setState({element:e})})},n.state={},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchIcon()},n.componentDidUpdate=function(e){this.props.icon.promise!==e.icon.promise&&this._fetchIcon()},n.render=function(){var e=this.state.element;return e?(null==this.props.children?void 0:this.props.children.call(this.props,e))||e:null},t}(a.Component),R=(0,l.Z)("search-placemark-icon"),x=function(e){var t,n,r,i="lowRelevance"in e.result,s={mode:e.mode,state:e.state,"has-advert":c.x(e.result),"low-relevance":i,closed:(t=e.result,n=e.config,"business"===t.type&&("open"!==t.status||C.lR(t,n).state.closed))},u="business"===e.result.type?i?e.result.businessProperties&&e.result.businessProperties.geoproduct_poi_color||"#999":null==(r=e.style)?void 0:r.color:void 0,l=u&&"hover"!==e.state?{color:u}:void 0;return a.createElement("div",{className:R(s),style:(0,o._)({},l)},a.createElement(k,{icon:e.icon}))},P=n(2467),M=n(89318),I=n(980),T=(0,l.Z)("search-placemark-icons"),Z={dot:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="2ccc4e9f8fe2f8acc9e7eab53f797f56__b" d="M7 14A7 7 0 1 0 7 0a7 7 0 0 0 0 14z"/><filter id="2ccc4e9f8fe2f8acc9e7eab53f797f56__a" width="150%" height="150%" x="-25%" y="-17.9%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd" transform="translate(4 4)"><use fill="#000" filter="url(#2ccc4e9f8fe2f8acc9e7eab53f797f56__a)" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><use fill="#FFF" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><path d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z" fill="currentColor"/><path fill="#000" class="tint" d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z"/></g></svg>\n',width:22,height:22},base:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="cbb016882db5c851af06eebb43c674f7__b" d="M17 31c7.732 0 14-6.268 14-14S24.732 3 17 3 3 9.268 3 17s6.268 14 14 14z"/><filter id="cbb016882db5c851af06eebb43c674f7__a" width="200%" height="200%" x="-50%" y="-50%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.200000003 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><use fill="#000" filter="url(#cbb016882db5c851af06eebb43c674f7__a)" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><use fill="#FFF" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><path fill="currentColor" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/><path fill="#000" class="tint" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/></g></svg>\n',width:34,height:34},active:{source:'<svg width="60" height="68" viewBox="0 0 60 68" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M23.51 51.523a.5.5 0 0 1-.5.477c-.29 0-.51-.21-.52-.477-.145-3.168-1.756-5.217-4.832-6.147C7.53 42.968 0 33.863 0 23 0 10.297 10.297 0 23 0s23 10.297 23 23c0 10.863-7.53 19.968-17.658 22.376-3.076.93-4.687 2.98-4.83 6.147z" id="ae96eeecd750ec2a83543f00c9bc789d__b"/><filter x="-21.7%" y="-15.4%" width="143.5%" height="138.5%" filterUnits="objectBoundingBox" id="ae96eeecd750ec2a83543f00c9bc789d__a"><feGaussianBlur in="SourceGraphic" stdDeviation="3"/><feOffset dy="2"/><feComponentTransfer><feFuncA type="linear" slope=".3"/></feComponentTransfer></filter></defs><g fill="none" fill-rule="evenodd"><g fill-rule="nonzero" transform="translate(7 5)" fill="currentColor"><use filter="url(#ae96eeecd750ec2a83543f00c9bc789d__a)" xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/><use xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/></g><path d="M30 68c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="#fff" fill-rule="nonzero"/><path d="M30 66a2 2 0 1 0 .001-3.999A2 2 0 0 0 30 66z" fill="currentColor"/></g></svg>',className:T("active"),width:60,height:68,baseY:64,centerY:28}};function D(e){var t=e.iconSource,n=e.contentPromise,r=e.config;return(0,o._)({},A(t),{promise:n?n.then(function(e){return L({iconSource:t,content:e,config:r})}):Promise.resolve(L({iconSource:t,config:r}))})}function L(e){var t=e.iconSource,n=e.content,r=e.config,i=A(t),s=i.width,u=i.height,c=i.centerX,l=i.centerY,d={className:t.className,dangerouslySetInnerHTML:{__html:t.source}};return n?a.createElement("div",{style:{position:"relative",width:s,height:u}},a.createElement("div",d),a.createElement("div",{style:(0,I.cq)({isRtl:r.isRtl},{position:"absolute",left:c,top:l})},"point"===n?a.createElement("div",{className:T("content")}):n)):a.createElement("div",(0,o._)({style:{width:s,height:u}},d))}function A(e){var t=Math.round(e.width/2),n=Math.round(e.height/2);return{width:e.width,height:e.height,baseX:e.baseX||t,baseY:e.baseY||n,centerX:e.centerX||t,centerY:e.centerY||n}}var N='<svg fill="none" height="40" width="34" xmlns="http://www.w3.org/2000/svg"><filter id="24609e80b326bd45d5a64be8fc7ffd36__a" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse" height="38" width="32" x="1" y="2"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/></filter><g filter="url(#24609e80b326bd45d5a64be8fc7ffd36__a)"><path fill="#000" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/></g><path fill="#fff" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/><path fill="currentColor" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/><path fill="#000" class="tint" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/></svg>',z=n(24466),F=n.n(z),U=(0,l.Z)("rubric-placemark-icons-provider"),O={geoproduct:{source:N,width:34,height:40,centerY:17,baseY:38},"8march":{source:N,width:34,height:40,centerY:17,baseY:38},"low-relevance":{source:'<svg width="28" height="34" viewBox="0 0 28 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.2247 28.9111C12.133 27.9459 11.6447 27.1349 10.8253 26.292C10.2356 25.6855 9.54841 25.1305 8.78321 24.5125C8.44143 24.2365 8.08408 23.9479 7.71292 23.6366C5.37129 21.6722 2.89999 19.1042 2.89999 14.4658C2.89999 8.35203 7.86976 3.39999 14 3.39999C20.1304 3.39999 25.1 8.35434 25.1 14.4658C25.1 19.1025 22.6402 21.6727 20.3021 23.6393C19.9262 23.9555 19.5645 24.2481 19.2186 24.5279C18.46 25.1415 17.7778 25.6935 17.1898 26.2968C16.3675 27.1407 15.8737 27.9527 15.7745 28.9181L15.765 29.0107C15.7161 29.4865 15.4554 29.874 15.1734 30.1276C14.8914 30.3813 14.4782 30.6 13.9988 30.6C13.0882 30.6 12.3249 29.9125 12.2344 29.008L12.2247 28.9111Z" fill="white" fill-opacity="0.6"/><path d="M4.00143 14.5004C4.00143 8.97615 8.47795 4.50179 14 4.50179C19.5221 4.50179 23.9986 8.9783 23.9986 14.5004C23.9986 22.8325 15.3405 23.7089 14.8332 28.6624C14.83 28.694 14.8269 28.7245 14.8239 28.7537C14.785 29.1334 14.3805 29.4982 13.9989 29.4982C13.5738 29.4982 13.218 29.1765 13.1759 28.7535C13.173 28.7243 13.1699 28.694 13.1668 28.6624C12.6965 23.6996 4.00143 22.8325 4.00143 14.5004Z" fill="currentColor"/></svg>\n',width:28,height:34,baseY:32,centerX:14,centerY:15},card:{source:'<svg width="28" height="32" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 14c0 5.508 3.18 10.273 7.805 12.558 3.026 1.573 4.847 3.215 5.463 4.928a.778.778 0 0 0 1.464 0c.616-1.713 2.437-3.355 5.463-4.928C24.819 24.273 28 19.508 28 14c0-7.732-6.268-14-14-14S0 6.268 0 14z" fill="currentColor"/></svg>',width:34,height:40,baseY:38,centerX:14,centerY:14}},q={};function B(e){var t=e.mode,n=e.iconsPromise,r=e.pinType,o=e.config;return{default:D({iconSource:"base"===t&&r&&O[r]||Z[t],contentPromise:n.then(function(e){return a.createElement("div",{className:U(""+t+"-content",{"pin-type":r}),dangerouslySetInnerHTML:{__html:e[t]}})}),config:o})}}var H={get:function(e,t,n){if("8march"===n)return{base:{default:D({iconSource:O.geoproduct,contentPromise:Promise.resolve(a.createElement("div",{className:U("base-content",{custom:!0})},a.createElement("div",{className:U("custom-icon"),style:{backgroundImage:"url("+F()+")"}}))),config:t})},active:{default:D({iconSource:Z.active,contentPromise:Promise.resolve(a.createElement("div",{className:U("active-content",{custom:!0})},a.createElement("div",{className:U("custom-icon"),style:{backgroundImage:"url("+F()+")"}}))),config:t})}};var r=function(e,t){if(!q[e]){var n=["small","normal"].map(function(n){return M.Gr({type:"rubrics",name:e,size:n},t)||""}).map(function(e){return e?(0,P.Z)({url:e,parser:"string"}):Promise.resolve("")});q[e]=Promise.all(n).then(function(e){var t=(0,s._)(e,2);return{base:t[0],active:t[1]}})}return q[e]}(e,t);return{base:B({mode:"base",iconsPromise:r,pinType:n,config:t}),active:B({mode:"active",iconsPromise:r,config:t})}}},j=n(75766),W={dot:{width:18,height:18},base:{width:34,height:40,baseY:36},active:{width:60,height:68,baseY:64,centerY:28}},G={get:function(e,t){return Object.entries(e).reduce(function(e,n){var r=(0,s._)(n,2),i=r[0],a=r[1];return(0,o._)({},e,(0,j._)({},i,Object.entries(a||{}).reduce(function(e,n){var r,a,u,c=(0,s._)(n,2),l=c[0],d=c[1];return(0,o._)({},e,(0,j._)({},l,D({iconSource:(0,o._)({source:((r=d).startsWith("https://")||(r="https://avatars.mds.yandex.net/get-{id}_%s".replace("{id}",r.replace(/--/g,"/"))),a=Math.max(2,Math.ceil(window.devicePixelRatio||1)),u=r.replace("%s","x"+a),'<img height="'+W[i].height+'" width="'+W[i].width+'" src="'+u+'" />')},W[i]),config:t})))},{})))},{})}},Y={width:60,height:68,baseY:64,centerY:28},V={transit:26},K={get:function(e){var t,n,r,i,a,s=e.iconUrl,u=e.tags,c=e.config,l=(u||[]).find(function(e){return Object.keys(V).includes(e)});return{active:(n=(t={iconUrl:s,meta:(0,o._)({},Y,{centerY:l&&V[l]||Y.centerY}),config:c}).iconUrl,r=t.meta,i=t.config,a="width: "+r.width+"px; height: "+r.height+"px;background: url("+n+") 50% bottom no-repeat; background-size: contain",{default:D({iconSource:(0,o._)({source:'<div class="poi-icon-provider" style="'+a+'" />'},r),config:i})})}}},X=n(99209),J=n(36897),$=n(37358);function Q(e,t){return"children"in t?t.children.map(function(t){return Q(e,t)}).find(Boolean)||null:e(t)?t:null}var ee={},et=n(8932),en=n(52869),er=n(97313),eo=function(e){function t(t){var n;return(n=e.call(this,t)||this)._calcPlacemark=function(e){en.Z.cancel(n._calcPlacemarkAction);var t,r,i,l,d,p,f,m=n.state.hover?"hover":"default",v=e.result,h=e.mode,g=e.config;n._calcPlacemarkAction=en.Z.create(Promise.all([(r=(t=f={result:v,mode:h,state:m,config:g}).state||"default",i=["title","subtitle"].includes(t.mode)?"base":t.mode,p=(null==(d=null==(l=function(e){var t,n,r,o=e.result,i=u.Y(o),a="flyover"in o&&(null==(t=o.flyover)?void 0:t.selectedIconUrl);if(a)return K.get({iconUrl:a,config:e.config});if("lowRelevance"in o)return H.get(i||"",e.config,"low-relevance");if("business"===o.type&&o.advert&&o.advert.pinBranding)return G.get(o.advert.pinBranding,e.config);if("hotspotProperties"in o&&o.hotspotProperties&&o.hotspotProperties.selectedIconUrl)return K.get({iconUrl:o.hotspotProperties.selectedIconUrl,tags:o.hotspotProperties.tags,config:e.config});var s=(null==(n=e.style)?void 0:n.forceGeoproduct)||c.x(o),l="categories"in o&&(null==(r=o.categories)?void 0:r.some(function(e){return"184105828"===e.id})),d="flower shop"===i;return e.config.experiments.ui.eightMarchPin&&s&&(l||d)&&i?H.get(i,e.config,"8march"):i?H.get(i,e.config,s?"geoproduct":"default"):void 0}(t))?void 0:l[i])?void 0:d[r])||(null==d?void 0:d.default)||D({iconSource:Z[i],contentPromise:Promise.resolve("dot"!==i?"point":void 0),config:t.config}),(0,o._)({},p,{element:a.createElement(x,{result:t.result,state:r,icon:p,mode:i,config:t.config,style:t.style})})),function(e){var t,n,r,i,s,u,c,l,d="shortTitle"in e.result&&e.result.shortTitle||e.result.title||"",p="modularPin"in e.result?e.result.modularPin.subtitleHints:void 0,f="hover"===e.state;if(e.hideTitle||!d||["dot","base"].includes(e.mode)&&!f)return Promise.resolve(void 0);e.rootFolder&&"toponym"===e.result.type&&(c=null==(t=e.result,n=e.rootFolder,r=$.fS(t),l=Q(function(e){return e.uri===r},n)||(i={coordinates:t.displayCoordinates},Q(function(e){var t=$.BW(e.uri);return $.l4(e.uri)&&null!==t&&(0,J.J)(t,i.coordinates)},n)))?void 0:l.title);var m="lowRelevance"in e.result,v="business"===e.result.type,h={title:null!=c?c:d,subtitleHints:p,showSubtitle:["active","subtitle"].includes(e.mode)||f&&!v,background:"active"!==e.mode,isLowRelevance:m,disableTruncate:!0,multilineSubtitle:"modularPin"in e.result?e.result.modularPin.allowMultilineSubtitle:void 0,goodPlaceYear:"awards"in e.result?!!(null==(s=e.result.awards)?void 0:s.goodPlaceYear):void 0},g=m&&"business"===e.result.type&&(null==(u=e.result.businessProperties)?void 0:u.geoproduct_poi_label_color)||void 0,y=e.titlePosition||"right",_=m&&!["dot","active"].includes(e.mode)&&e.config.isVectorEnabled?a.createElement(S,{title:h.title,color:g,hover:"hover"===e.state}):a.createElement(b,(0,o._)({},h,{position:y})),w=JSON.stringify(h);return ee[w]=ee[w]||(0,X.Z)(function(){return _},e.config),ee[w].then(function(e){return(0,o._)({},e,{element:_,position:y})})}(f)]).then(function(e){var t=(0,s._)(e,2);return{icon:t[0],title:t[1]}}),{success:function(e){return n.setState({placemark:e})}})},n._onMouseEnter=function(){var e=(0,r._)(n).props;n.setState({hover:!0},function(){return n._calcPlacemark(e)})},n._onMouseLeave=function(){var e=(0,r._)(n).props;n.setState({hover:!1},function(){return n._calcPlacemark(e)})},n.state={hover:!1},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calcPlacemark(this.props)},n.componentDidUpdate=function(e){e!==this.props&&this._calcPlacemark(this.props)},n.componentWillUnmount=function(){en.Z.cancel(this._calcPlacemarkAction)},n.render=function(){var e=this.state.placemark;if(!e)return null;var t=this.props,n=t.result,r=er.I.search[t.mode];return a.createElement(et.Z,(0,o._)({coordinates:t.coordinates,result:n},e,{analyticsName:t.analyticsName,zIndex:this.state.hover?r+1:r,onClick:t.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}))},t}(a.Component),ei=(0,d.ZP)(eo)},92830:(e,t,n)=>{"use strict";var r=n(2467),o=n(53770);t.Z={getRoadEvents:function(e,t){return(0,o.Z)("traffic/getRoadEvents",{query:{id:e}},t)},getRoadEvent:function(e,t){return(0,o.Z)("traffic/getRoadEvent",{query:{eventId:e}},t)},getForecast:function(e,t){return(0,o.Z)("traffic/getForecast",{query:{id:e}},t)},actual:{getLevel:function(e,t){return(0,o.Z)("traffic/getLevelInfo",{query:{ids:e.map(String)}},t)}},archive:{getMetaData:function(e,t,n){return(0,r.Z)({url:n.hosts.trafficArchive+"description/traffic-light",query:{tm:t,ids:e.join(","),l:n.locale},jsonp:!0}).then(function(t){var n=(t.data.features||[]).find(function(t){var n=t.properties;return!!(n&&n.HotspotMetaData&&e.includes(n.HotspotMetaData.id))});if(!n)return{level:null};var r=n.properties&&n.properties.JamsMetaData.level;return{level:void 0!==r?r:null}})}}}},59270:(e,t,n)=>{"use strict";n.d(t,{ZU:()=>o,t0:()=>i});var r={closed:"Перекрытие движения",drawbridge:"Развод моста",reconstruction:"Дорожные работы",accident:"ДТП",police:"Камера",other:"Прочее",chat:"Прочее",danger:"Опасный участок"};function o(e){return e||0===e?e>=7?"red":e>=4?"yellow":"green":"gray"}function i(e){return e.type&&r[e.type]||r.other}},2866:(e,t,n)=>{"use strict";n.d(t,{xl:()=>r,Kn:()=>a,lg:()=>s,yp:()=>i,d7:()=>u});var r={tabIndex:-1,"aria-hidden":!0},o=function(e){e.stopPropagation()},i={"aria-disabled":!0,disable:void 0,tabIndex:0,style:{pointerEvents:"unset"},form:"nothing_form",onClick:o,onKeyDown:o},a=new Set(["option","radio","checkbox","menuitemcheckbox","menuitemradio","switch"]),s=new Set(["option","tab","row","gridcell"]),u=function(e,t){var n=t||{},r=n.key,o=void 0===r?"Enter":r,i=n.stopPropogation;return function(t){t.key===o&&(i&&t.stopPropagation(),null==e||e(t))}}},63003:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(18188),o=function(e,t){return e?Object.fromEntries(Object.entries(t).map(function(e){var t=(0,r._)(e,2),n=t[0],o=t[1];return[n.slice(0,4)+"-"+n.slice(4),o]})):t}},7418:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(34788),o=n(18188),i=n(13243),a=(0,n(1851).Z)(Object.getPrototypeOf,Object),s=n(18533),u=Object.prototype,c=Function.prototype.toString,l=u.hasOwnProperty,d=c.call(Object),p=function(e){if(!(0,s.Z)(e)||"[object Object]"!=(0,i.Z)(e))return!1;var t=a(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d},f=function e(t,n){var i=(0,r._)({},t);return Object.entries(n).forEach(function(t){var n=(0,o._)(t,2),r=n[0],a=n[1];i.hasOwnProperty(r)&&p(a)?i[r]=e(i[r],a):i[r]=a}),i}},34638:(e,t,n)=>{"use strict";n.d(t,{qZ:()=>r,wd:()=>o});var r=function(e){var t=e.replace(/(var)|[()]/g,"");try{return window.getComputedStyle(document.body).getPropertyValue(t)||e}catch(n){return e}},o=function(e){return e.startsWith("--")?"var("+e+")":e}},64381:(e,t,n)=>{"use strict";n.d(t,{sb:()=>r,G7:()=>o});var r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function o(e,t){return({sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"})[t]}},65569:(e,t,n)=>{"use strict";function r(e){return e>900?({distance:a(e/1e3,2)}).distance+" км":({distance:a(e,2)}).distance+" м"}function o(e,t){var n="quadratic"===t?1e3:1;return e>900*n?({distance:i(s(e/(1e3*n)))}).distance+" км":({distance:i(s(e))}).distance+" м"}function i(e){return e.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1 ")}function a(e,t){if(void 0===t&&(t=1/0),t<1)throw Error("Can't round to significance of "+t+".");var n=Math.max(0,Math.round(e).toString().length-t);return Number(Math.round(e/Math.pow(10,n))+Array(n).fill("0").join(""))}function s(e){if(e>100)return Math.round(e);var t=Math.pow(10,e>10?1:2);return Math.round(e*t)/t}n.d(t,{Bb:()=>r,Lr:()=>a,jq:()=>o})},32858:(e,t,n)=>{"use strict";function r(e,t,n){var r;void 0===n&&(n={bubbles:!0,cancelable:!0}),"function"==typeof Event?r=new Event(t,n):(r=document.createEvent("Event")).initEvent(t,n.bubbles,n.cancelable),e.dispatchEvent(r)}n.d(t,{N:()=>r})},91086:(e,t,n)=>{"use strict";n.d(t,{mi:()=>c,Zj:()=>u,Y0:()=>o,du:()=>i,kh:()=>s,pk:()=>a,n5:()=>d,go:()=>p});var r={low:null,high:"tier1"},o="tile3d",i=function(e){return e.uatraits.isMobile?r.low:r.high};function a(e){var t;return!!(e&&"mapFeatures"in e&&(null==(t=e.mapFeatures)?void 0:t.some(function(e){return"flyover"in e&&e.flyover})))}function s(e){var t;return!!(e&&"flyoverObjects"in e&&(null==e?void 0:null==(t=e.flyoverObjects)?void 0:t.length)!==0)}var u=15,c={type:"placemark",zoomRange:[15,999],caption:{color:"#1ABAEB2",hoveredColor:"#f43",backgroundColor:"white",subtitle:{text:"3D макет",color:"#198CFF",hoveredColor:"#f43"},text:""},icon:{type:"marker",backgroundColor:"#5FB4ED",hoveredBackgroundColor:"#f43",activeBackgroundColor:"#f43",iconColor:"white"}},l=new Map;function d(e,t,n){var r=""+e+"___"+t+"___"+n,o=l.get(r);if(void 0!==o)return o;var i=l.size;return l.set(r,i),i}function p(e,t){var n;return e&&null!=(n=null==t?void 0:t.getTile3dState(o+":buildings",e))?n:null}},99802:(e,t,n)=>{"use strict";n.d(t,{o0:()=>a,p6:()=>i});var r=n(22370),o=["january","february","march","april","may","june","july","august","september","october","november","december"];function i(e,t,n){void 0===n&&(n={});var i=r.x2(r.$_(t)),a={day:e.getDate(),month:n.isShortMonth?({april:"апр",august:"авг",december:"дек",february:"февр",january:"янв",july:"июля",june:"июня",march:"марта",may:"мая",november:"нояб",october:"окт",september:"сент"})[o[e.getMonth()]]:({april:"апреля",august:"августа",december:"декабря",february:"февраля",january:"января",july:"июля",june:"июня",march:"марта",may:"мая",november:"ноября",october:"октября",september:"сентября"})[o[e.getMonth()]],year:e.getFullYear()};return(void 0!==n.isShortDate?n.isShortDate:e.getFullYear()===i.getFullYear())?a.day+" "+a.month:a.day+" "+a.month+" "+a.year}function a(e,t,n){var o,a;return i(e,t,n)+", "+(o=e.toTimeString().split(" ")[0],(a=r.Qc(o))?""+r.BB(a):"")}},21469:(e,t,n)=>{"use strict";n.d(t,{D$:()=>c,xG:()=>x,yV:()=>s,rF:()=>R,On:()=>f,Xg:()=>P});var r=n(18188),o={max:2},i={ru:"ru",en:"en",uk:"ru",tr:"tr",uz:"ru",kk:"ru",az:"ru",ar:"en","sr-Latn":"tr",hy:"tr",es:"tr"},a={ru:{decimal:",",thousands:" "},en:{decimal:".",thousands:","},tr:{decimal:",",thousands:"."}};function s(e){return a[i[e]]}var u=Object.keys(i).reduce(function(e,t){var n;return e[t]=(n=s(t),function(e,t){var i,a,s,u,c,l,d;return i=e,void 0===(a=t)&&(a=o),"number"==typeof a.max&&(i=Math.round(i*Math.pow(10,a.max))/Math.pow(10,a.max)),u=(s=(0,r._)(i.toString().split("."),2))[0],l=void 0===(c=s[1])?"":c,n.thousands&&(u=u.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+n.thousands)),"number"==typeof a.max&&(l=l.slice(0,a.max)),"number"==typeof a.min&&l.length<a.min&&(l+="0".repeat(a.min-l.length)),d=[u,l].filter(Boolean).join(n.decimal),!l&&a.forceDecimal?d+a.forceDecimal:d}),e},{});function c(e,t,n){return u[t](e,n)}var l={RUB:!0,EUR:!0,USD:!0,GBP:!0,BYN:!0,UAH:!0,KZT:!0,AED:!0,AMD:!0,AZN:!0,GEL:!0,GHC:!0,GHS:!0,ILS:!0,XOF:!0,KGS:!0,LVL:!0,LTL:!0,MDL:!0,RON:!0,RSD:!0,UZS:!0},d={RUB:"₽",EUR:"€",USD:"$",GBP:"£",UAH:"грн.",ILS:"₪",KZT:"₸"},p=(Object.entries(d).reduce(function(e,t){var n=(0,r._)(t,2),o=n[0],i=n[1];return i&&(e[i]=o),e},{}),{XOF:"CFA"}),f={XOF:!0,RSD:!0};function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.keys(l).reduce(function(e,n){var r=t.includes(n)&&d[n];return e[n]={isSymbol:!!r,value:r||p[n]||n},e},{})}var v=m("RUB","EUR","USD","GBP","UAH","ILS","KZT"),h=m("UAH"),g=m("EUR","USD","GBP","ILS","RSD"),y=m("EUR","USD","GBP","ILS","AED"),_=function(e,t,n){return""+e+n+" "+t.value},b=function(e,t,n){return""+t.value+(t.isSymbol?"":" ")+n+e};function w(e,t){return function(n,r,o){return e(n,t[r],o)}}var E=w(_,v),S=w(_,h),C=w(b,y),k=w(b,g),R={ru:E,en:C,uk:S,tr:k,uz:E,kk:E,az:E,ar:C,"sr-Latn":k,hy:k,es:k};function x(e,t){var n,r,o=f[e.currency]||!e.fractionDigits?0:e.fractionDigits,i=null!=(n=e.fractionOptions)?n:{min:o,max:o},a=c(e.value,t,i);return R[t](a,e.currency,null!=(r=e.postfix)?r:"")}function P(e,t){return(e.match(RegExp("[\\d"+t+"]+","g"))||[]).join("").replace(t,".")}},71392:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,A:65,D:68,P:80,S:83,W:87}},980:(e,t,n)=>{"use strict";n.d(t,{cq:()=>s});var r=n(18188),o={paddingLeft:"paddingRight",paddingRight:"paddingLeft",marginLeft:"marginRight",marginRight:"marginLeft",left:"right",right:"left",borderLeft:"borderRight",borderRight:"borderLeft"},i={padding:function(e){return a({isRtl:!0},e)},margin:function(e){return a({isRtl:!0},e)}};function a(e,t){return e.isRtl?[t[0],t[3],t[2],t[1]]:t}function s(e,t){return e.isRtl?Object.entries(t).reduce(function(e,t){var n=(0,r._)(t,2),a=n[0],s=n[1];return i[a]?e[a]=i[a](s):e[o[a]||a]=s,e},{}):t}},58847:(e,t,n)=>{"use strict";function r(e){var t;return e.uatraits.isMobile&&(null==(t=e.query.source)?void 0:t.includes("wizbiz_new_map"))}n.d(t,{d:()=>r})},61250:(e,t,n)=>{"use strict";n.d(t,{J6:()=>l,aA:()=>d,Mg:()=>c});var r=n(11912),o=n(4046),i=u(o.F$),a=u(o.is),s={orgpage:(0,r._)(i).concat(["panorama","feed"]),whatshere:(0,r._)(a).concat(["panorama","gallery"]),toponym:(0,r._)(a).concat(["panorama","gallery"])};function u(e){return e.filter(function(e){return"overview"!==e})}function c(e,t){return!!t&&s[e].includes(t)}function l(e,t){if("sublanding"in t&&c(e,t.sublanding))return t.sublanding}function d(e,t){return"orgpage"===e&&!!t&&["features","posts","chain"].includes(t)}},97313:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var r={screenshotDialog:99999,clipboard:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},advert:5e3,dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},37806:(e,t,n)=>{"use strict";n.d(t,{d3:()=>r,m6:()=>o,D2:()=>c,D4:()=>l,D6:()=>d,D8:()=>p,eU:()=>f,iO:()=>m,KH:()=>a,AL:()=>s,Qs:()=>u,dg:()=>v,Iv:()=>i});var r=6378137,o=23,i=.0818191908426,a=1-Math.sqrt(.9933056200098622),s=(1-a)*6378137,u=1e-10,c=.0033471899950689+22407361726178688e-20/24+3000067879430204e-22/12+44814723452357376e-21*44814723452357376e-21*13/360,l=3137030641665016e-19/48+8700196850347591e-21/240+44814723452357376e-21*44814723452357376e-21*811/11520,d=2100047515601143e-21/120+44814723452357376e-21*44814723452357376e-21*81/1120,p=44814723452357376e-21*44814723452357376e-21*4279/161280,f=1e-6,m=1e-7,v=[!0,!1]},38024:(e,t,n)=>{"use strict";n.d(t,{V:()=>u});var r=n(95930),o=n(15900),i=n(80283),a=n(37048),s=n(37806);function u(e,t,n){e=n?[[Math.min(e[0][0],e[1][0])-n,Math.min(e[0][1],e[1][1])-n],[Math.max(e[0][0],e[1][0])+n,Math.max(e[0][1],e[1][1])+n]]:e;var u=(0,r.Z)(s.m6),c=(0,o.f)(t,s.m6);return(0,i.C)((0,a.n)(e,s.m6),u).some(function(e){return c[0]>=e[0][0]&&c[0]<=e[1][0]&&c[1]>=e[0][1]&&c[1]<=e[1][1]})}},95930:(e,t,n)=>{"use strict";function r(e){return Math.pow(2,e+8)}n.d(t,{Z:()=>r})},41421:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(48447),o=n(48860);function i(e){return function(e){for(var t=[e[0]],n=1;n<e.length;n++){var r=t[n-1],o=e[n];r[0]>0&&o[0]<0&&r[0]>90&&o[0]<0?t.push([o[0]+360,o[1]]):r[0]<0&&o[0]>0&&r[0]<-90&&o[0]>0?t.push([o[0]-360,o[1]]):t.push(o)}return t}(function(e,t,n){for(var i=(0,r.t)(e,t,void 0),a=i.pathFunction,s=i.startPoint,u=i.startDirection,c=i.endPoint,l=i.endDirection,d=[s],p=0;p<3;p++)d=d.concat(function e(t,n,r,i,a){void 0===i&&(i=t(n)),void 0===a&&(a=t(r));var s,u,c,l=Math.PI/60,d=[],p=Math.abs((0,o.d)(Math.atan2(i.direction[0],i.direction[1])-Math.atan2(a.direction[0],a.direction[1]),-Math.PI,Math.PI)),f=0;if(1e-10>Math.abs(p-Math.PI)){var m=[i.point[0],90*i.direction[1]],v=[a.point[0],90*i.direction[1]];d.push(m,v,a.point)}else if(p>l){if((u=Math.ceil(p/l))<Math.PI/4/l||r-n==0){s=(r-n)/u;for(var h=1;h<=u;h++)d.push(t(n+s*h).point)}else s=(r-n)/2,c=t(f=n+s),d=(d=d.concat(e(t,n,f,i,c))).concat(e(t,f,r,c,a))}else d.push(a.point);return d}(a,p/3,(p+1)/3,0===p?{point:s,direction:u}:void 0,2===p?{point:c,direction:l}:void 0));return d}(e[0],e[1]))}},80283:(e,t,n)=>{"use strict";function r(e,t,n){for(var r=Math.floor(e/n),o=Math.floor(t/n),i=[],a=r;a<=o;a++)i.push([a===r?e-r*n:0,a===o?t-o*n:n]);return i}function o(e,t){var n=r(e[0][0],e[1][0],t),o=r(e[0][1],e[1][1],t),i=[];return n.forEach(function(e){o.forEach(function(t){i.push([[e[0],t[0]],[e[1],t[1]]])})}),i}n.d(t,{C:()=>o})},41886:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});var r=n(48860),o=n(15900),i=n(95930),a=n(60309),s=n(37806);function u(e){var t,n,u,c,l,d=[[0,0],[0,0]];return e.length&&(d=(t=e.map(function(e){return(0,o.f)(e,s.m6)}),n=(0,i.Z)(s.m6),u=s.dg,c=[[1/0,1/0],[-1/0,-1/0]],l=t.length,[0,1].forEach(function(e){if(u[e]){t.sort(function(t,n){return t[e]-n[e]});var o=0;t.forEach(function(i,a){var s=a+1,u=s===l?t[0]:t[s],d=(0,r.d)(u[e]-i[e],0,n);d>=o&&(o=d,c[0][e]=u[e],c[1][e]=i[e])}),c[0][e]>c[1][e]&&(c[1][e]+=n)}else t.forEach(function(t){c[0][e]=Math.min(c[0][e],t[e]),c[1][e]=Math.max(c[1][e],t[e])})}),c).map(function(e){return(0,a.W)(e,s.m6)})),d}},38067:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var r=n(48447);function o(e,t){return(0,r.t)(e,t).distance}},39705:(e,t,n)=>{"use strict";function r(e,t){void 0===t&&(t={}),t.reverse?(n=e[1],r=e[0]):(n=e[0],r=e[1]);var n,r,o=void 0===t.fractionDigits?6:t.fractionDigits;return n.toFixed(o)+","+r.toFixed(o)}n.d(t,{s:()=>r})},21307:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(37806);function o(e,t){return void 0===t&&(t=r.iO),Math.min(Math.max(-90+t,e),90-t)}},44330:(e,t,n)=>{"use strict";n.d(t,{u:()=>o});var r=n(48860);function o(e){return(0,r.d)(e,-180,180)}},29657:(e,t,n)=>{"use strict";n.d(t,{S:()=>u});var r=n(73841),o=n(37806),i=n(94960),a=n(21307),s=n(16732);function u(e,t,n){e[1]=(0,a.v)(e[1]);var u=(0,r.I)(e[1]),c=(0,r.I)(e[0]),l=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),d=t[1]/l,p=t[0]/l,f=(1-o.KH)*Math.tan(u),m=(0,s.u)(Math.cos(u))*Math.sqrt(1/(1+f*f)),v=Math.sqrt(1-m*m)*(0,s.u)(f),h=Math.atan2(f,d),g=m*p,y=(1-g)*(1+g),_=y*(o.d3*o.d3/(o.AL*o.AL)-1),b=1+_*(4096+_*(-768+_*(320-175*_)))/16384,w=_*(256+_*(-128+_*(74-47*_)))/1024,E=function(e){var t,r=n*e,a=r/(o.AL*b),s=Math.cos(2*(h+a/2)),u=0,l=0;do{var f=w*Math.sin(a)*(s+.25*w*(Math.cos(a)*(-1+2*s*s)-1/6*w*s*(-3+4*Math.sin(a)*Math.sin(a))*(-3+4*s*s)));t=f-l,l=f,a=r/(o.AL*b)+f,u++}while(Math.abs(t)>o.Qs&&u<10)var _=v*Math.sin(a)-m*Math.cos(a)*d,E=Math.atan2(v*Math.cos(a)+m*Math.sin(a)*d,(1-o.KH)*Math.sqrt(g*g+_*_)),S=Math.atan2(Math.sin(a)*p,m*Math.cos(a)-v*Math.sin(a)*d),C=o.KH/16*y*(4+o.KH*(4-3*y)),k=S-(1-C)*o.KH*g*(a+C*Math.sin(a)*(s+C*Math.cos(a)*(-1+2*s*s))),R=Math.atan2(g,-v*Math.sin(a)+m*Math.cos(a)*d);return{point:[(0,i.Z)(c+k),(0,i.Z)(E)],direction:[Math.sin(R),Math.cos(R)]}},S=E(1);return{startPoint:e,startDirection:t,endPoint:S.point,endDirection:S.direction,distance:n,pathFunction:E}}},48447:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var r=n(29657),o=n(73841),i=n(48860),a=n(37806),s=n(21307),u=n(16732);function c(e){return Math.abs(e-(0,u.u)(e)*Math.PI/2)<a.Qs?(0,u.u)(e)*Math.PI/2:Math.atan((1-a.KH)*Math.tan(e))}function l(e,t,n){return function(o){var i=(0,r.S)(e,t,n*o);return{point:i.endPoint,direction:i.endDirection}}}function d(e,t,n){if(e===t||e[0]===t[0]&&e[1]===t[1]){var r,d,p,f=[1,1];return{startPoint:e,startDirection:f,endPoint:t,endDirection:f,distance:0,pathFunction:l(e,f,0)}}e[1]=(0,s.v)(e[1]),t[1]=(0,s.v)(t[1]);var m=(0,o.I)(e[1]),v=(0,o.I)(t[1]),h=(0,o.I)(t[0]-e[0]),g=c(m),y=c(v),_=h,b=_,w=0,E=0;if(0===m&&0===v){var S=(0,i.d)(t[0]-e[0],n?-360:-180,n?360:180);p=[(d=[S>0?1:-1,0])[0],d[1]],E=2*Math.PI*a.d3/360*Math.abs(S)}else{var C=void 0,k=void 0,R=void 0,x=void 0,P=void 0,M=void 0,I=void 0;do C=Math.sqrt(Math.pow(Math.cos(y)*Math.sin(_),2)+Math.pow(Math.cos(g)*Math.sin(y)-Math.sin(g)*Math.cos(y)*Math.cos(_),2)),k=Math.sin(g)*Math.sin(y)+Math.cos(g)*Math.cos(y)*Math.cos(_),x=1-Math.pow(R=Math.cos(g)*Math.cos(y)*Math.sin(_)/Math.sin(P=n?2*Math.PI-Math.atan2(C,k):Math.atan2(C,k)),2),M=Math.cos(P)-2*Math.sin(g)*Math.sin(y)/x,r=Math.abs(b-(_=Math.min(Math.max(h+(1-(I=a.KH/16*x*(4+a.KH*(4-3*x))))*a.KH*R*(P+I*Math.sin(P)*(M+I*Math.cos(P)*(-1+2*M*M))),-2*Math.PI),2*Math.PI))),b=_,w++;while(r>a.Qs&&w<10)var T=x*(a.d3*a.d3-a.AL*a.AL)/(a.AL*a.AL),Z=T*(256+T*(-128+T*(74-47*T)))/1024,D=Z*Math.sin(P)*(M+.25*Z*(Math.cos(P)*(-1+2*M*M)-1/6*Z*M*(-3+4*Math.sin(P)*Math.sin(P))*(-3+4*M*M))),L=Math.atan2(Math.cos(y)*Math.sin(_),Math.cos(g)*Math.sin(y)-Math.sin(g)*Math.cos(y)*Math.cos(_)),A=Math.atan2(Math.cos(g)*Math.sin(_),-Math.sin(g)*Math.cos(y)+Math.cos(g)*Math.sin(y)*Math.cos(_));E=a.AL*(1+T*(4096+T*(-768+T*(320-175*T)))/16384)*(P-D),n&&(L-=(0,u.u)(L-Math.PI)*Math.PI,A-=(0,u.u)(A-Math.PI)*Math.PI),d=[Math.sin(L),Math.cos(L)],p=[Math.sin(A),Math.cos(A)]}return{startPoint:e,startDirection:d,endPoint:t,endDirection:p,distance:E,pathFunction:l(e,d,E)}}},16732:(e,t,n)=>{"use strict";function r(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1}n.d(t,{u:()=>r})},36897:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var r=n(37806);function o(e,t,n){return void 0===n&&(n=r.eU),Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n}},12690:(e,t,n)=>{"use strict";function r(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}n.d(t,{g:()=>r})},48860:(e,t,n)=>{"use strict";function r(e,t,n){return e===Number.POSITIVE_INFINITY?n:e===Number.NEGATIVE_INFINITY?t:e===t&&e===n?e:e-Math.floor((e-t)/(n-t))*(n-t)}n.d(t,{d:()=>r})},73841:(e,t,n)=>{"use strict";function r(e){return Math.PI/180*e}n.d(t,{I:()=>r})},39029:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(15900);function o(e,t,n,o,i){for(var a=0;a<e.length-1;a++){var s=[e[a],e[a+1]];if(function(e,t,n){var r=t[0],o=t[1],i=n[0]-r,a=n[1]-o,s=i*i+a*a,u=0;0!==s&&(u=Math.max(0,Math.min(1,u=((e[0]-r)*i+(e[1]-o)*a)/s)));var c=r+u*i,l=o+u*a,d=e[0]-c,p=e[1]-l;return Math.sqrt(d*d+p*p)}((0,r.f)(t,o),(0,r.f)(s[0],o),(0,r.f)(s[1],o))<n/2){var u=function(e,t){var n=t[0],r=t[1],o=[n[1]-r[1],r[0]-n[0],n[0]*r[1]-r[0]*n[1]],i=[o[1],-o[0],e[1]*o[0]-e[0]*o[1]],a=o[0]*i[1]-i[0]*o[1];return[(i[2]*o[1]-o[2]*i[1])/a,(i[0]*o[2]-o[0]*i[2])/a]}(t,[s[0],s[1]]);return i?{point:u,segmentIndex:a}:u}}}},94960:(e,t,n)=>{"use strict";function r(e){return 180/Math.PI*e}n.d(t,{Z:()=>r})},4670:(e,t,n)=>{"use strict";function r(e){return[(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5]}n.d(t,{Y:()=>i});var o=n(27689);function i(e,t){var n=r(e),i=r(t),a=(0,o.j)(e),s=(0,o.j)(t);return Math.abs(n[0]-i[0])<(a[0]+s[0])*.5&&Math.abs(n[1]-i[1])<(a[1]+s[1])*.5}},37048:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(15900),o=n(95930);function i(e,t){var n=(0,r.f)(e[0],t),i=(0,r.f)(e[1],t),a=(0,o.Z)(t),s=[[n[0],n[1]],[i[0],i[1]]];return n[0]>i[0]&&(s[0][0]=n[0],s[1][0]=i[0]+a),n[1]>i[1]&&(s[0][1]=i[1],s[1][1]=n[1]),s}},15900:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(44330),o=n(21307),i=n(37806);function a(e,t,n){void 0===n&&(n=!1),s=(a=e)[0],u=a[1];var a,s,u,c=(e=[(0,r.u)(s),(0,o.v)(u)])[1]*Math.PI/180,l=Math.pow(2,t+8),d=n?1:Math.pow(Math.tan(.25*Math.PI+.5*Math.asin(i.Iv*Math.sin(c))),i.Iv);return[(e[0]/360+.5)*l,(.5-Math.log(Math.tan(.25*Math.PI+.5*c)/d)/(2*Math.PI))*l]}},27689:(e,t,n)=>{"use strict";function r(e){return[Math.abs(e[1][0]-e[0][0]),Math.abs(e[1][1]-e[0][1])]}n.d(t,{j:()=>r})},60309:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var r=n(37806);function o(e,t,n){void 0===n&&(n=!0);var o=Math.pow(2,t+8),i=n?e[0]%o:e[0],a=2*Math.atan(Math.exp(Math.PI*(1-2*e[1]/o)))-.5*Math.PI;return[360*i/o-180,180*(a+r.D2*Math.sin(2*a)+r.D4*Math.sin(4*a)+r.D6*Math.sin(6*a)+r.D8*Math.sin(8*a))/Math.PI]}},32448:e=>{"use strict";e.exports="/build/client/worker/content_provider.worker/8b9dee69d1fc8a568d9b.js"},1367:e=>{"use strict";e.exports="/build/client/worker/gltf_decoder.worker/291dcf1a7d0877433e49.js"},69674:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{F:()=>r})},48223:(e,t,n)=>{"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{_:()=>r})},49675:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(22683);function o(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.b)(e,t)}},22683:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{b:()=>r})},86775:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(94529);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,s=!1;try{for(o=o.call(e);!(a=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(u){s=!0,r=u}finally{try{a||null==o.return||o.return()}finally{if(s)throw r}}return i}}(e,t)||(0,r.N)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},49771:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(69674),o=n(94529);function i(e){return function(e){if(Array.isArray(e))return(0,r.F)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.N)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},94529:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(69674);function o(e,t){if(e){if("string"==typeof e)return(0,r.F)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return(0,r.F)(e,t)}}},29009:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(22683);function o(e,t,n){return(o=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&(0,r.b)(i,n.prototype),i}:Reflect.construct).apply(null,arguments)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return o(e,arguments,i(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,r.b)(n,e)})(e)}},71002:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:()=>r})},22678:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{_:()=>r})},79429:(e,t,n)=>{"use strict";n.d(t,{_:()=>o,L:()=>o});var r=n(83840);function o(e,t,n){return(o=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&(0,r.b)(i,n.prototype),i}:Reflect.construct).apply(null,arguments)}},2267:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{_:()=>o})},11640:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(21769),o=n(43439),i=n(14276),a=n(73270);function s(e){return(0,r.o)(e)||(0,o.f)(e)||(0,a.N)(e)||(0,i.i)()}},13317:(e,t,n)=>{"use strict";var r=n(71036),o=n(62281);t.Z=function(e,t){t=(0,r.Z)(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[(0,o.Z)(t[n++])];return n&&n==i?e:void 0}},85469:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(45365),o=n(66808),i=function(e,t,n,i){var a=n.length,s=a,u=!i;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var l=(c=n[a])[0],d=e[l],p=c[1];if(u&&c[2]){if(void 0===d&&!(l in e))return!1}else{var f=new r.Z;if(i)var m=i(d,p,l,e,t,f);if(!(void 0===m?(0,o.Z)(p,d,3,i,f):m))return!1}}return!0},a=n(77226),s=function(e){return e==e&&!(0,a.Z)(e)},u=n(8543),c=function(e){for(var t=(0,u.Z)(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,s(o)]}return t},l=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},d=function(e){var t=c(e);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}},p=n(13317),f=function(e,t,n){var r=null==e?void 0:(0,p.Z)(e,t);return void 0===r?n:r},m=n(94262),v=n(99365),h=n(62281),g=n(69203),y=n(27771),_=n(54193),b=function(e){var t,n,r;if("function"==typeof e)return e;if(null==e)return g.Z;if("object"==typeof e){return(0,y.Z)(e)?(t=e[0],n=e[1],(0,v.Z)(t)&&s(n)?l((0,h.Z)(t),n):function(e){var r=f(e,t);return void 0===r&&r===n?(0,m.Z)(e,t):(0,o.Z)(n,r,3)}):d(e)}return r=e,(0,v.Z)(r)?(0,_.Z)((0,h.Z)(r)):function(e){return(0,p.Z)(e,r)}}},54193:(e,t)=>{"use strict";t.Z=function(e){return function(t){return null==t?void 0:t[e]}}},47855:(e,t)=>{"use strict";t.Z=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},71976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(17685),o=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},i=n(27771),a=n(72714),s=1/0,u=r.Z?r.Z.prototype:void 0,c=u?u.toString:void 0,l=function e(t){if("string"==typeof t)return t;if((0,i.Z)(t))return o(t,e)+"";if((0,a.Z)(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},71036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(27771),o=n(99365),i=n(42454),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,u=function(e){var t=(0,i.Z)(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,n,r,o){t.push(r?o.replace(s,"$1"):n||e)}),t}),c=n(77338),l=function(e,t){return(0,r.Z)(e)?e:(0,o.Z)(e,t)?[e]:u((0,c.Z)(e))}},35042:(e,t,n)=>{"use strict";var r=n(47855);t.Z=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:(0,r.Z)(e,t,n)}},39047:(e,t)=>{"use strict";var n=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.Z=function(e){return n.test(e)}},99365:(e,t,n)=>{"use strict";var r=n(27771),o=n(72714),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.Z=function(e,t){if((0,r.Z)(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||(0,o.Z)(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},75876:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(39047),o="\ud800-\udfff",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\ud83c[\udffb-\udfff]",s="[^"+o+"]",u="(?:\ud83c[\udde6-\uddff]){2}",c="[\ud800-\udbff][\udc00-\udfff]",l="(?:"+i+"|"+a+")?",d="[\\ufe0e\\ufe0f]?",p="(?:\\u200d(?:"+[s,u,c].join("|")+")"+d+l+")*",f=RegExp(a+"(?="+a+")|(?:"+[s+i+"?",i,u,c,"["+o+"]"].join("|")+")"+(d+l+p),"g"),m=function(e){return(0,r.Z)(e)?e.match(f)||[]:e.split("")}},62281:(e,t,n)=>{"use strict";var r=n(72714),o=1/0;t.Z=function(e){if("string"==typeof e||(0,r.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},22967:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(77338),o=n(35042),i=n(39047),a=n(75876),s=function(e){e=(0,r.Z)(e);var t=(0,i.Z)(e)?(0,a.Z)(e):void 0,n=t?t[0]:e.charAt(0),s=t?(0,o.Z)(t,1).join(""):e.slice(1);return n.toUpperCase()+s},u=function(e){return s((0,r.Z)(e).toLowerCase())}},57619:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(58694),o=n(17685),i=n(84732),a=n(27771),s=o.Z?o.Z.isConcatSpreadable:void 0,u=function(e){return(0,a.Z)(e)||(0,i.Z)(e)||!!(s&&e&&e[s])},c=function e(t,n,o,i,a){var s=-1,c=t.length;for(o||(o=u),a||(a=[]);++s<c;){var l=t[s];n>0&&o(l)?n>1?e(l,n-1,o,i,a):(0,r.Z)(a,l):i||(a[a.length]=l)}return a},l=function(e){return(null==e?0:e.length)?c(e,1):[]}},94262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=function(e,t){return null!=e&&t in Object(e)},o=n(71036),i=n(84732),a=n(27771),s=n(56009),u=n(1656),c=n(62281),l=function(e,t,n){t=(0,o.Z)(t,e);for(var r=-1,l=t.length,d=!1;++r<l;){var p=(0,c.Z)(t[r]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++r!=l?d:!!(l=null==e?0:e.length)&&(0,u.Z)(l)&&(0,s.Z)(p,l)&&((0,a.Z)(e)||(0,i.Z)(e))},d=function(e,t){return null!=e&&l(e,t,r)}},69203:(e,t)=>{"use strict";t.Z=function(e){return e}},42454:(e,t,n)=>{"use strict";var r=n(80520);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r.Z),n}o.Cache=r.Z,t.Z=o},85087:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(72714),o=function(e,t,n){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=t(a);if(null!=s&&(void 0===u?s==s&&!(0,r.Z)(s):n(s,u)))var u=s,c=a}return c},i=n(85469),a=function(e,t){return e<t},s=function(e,t){return e&&e.length?o(e,(0,i.Z)(t,2),a):void 0}},111:(e,t,n)=>{"use strict";var r=n(99111),o=n(77226);t.Z=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return(0,o.Z)(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),(0,r.Z)(e,t,{leading:i,maxWait:t,trailing:a})}},77338:(e,t,n)=>{"use strict";var r=n(71976);t.Z=function(e){return null==e?"":(0,r.Z)(e)}},59410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(71976),o=n(35042),i=n(39047),a=n(77226),s=n(13243),u=n(18533),c=n(21162),l=n(98351),d=l.Z&&l.Z.isRegExp,p=d?(0,c.Z)(d):function(e){return(0,u.Z)(e)&&"[object RegExp]"==(0,s.Z)(e)},f=(0,n(54193).Z)("length"),m="\ud800-\udfff",v="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",h="\ud83c[\udffb-\udfff]",g="[^"+m+"]",y="(?:\ud83c[\udde6-\uddff]){2}",_="[\ud800-\udbff][\udc00-\udfff]",b="(?:"+v+"|"+h+")?",w="[\\ufe0e\\ufe0f]?",E="(?:\\u200d(?:"+[g,y,_].join("|")+")"+w+b+")*",S=RegExp(h+"(?="+h+")|(?:"+[g+v+"?",v,y,_,"["+m+"]"].join("|")+")"+(w+b+E),"g"),C=function(e){for(var t=S.lastIndex=0;S.test(e);)++t;return t},k=n(75876),R=n(99651),x=n(77338),P=/\w*$/,M=function(e,t){var n=30,s="...";if((0,a.Z)(t)){var u="separator"in t?t.separator:u;n="length"in t?(0,R.Z)(t.length):n,s="omission"in t?(0,r.Z)(t.omission):s}var c=(e=(0,x.Z)(e)).length;if((0,i.Z)(e)){var l=(0,k.Z)(e);c=l.length}if(n>=c)return e;var d=n-(v=s,(0,i.Z)(v)?C(v):f(v));if(d<1)return s;var m=l?(0,o.Z)(l,0,d).join(""):e.slice(0,d);if(void 0===u)return m+s;if(l&&(d+=m.length-d),p(u)){if(e.slice(d).search(u)){var v,h,g=m;for(u.global||(u=RegExp(u.source,(0,x.Z)(P.exec(u))+"g")),u.lastIndex=0;h=u.exec(g);)var y=h.index;m=m.slice(0,void 0===y?d:y)}}else if(e.indexOf((0,r.Z)(u),d)!=d){var _=m.lastIndexOf(u);_>-1&&(m=m.slice(0,_))}return m+s}},97582:(e,t,n)=>{"use strict";n.d(t,{pi:()=>r});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError}}]);